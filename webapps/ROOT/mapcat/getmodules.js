/**/﻿_jsload&&_jsload('glcommon', 'function fG(e,i){this.origin=e||null;this.direction=i||null}ev.extend(fG.prototype,{set:function(e,i){this.origin=e;this.direction=i}});dt.Ray=fG;function g6(jg,e,jm){jm=jm||{};var i=jm.filter||jg.LINEAR;var jk=jm.format||jg.RGBA;var jj=jm.type||jg.UNSIGNED_BYTE;var T=jm.wrap||jg.CLAMP_TO_EDGE;var jf=jm.mipmap||false;var jh=jm.testError||false;var je=jm.unpackAlpha||false;var jl;if(typeof jm.flipY!=="boolean"){jl=true}else{jl=jm.flipY}var ji=jg.createTexture();jg.bindTexture(jg.TEXTURE_2D,ji);jg.pixelStorei(jg.UNPACK_FLIP_Y_WEBGL,jl);if(je){jg.pixelStorei(jg.UNPACK_PREMULTIPLY_ALPHA_WEBGL,true)}jg.texParameteri(jg.TEXTURE_2D,jg.TEXTURE_WRAP_S,T);jg.texParameteri(jg.TEXTURE_2D,jg.TEXTURE_WRAP_T,T);jg.texParameteri(jg.TEXTURE_2D,jg.TEXTURE_MAG_FILTER,i);jg.texParameteri(jg.TEXTURE_2D,jg.TEXTURE_MIN_FILTER,jf?jg.LINEAR_MIPMAP_LINEAR:i);if(e===null){jg.texImage2D(jg.TEXTURE_2D,0,jk,jm.width,jm.height,0,jk,jj,null)}else{jg.texImage2D(jg.TEXTURE_2D,0,jk,jk,jj,e)}if(jf){jg.generateMipmap(jg.TEXTURE_2D)}if(jh===true){if(jg.getError()===jg.INVALID_VALUE){return null}}return ji}dt.utils={createTexture:g6};function bm(i,e){this._gl=i;e=e||{};this._ids={};this._count=0;this._width=e.width||4096;this._height=e.height||4096;this._name=e.name||"";this._textureType=e.textureType||i.UNSIGNED_BYTE;this._unpackAlpha=e.unpackAlpha||false;this._texture=null;this._currentOffsetY=0;this._currentX=0;this._nextX=0;this._usage=0;this.guid=bp.getGUID("texture_atlas_");this.isRendering=false;this._textTextureCache=[];if(e.init===true){this.initTexture()}}ev.extend(bm.prototype,{initTexture:function(){var e=this._gl;this._texture=dt.utils.createTexture(e,null,{type:this._textureType,width:this._width,height:this._height,unpackAlpha:this._unpackAlpha})},getTexture:function(){if(!this._texture){this.initTexture()}return this._texture},getSize:function(){return new h8(this._width,this._height)},addTexture:function(i,e){if(i.id&&this._ids[i.id]){return this._ids[i.id]}if(!this._texture){this.initTexture()}e=e||i.height;var jg=this._height-i.height-this._currentOffsetY;if(jg<0){this._currentX=this._nextX;this._currentOffsetY=0;jg=this._height-i.height;if(this._currentX>=this._width){return null}}if(i.width>(this._nextX-this._currentX)){this._nextX=this._currentX+i.width;if(this._nextX>this._width){return null}}var jf=this._gl;jf.bindTexture(jf.TEXTURE_2D,this._texture);jf.pixelStorei(jf.UNPACK_FLIP_Y_WEBGL,true);jf.texSubImage2D(jf.TEXTURE_2D,0,this._currentX,jg,jf.RGBA,this._textureType,i);var je=this._currentOffsetY;this._currentOffsetY+=e;this._calcUsage();this._count++;var T={width:this._currentX/this._width,height:(this._height-je-e)/this._height};this._ids[i.id]=T;return T},_calcUsage:function(){this._usage=(this._currentX*this._height+(this._nextX-this._currentX)*this._currentOffsetY)/(this._height*this._width)},getUsage:function(){return this._usage},clear:function(){this._currentOffsetY=0;this._currentX=0;this._nextX=0;this._count=0;this._usage=0;this._ids={}}});dt.TextureAtlas=bm;function dr(i,e){this._gl=i;e=e||{};this._textureWidth=e.width||4096;this._textureHeight=e.height||4096;this._name=e.name||"";this._unpackAlpha=e.unpackAlpha||false;this._textureCollection=[]}ev.extend(dr.prototype,{getEmptyTexture:function(){var e=null;if(this._textureCollection.length<3){e=new bm(this._gl,{width:this._textureWidth,height:this._textureHeight,name:this._name,unpackAlpha:this._unpackAlpha});this._textureCollection.push(e)}else{e=this._textureCollection.shift();while(e.inUse===true){this._textureCollection.push(e);e=this._textureCollection.shift()}e.clear();this._textureCollection.push(e)}e.inUse=true;return e},free:function(e){e.inUse=false}});dt.TextTextureManager=dr;var fK={instances:{},get:function(e,i){if(!i){throw"必须指定id"}if(!fK.instances[i]){fK.instances[i]=new hD(e)}return fK.instances[i]}};function hD(e){this._gl=e;this._attributes=new Uint8Array(16);this._enabledAttributes=new Uint8Array(16);this._capabilities={depthTest:[-1,this._gl.DEPTH_TEST],blend:[-1,this._gl.BLEND],cullFace:[-1,this._gl.CULL_FACE],stencilTest:[-1,this._gl.STENCIL_TEST],scissorTest:[-1,this._gl.SCISSOR_TEST]};this._faceCulling=-1;this._depthMask=-1;this._blendFunc=[-1,-1,-1,-1];this._colorMask=[-1,-1,-1,-1];this._depthFunc=-1;this._frontFace=-1;this._activeTexture=-1;this._clearColor=[0,0,0,0];this._fail=-1;this._zfail=-1;this._zpass=-1}ev.extend(hD.prototype,{initAttribute:function(){for(var T=0,e=this._attributes.length;T<e;T++){this._attributes[T]=0}},enableAttribute:function(e){this._attributes[e]=1;if(this._enabledAttributes[e]===0){this._gl.enableVertexAttribArray(e);this._enabledAttributes[e]=1}},disableUnusedAttributes:function(){for(var T=0,e=this._enabledAttributes.length;T<e;T++){if(this._enabledAttributes[T]!==this._attributes[T]){this._gl.disableVertexAttribArray(T);this._enabledAttributes[T]=0}}},enableCap:function(e){if(this._capabilities[e][0]!==true){this._gl.enable(this._capabilities[e][1]);this._capabilities[e][0]=true}},disableCap:function(e){if(this._capabilities[e][0]!==false){this._gl.disable(this._capabilities[e][1]);this._capabilities[e][0]=false}},cullFace:function(e){if(this._faceCulling!==e){this._gl.cullFace(e);this._faceCulling=e}},blendFunc:function(){var i=arguments;var e=this._blendFunc;if(i.length===2){if(i[0]!==e[0]||i[1]!==e[1]||i[0]!==e[2]||i[1]!==e[3]){e[0]=i[0];e[1]=i[1];e[2]=i[0];e[3]=i[1];this._gl.blendFunc.apply(this._gl,arguments)}}else{if(i.length===4){if(i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]){e[0]=i[0];e[1]=i[1];e[2]=i[2];e[3]=i[3];this._gl.blendFuncSeparate.apply(this._gl,arguments)}}}},colorMask:function(){var e=arguments;var je=true;for(var T=0;T<e.length;T++){if(this._colorMask[T]!==e[T]){this._colorMask[T]=e[T];je=false}}if(!je){this._gl.colorMask.apply(this._gl,arguments)}},depthFunc:function(e){if(this._depthFunc!==e){this._depthFunc=e;this._gl.depthFunc(e)}},depthMask:function(e){if(this._depthMask!==e){this._gl.depthMask(e);this._depthMask=e}},frontFace:function(e){if(this._frontFace!==e){this._frontFace=e;this._gl.frontFace(e)}},activeTexture:function(e){if(this._activeTexture!==e){this._activeTexture=e;this._gl.activeTexture(e)}},clearColor:function(e){if(!e||e.length<4){return}if(this._clearColor[0]!==e[0]||this._clearColor[1]!==e[1]||this._clearColor[2]!==e[2]||this._clearColor[3]!==e[3]){this._clearColor=e.slice(0,4);this._gl.clearColor(e[0]/255,e[1]/255,e[2]/255,e[3]/255)}},stencilOp:function(i,T,e){if(this._fail!==i||this._zfail!==T||this._zpass!==e){this._fail=i;this._zfail=T;this._zpass=e;this._gl.stencilOp(i,T,e)}}});dt.WebGLState=fK;');
﻿_jsload&&_jsload('marker', 'ev.extend(d9.prototype,{initialize:function(e){this.map=e;this._addDom();this._bind();if(this.domElement){this.domElement.hashCode=this.hashCode}ev.BaseClass.call(this,this.hashCode);if(!this._visible){ev.hide(this.domElement)}this.dispatchEvent(new fa("ondomready"));return this.domElement},_bind:function(){if(!this.domElement){return}var e=this;var T=this.map;function i(jh,jg){var jf=jh.srcElement||jh.target;var je=jh.clientX||jh.pageX;var jj=jh.clientY||jh.pageY;if(jh&&jg&&je&&jj&&jf){var ji=ev.Dom.getOffset(T.container);jg.pixel=new eO(je-ji.left,jj-ji.top);jg.point=T.pixelToPointIn(jg.pixel);jg.latLng=T.pixelToPoint(jg.pixel);return jg}else{return jg}}ev.on(this.domElement,"mouseover",function(je){if(!e._dragstarted){e.dispatchEvent(i(je,new fa("onmouseover").inherit(je)))}});ev.on(this.domElement,"mouseout",function(je){if(!e._dragstarted){e.dispatchEvent(i(je,new fa("onmouseout").inherit(je)))}});if(bK()){ev.on(this.domElement,"touchstart",function(je){e._bind._touchStartPos=new eO(je.changedTouches[0].clientX,je.changedTouches[0].clientY)});ev.on(this.domElement,"touchend",function(jg){var jf=new Date().getTime();var je=new eO(jg.changedTouches[0].clientX,jg.changedTouches[0].clientY);if(Math.abs(je.x-e._bind._touchStartPos.x)>10||Math.abs(je.y-e._bind._touchStartPos.y)>10){e._bind._touchStartPos=null;return}e.dispatchEvent(i(jg,new fa("onclick").inherit(jg)));if(e._config&&typeof e._config.click==="function"){e._config.click()}if(e.map&&jf-e._dblclickTime<e.map.config.clickInterval){e.dispatchEvent(i(jg,new fa("ondblclick").inherit(jg)))}e._dblclickTime=jf})}ev.on(this.domElement,"click",function(jf){if(window.TouchEvent&&bK()){return}var je=jf.srcElement||jf.target;while(je){if(je===e.domElement){if(e.toString()!=="Marker"||e.toString()==="Marker"&&(!e._lastPt||e._lastPt&&e.getPoint().equals(e._lastPt))){if(e.addStat&&typeof e.addStat==="function"){e.addStat()}e.dispatchEvent(i(jf,new fa("onclick").inherit(jf)))}break}else{if(e.map&&e.map.infoWindowDoms&&je===e.map.infoWindowDoms.popDom){break}}je=je.parentNode}});ev.on(this.domElement,"mousedown",function(je){if(e.toString()==="Marker"){e._lastPt=e.getPoint()}e.dispatchEvent(i(je,new fa("onmousedown").inherit(je)))});ev.on(this.domElement,"mouseup",function(je){e.dispatchEvent(i(je,new fa("onmouseup").inherit(je)))});ev.on(this.domElement,"dblclick",function(jf){e.dispatchEvent(i(jf,new fa("ondblclick").inherit(jf)));var je=jf.target||jf.srcElement||{};if(je.tagName!=="circle"&&je.tagName!=="oval"){gH(jf)}});ev.on(this.domElement,"contextmenu",function(je){e.dispatchEvent(i(je,new fa("onrightclick").inherit(je)))})},hide:function(){if(this._visible===false){return false}this._visible=false;ev.hide(this.domElement);if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow();this.closeSimpleInfoWindow()}return true},show:function(){if(this._visible===true){return false}this._visible=true;if(this._visibleInternal){ev.show(this.domElement);return true}else{return false}},setStyle:function(e){if(!this.domElement){return}if(this.siblingElement){this.siblingElement.style.cssText=this.siblingElement.style.cssText+";"+e}else{this.domElement.style.cssText=this.domElement.style.cssText+";"+e}},getPoint:function(T,je){if(!T){return this.point}else{var e=je?je.width:0;var jf=je?je.height:0;if(this.map){var i=this.map.pointToPixelIn(this.point);if(this._config&&this._config.offset){i.x=i.x+this._config.offset.width+e;i.y=i.y+this._config.offset.height+jf}else{i.x=i.x+e;i.y=i.y+jf}return this.map.pixelToPointIn(i)}}},setZIndex:function(e){var i=this;i.zIndex=e;i._updateDomZIndex()},_updateDomZIndex:function(){var i=this;var e;if(typeof i.zIndex!=="undefined"){e=i.zIndex}else{e=0;if(i.map&&i.getPoint()){var T=i.getPoint()?i.getPoint().lat:0;e=aI.getZIndex(T,i.map.config.coordType)+(i._config.baseZIndex||0)}}if(i.domElement){i.domElement.style.zIndex=e}},isVisible:function(){if(!this.map){return false}if(this.map._renderType!=="webgl"&&!this.domElement){return false}return !!this._visible},showInternal:function(){if(this._visibleInternal===true){return false}if(this.collisionDetectionFailed===true){return false}this._visibleInternal=true;if(this._visible===true){ev.show(this.domElement)}return true},hideInternal:function(e){if(this._visibleInternal===false){return false}this._hideInternalReason=e;this._visibleInternal=false;ev.hide(this.domElement);if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow();this.closeSimpleInfoWindow()}return true}});iU.TOP_ZINDEX=aI.getZIndex(-90)+1000000;iU.DRAG_ZINDEX=iU.TOP_ZINDEX+1000000;window.BMAP_ANIMATION_RAISEUP=3;window.BMAP_ANIMATION_DROPDOWN=4;iU._addDragCrossImg=function(T,e){if(!iU._dragCrossImg){iU._dragCrossImg=bL("img",{src:w.imgPath+"drag_cross.png",width:13,height:9});iU._dragCrossImg.style.position="absolute";if(ev.Browser.ie===6){delete iU._dragCrossImg;var je=iU._dragCrossImg=bL("div");var i=je.style;i.position="absolute";i.width="13px";i.height="9px";i.filter=\'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image,src="\'+w.imgPath+\'drag_cross.png")\'}}var i=iU._dragCrossImg.style;i.left=T.width-6+"px";i.top=T.height-5+"px";e.appendChild(iU._dragCrossImg)};iU._removeDragCrossImg=function(){if(iU._dragCrossImg&&iU._dragCrossImg.parentNode){iU._dragCrossImg.parentNode.removeChild(iU._dragCrossImg)}};ev.extend(iU.prototype,{initialize:function(e){d9.prototype.initialize.call(this,e);if(!this._visible){if(this.siblingElement){ev.hide(this.siblingElement)}}this.setPoint(this.point);this.setIcon(this._config.icon,this._config.startAnimation);this.setLabel(this._config.label);this.setTitle(this._config.title);if(this._rotation!==0){this.setRotation(this._rotation)}this._initDrag();return this.domElement},setOptions:function(e){if(this.map){if(!e.icon){e.icon=new iy(w.imgPath+"marker_red.png",new h8(23,25),{offset:new h8(10,25),infoWindowOffset:new h8(10,0)})}this.setIcon(e.icon,e.startAnimation);this.setConfig(e);this.setLabel(this._config.label);this.setTitle(this._config.title)}else{this.setConfig(e);if(!e.icon){this._config.icon=new iy(w.imgPath+"marker_red.png",new h8(23,25),{offset:new h8(10,25),infoWindowOffset:new h8(10,0)})}}},_addDom:function(){var e=this.map;if(this.domElement&&this.domElement.parentNode){this.domElement.parentNode.removeChild(this.domElement);this.domElement=null}this.domElement=bB(e.getPanes().markerMouseTarget,this._msTargetRender());if(e.getMapType()==="B_EARTH_MAP"||e._renderType==="webgl"){return}this.siblingElement=bB(e.getPanes().markerPane,this._markerRender());this.siblingElement.hashCode=this.getHashCode()},_msTargetRender:function(){var e=[\'<div class="BMap_Marker BMap_noprint" unselectable="on" \'];e.push(this._config.title?\'title="\'+this._config.title+\'"\':\'""\');e.push(\' style="position:absolute;padding:0;margin:0;border:0;width:0;height:0;-moz-user-select:none;\');e.push(this._config.clickable?"cursor:pointer;":"");e.push("width:"+this._config.icon.size.width+"px;");e.push("height:"+this._config.icon.size.height+"px;");e.push(\'"></div>\');return e.join("")},_markerRender:function(){var e=[\'<div class="BMap_Marker" unselectable="on" \'];e.push(\'style="position:absolute;padding:0;margin:0;border:0;\');e.push(\'width:0;height:0;-moz-user-select:none"></div>\');return e.join("")},draw:function(T){if(!this.domElement){return}T=T||{};var i=this._getPixPos(T.zoom,T.center);if(i.onBack||i.outOfFrustum){this.hideInternal("out-of-view");return}this.showInternal();this.domElement.style.left=i.x+"px";this.domElement.style.top=i.y+"px";if(this.siblingElement){this.siblingElement.style.left=i.x+"px";this.siblingElement.style.top=i.y+"px"}else{if(this.map.getMapType()!=="B_EARTH_MAP"&&this.map._renderType!=="webgl"){this.initialize(this.map)}}if(this.infoWindow!==null&&this.infoWindow.isOpen()){this.infoWindow.setPosition(T.center,T.zoom)}},_getPixPos:function(T,e){var jf=this._config.offset||new h8(0,0);var je=this._config.icon.offset||new h8(0,0);var i=this.map.pointToOverlayPixelIn(this.getPoint(),{zoom:T,center:e,fixPosition:true});i.x+=jf.width-je.width;i.y+=jf.height-je.height;return i},_getInPnBox:function(i){var jh=this._config.offset||new h8(0,0);var jg=this._config.icon.offset||new h8(0,0);var jf=parseInt(this.domElement.style.left);var T=parseInt(this.domElement.style.top);jf-=jh.width;T-=jh.height;var je=parseInt(this.domElement.style.width);var e=parseInt(this.domElement.style.height);if(i.x>=jf&&i.x<=jf+je&&i.y>=T&&i.y<=T+e){return true}else{return false}},_draw:function(){if(this.map){this.domElement=this.initialize(this.map)}},remove:function(){if(this.siblingElement&&this.siblingElement.parentNode){this.siblingElement.parentNode.removeChild(this.siblingElement)}if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow();this.closeSimpleInfoWindow();this.infoWindow=null}this.siblingElement=null;this.iconDom=null;if(this._config.label){var i=this._config.label;i.setMarker(null);this.map.removeOverlay(i);this._config.label=null}d9.prototype.remove.call(this);var e=new fa("onstatus_change");e.action="remove";e.overlay=this;this.fire(e)},hide:function(){if(d9.prototype.hide.call(this)===false){return false}if(this.siblingElement){ev.hide(this.siblingElement)}if(this._config.label){ev.hide(this._config.label.domElement)}var e=new fa("onstatus_change");e.overlay=this;e.action="hide";this.fire(e);return true},show:function(){if(d9.prototype.show.call(this)===false){if(this._hideInternalReason==="out-of-view"){var e=new fa("onstatus_change");e.overlay=this;e.action="show";this.fire(e)}return false}this.draw();if(this.siblingElement){ev.show(this.siblingElement)}if(this._config.label){ev.show(this._config.label.domElement)}var e=new fa("onstatus_change");e.overlay=this;e.action="show";this.fire(e);return true},showInternal:function(){if(d9.prototype.showInternal.call(this)===false){return false}if(!this._visible){return false}if(this.siblingElement){ev.show(this.siblingElement)}if(this._config.label){this._config.label.showInternal()}return true},hideInternal:function(e){if(d9.prototype.hideInternal.call(this,e)===false){return false}if(this.siblingElement){ev.hide(this.siblingElement)}if(this._config.label){this._config.label.hideInternal(e)}return true},setIcon:function(jh,jf){if(!jh){return}var ji=this._config.icon.getCurrentImageUrl();var je=jh.getCurrentImageUrl()!==ji;this._config.icon=jh;if(!this.map||!this.domElement){return}var i=this.map;if(this.iconDom&&this.siblingElement){this.siblingElement.removeChild(this.iconDom);this.iconDom=null}if(this.domElement){var jg=this.domElement.style;jg.width=jh.size.width+"px";jg.height=jh.size.height+"px";jg.transformOrigin=jh.anchor.width+"px "+jh.anchor.height+"px"}if(this.siblingElement){var T=this.iconDom=bL("div",{"class":jf||""});var jj=T.style;jj.position="absolute";jj.padding=jj.margin="0";jj.width=jh.size.width+"px";jj.height=jh.size.height+"px";jj.overflow="hidden";if(jh.imageUrl){T.innerHTML=jh.getHTML()}else{if(jh.imageDom){T.appendChild(jh.imageDom);if(jh.imageSize){jh.imageDom.style.width=jh.imageSize.width+"px";jh.imageDom.style.height=jh.imageSize.height+"px"}}}T.galleryImg=false;this.siblingElement.style.transformOrigin=jh.anchor.width+"px "+jh.anchor.height+"px";this.siblingElement.appendChild(this.iconDom)}this.textureCoord=this.textureCoordGLMap=null;this.draw();var e=new fa("onstatus_change");e.overlay=this;e.action="setIcon";e.imageUrlChanged=je;this.fire(e)},setRotation:function(i){while(i<0){i+=360}this._rotation=i%360;var e=new fa("onstatus_change");e.overlay=this;e.action="setRotation";this.fire(e);if(!this.map||!this.domElement){return}this.domElement.style.transform="rotate("+i+"deg)";if(this.siblingElement){this.siblingElement.style.transform="rotate("+i+"deg)"}},setLabel:function(e){if(!(e instanceof a5)){return}e._config.enableMassClear=this._config.enableMassClear;this._config.label=e;var i=this;if(!this._config.label._binded){this._config.label._binded=true;this._config.label.addEventListener("remove",function(){i._config.label=null})}if(!this.map){return}e.setPoint(this.point);this.map.addOverlay(e);e.setMarker(this)},_initDrag:function(){if(!this.domElement||this.domElement._binded){return}this.domElement._binded=true;var T=this.map;var ji=this;var jg=0;var jf=0;var je=0;var jj={x:0,y:0};function jh(jl,jk){jk.pixel=jl.pixel;jk.point=jl.point;jk.latLng=jl.latLng;return jk}function i(jm){var jl=jm.clientX;var jk=jm.clientY;if(jm.changedTouches){jl=jm.changedTouches[0].clientX;jk=jm.changedTouches[0].clientY}return new eO(jl,jk)}var e=new eO(0,0);this.dragStart=function(jm){e=i(jm);if(!ji._config.enableDragging){return}ji._isDragging=true;var jl=T.pointToPixelIn(ji.point);var jk=i(jm);jg=jk.x-jl.x;jf=jk.y-jl.y;je=new Date().getTime();if(ji.map){ji.map.temp._draggingMarker=ji}ev.on(document,"mousemove",ji.dragIng);ev.on(document,"mouseup",ji.dragEnd);ev.on(document,"touchmove",ji.dragIng);ev.on(document,"touchend",ji.dragEnd);if(ji.domElement&&ji.domElement.setCapture){ji.domElement.setCapture()}};this.dragIng=function(jq){var jl=i(jq);if(jl.equals(e)){return}e=jl;if(!ji._isDragging){return}var jm=i(jq);var jn=new eO((jm.x-jg),(jm.y-jf));jj=jn;ji._draggingMovePixel=jn;if((ji._config.restrictDraggingArea&&(jn.x>15&&jn.x<ji.map.width-15)&&(jn.y>30&&jn.y<ji.map.height-15))||!ji._config.restrictDraggingArea){var jk=ji.map.pixelToPointIn(jn);var jo=ji.map.pixelToPoint(jn);var jp={pixel:jn,point:jk,latLng:jo};ji._panByX=ji._panByY=0;if(jn.x<=20||jn.x>=ji.map.width-20||jn.y<=50||jn.y>=ji.map.height-10){if(jn.x<=20){ji._panByX=8}else{if(jn.x>=ji.map.width-20){ji._panByX=-8}}if(jn.y<=50){ji._panByY=8}else{if(jn.y>=ji.map.height-10){ji._panByY=-8}}if(!ji._draggingMoveTimer){ji._draggingMoveTimer=setInterval(function(){T.panBy(ji._panByX,ji._panByY,{newAnimation:true});var jr=T.pixelToPointIn(ji._draggingMovePixel);ji.setPoint(jr)},30)}}else{if(ji._draggingMoveTimer){clearInterval(ji._draggingMoveTimer);ji._draggingMoveTimer=null}ji.setPoint(jk)}if(!ji._dragstarted){ji.dispatchEvent(jh(jp,new fa("ondragstart").inherit(jq)));ji._dragstarted=true;if(ji._config.raiseOnDrag){ji.setAnimation(BMAP_ANIMATION_RAISEUP);iU._addDragCrossImg(ji._config.icon.offset,ji.siblingElement)}}ji.dispatchEvent(jh(jp,new fa("ondragging").inherit(jq)))}};this.dragEnd=function(jk){if(ji.domElement&&ji.domElement.releaseCapture){ji.domElement.releaseCapture()}ji._isDragging=false;if(ji.map){ji.map.temp._draggingMarker=null}ev.un(document,"mousemove",ji.dragIng);ev.un(document,"mouseup",ji.dragEnd);ev.un(document,"touchmove",ji.dragIng);ev.un(document,"touchend",ji.dragEnd);jg=jf=0;if(ji._draggingMoveTimer){clearInterval(ji._draggingMoveTimer);ji._draggingMoveTimer=null}if(jj.x>2||jj.y>2){ji._dragstarted=false;ji.dispatchEvent(jh({pixel:ji.map.pointToPixelIn(ji.getPoint()),point:ji.getPoint(),latLng:ig.convertMC2LL(ji.getPoint())},new fa("ondragend").inherit(jk)));if(ji._config.raiseOnDrag){ji.setAnimation(BMAP_ANIMATION_DROPDOWN);iU._removeDragCrossImg()}jj.x=jj.y=0}ji._updateDomZIndex()};this.delVertexMarker=function(jk){gH(jk);ji.dispatchEvent(jh({pixel:ji.map.pointToPixelIn(ji.getPoint()),point:ji.getPoint(),latLng:ig.convertMC2LL(ji.getPoint())},new fa("onmarkerdelvertex").inherit(jk)))};ev.on(this.domElement,"mousedown",this.dragStart);ev.on(this.domElement,"touchstart",this.dragStart);ev.on(this.domElement,"contextmenu",this.delVertexMarker)},setPoint:function(e){if(!e){return}if(this.map.config.coordType===BMAP_COORD_GCJ02){var T=hF(e,3);this.point=this._config.point=new cf(T.lng,T.lat);this.latLng=ig.convertMC2LL(T)}else{this.point=this._config.point=new cf(e.lng,e.lat);this.latLng=ig.convertMC2LL(e)}if(this._config.label){this._config.label.setPoint(this.point)}this.draw();this._updateDomZIndex();var i=new fa("onstatus_change");i.overlay=this;i.action="setPoint";this.fire(i)},_updateDomZIndex:function(){var T=this;var i;if(T._isDragging===true){i=iU.DRAG_ZINDEX}else{if(T._config.isTop===true){i=iU.TOP_ZINDEX+(T._addi||0)}else{if(typeof T.zIndex!=="undefined"){i=T.zIndex}else{i=0;if(T.map&&T.getPoint()){i=aI.getZIndex(T.getPoint().lat,T.map.config.coordType)+T._config.baseZIndex}}}}if(T.domElement){T.domElement.style.zIndex=i}if(T.siblingElement){T.siblingElement.style.zIndex=i}this._zIndex=i;var e=new fa("onstatus_change");e.overlay=this;e.action="zIndex";this.fire(e)},setTop:function(i,e){i=(typeof i!=="boolean")?true:i;this._config.isTop=!!i;if(i){this._addi=e||0}this._updateDomZIndex()},setTitle:function(e){this._config.title=e||"";if(this.domElement){this.domElement.title=this._config.title}},setOffset:function(i){if(!i){return}this._config.offset=i;this.setPoint(this.getPoint());var e=new fa("onstatus_change");e.overlay=this;e.action="setOffset";this.fire(e)},setAnimation:function(i){var e=this;gn.load("markeranimation",function(){e._setAnimation(i)},true)},_setAnimation:function(i){if(!this.iconDom){return}this._clearAnimation(i!==null);var e=ao[i];if(!e){return}this._execJSAnimation(i)},_clearAnimation:function(i){if(i){if(this._aniObj){this._aniObj.stop();this._aniObj=null}this.iconDom.style.top=this.iconDom.style.left="0px";if(this.shadowDom){this.shadowDom.style.top=this.shadowDom.style.left="0px"}}else{if(this._aniObj){var e=this;this._aniObj.setFinishCallback(function(){e._aniObj=null})}}},_execJSAnimation:function(jg){var ji=this.iconDom.style;var e=false;var jf;if(this.shadowDom){e=true;jf=this.shadowDom.style}var T=ao[jg];var jk=this;var jj=T.iconAnis.length,jn=T.options.duration,jm=jk._aniObj=new e3({duration:0,delay:e3.INFINITE});var jl=T.iconAnis;var je=T.shadowAnis;ji.top=jl[0].translate[1]+"px";if(e){jf.left=je[0].translate[0]+"px";jf.top=je[0].translate[1]+"px"}for(var jh=1;jh<jj;jh++){(function(){var js=[jl[jh].translate[0]-jl[jh-1].translate[0],jl[jh].translate[1]-jl[jh-1].translate[1]];var jr=[jl[jh-1].translate[0],jl[jh-1].translate[1]];if(e){var jp=[je[jh].translate[0]-je[jh-1].translate[0],je[jh].translate[1]-je[jh-1].translate[1]];var jo=[je[jh-1].translate[0],je[jh-1].translate[1]]}var jq=fY[jl[jh-1].timingFunc];var i=function(){};if(jh===jj-1){if(T.options.loop!==e3.INFINITE){i=function(){jk._aniObj=null}}else{i=function(){jk._aniObj.start()}}}jm.add(new e3({duration:(T.iconAnis[jh].percent-jl[jh-1].percent)*jn,fps:40,delay:e3.INFINITE,transition:jq,render:function(jt){if(jk.iconDom){jk.iconDom.style.top=jr[1]+Math.round(jt*js[1])+"px"}if(e&&jk.shadowDom){jk.shadowDom.style.left=jo[0]+Math.round(jt*jp[0])+"px";jk.shadowDom.style.top=jo[1]+Math.round(jt*jp[1])+"px"}},finish:i}))})()}jm.start()},getVertexInfoForGL:function(){var T=this._config.icon.getRenderData();var e=this.point;var jf=hT(e.lng);var i=hT(e.lat);var je=[];this._buildVertexForEachRender(jf,i,je);return{vertex:je,textureCoordGLMap:T.textureCoordGLMap}},_buildVertexForEachRender:function(jl,jk,ji){var jj=this._config.icon;var je=this._config.offset;var e=0;var jh=[];jh[0]=[-jj.offset.width+je.width,-(jj.size.height-jj.offset.height)-je.height];jh[1]=[jj.size.width-jj.offset.width+je.width,-(jj.size.height-jj.offset.height)-je.height];jh[2]=[jj.size.width-jj.offset.width+je.width,jj.offset.height-je.height];jh[3]=[-jj.offset.width+je.width,jj.offset.height-je.height];if(this._rotation!==0){for(var jf=0;jf<jh.length;jf++){var T=vec2.fromValues(jh[jf][0],jh[jf][1]);vec2.rotate(T,T,[0,0],hM(-this._rotation));jh[jf][0]=T[0];jh[jf][1]=T[1]}}while(e<6){var jg=e<3?e:(e===3?e-3:e-2);ji.push([jl[0],jk[0],jl[1],jk[1],jh[jg][0],jh[jg][1]]);e++}}});var gp=iy.prototype;gp.getHTML=function(){if(!this.imageUrl){return""}var e=[];e.push(\'<img src="\'+this.imageUrl+\'" \');if(this.srcSet){e.push(\'srcset="\'+this.srcSet+\'" \')}e.push(\'style="left:\'+(-this.imageOffset.width)+"px;");e.push("top:"+(-this.imageOffset.height)+"px;");if(this.imageSize){this.imageSize.width&&e.push("width:"+this.imageSize.width+"px;");this.imageSize.height&&e.push("height:"+this.imageSize.height+"px;")}e.push(\'position:absolute;"/>\');return e.join("")};ev.extend(a5.prototype,{_addDom:function(){var i=this._config;var je=this.content;var e=bL("label",{"class":"BMapLabel",unselectable:"on"});if(i.title){e.title=i.title}var T=e.style;T.position="absolute";T.MozUserSelect="none";if(i.width===0||i.width==="auto"){T.display="inline"}else{T.width=i.width+"px";T.display="block";T.overflow="hidden"}if(!ev.Browser.ie){T.cursor="inherit"}e.innerHTML=je;this.coordType=this.map?this.map.config.coordType:"";this.map.getPanes().labelPane.appendChild(e);this.domElement=e;this.setStyle(this._config.styles);return e},setPoint:function(e){if(e){if(this.coordType===BMAP_COORD_GCJ02){var i=hF(e,3);this.point=this._config.point=i.clone()}else{this.point=this._config.point=e.clone()}this.draw()}},draw:function(T){if(this.domElement&&this.getPoint()){var je=this._config.offset||new h8(0,0);T=T||{};var i=this.map.pointToOverlayPixelIn(this.getPoint(),{zoom:T.zoom,center:T.center,fixPosition:true});if(i.onBack||i.outOfFrustum){this.hideInternal("out-of-view")}else{this.showInternal();this.domElement.style.left=(i.x+je.width)+"px";this.domElement.style.top=(i.y+je.height)+"px";this._updateDomZIndex()}}},_draw:function(){if(this.map){if(!this.domElement){this.domElement=this.initialize(this.map)}this.draw()}},setContent:function(e){this.content=e;if(this.domElement){this.domElement.innerHTML=e}},setOpacity:function(e){if(e>=0&&e<=1){this._config.opacity=e}if(this.domElement){this.domElement.style.opacity=e}},setOffset:function(e){if(!e){return}this._config.offset=new h8(e.width,e.height);this.draw()},setStyle:function(i){i=i||{};this._config.styles=ev.extend(this._config.styles,i);if(this.domElement){for(var je in i){try{this.domElement.style[je]=i[je]}catch(T){}}}},setTitle:function(e){this._config.title=e||"";if(this.domElement){this.domElement.title=this._config.title}}});ev.extend(dN.prototype,{initialize:function(e){d9.prototype.initialize.call(this,e);return this.domElement},_getPixPos:function(jf,i){var je=this.map.getZoomUnits();var e=this._config.height/je/2;var T=this.map.pointToPixelIn(this.getPoint(),{zoom:jf,center:i,height:e});return T},_draw:function(){if(this.map){this.domElement=this.initialize(this.map)}},_addDom:function(){var e=this.map;if(this.domElement&&this.domElement.parentNode){this.domElement.parentNode.removeChild(this.domElement);this.domElement=null}this.domElement=bB(e.getPanes().markerMouseTarget,this._msTargetRender());if(e.getMapType()==="B_EARTH_MAP"||e._renderType==="webgl"){return}},remove:function(){d9.prototype.remove.call(this);var e=new fa("onstatus_change");e.action="remove";e.overlay=this;this.fire(e)},_msTargetRender:function(){var e=[\'<div class="BMap_Marker BMap_noprint" unselectable="on" \'];e.push(\' style="position:absolute;padding:0;margin:0;border:0;width:0;height:0;-moz-user-select:none;\');e.push(this._config.clickable?"cursor:pointer;":"");e.push("width:"+this._config.size+"px;");e.push("height:"+this._config.size+"px;");e.push(\'"></div>\');return e.join("")},draw:function(jf){if(!this.domElement){return}jf=jf||{};if(jf.currentTarget){var je=jf.currentTarget.zoomLevel;var i=jf.currentTarget.centerPoint}var T=this._getPixPos(je,i);this.showInternal();this.domElement.style.left=T.x-this._config.size/2+"px";this.domElement.style.top=T.y-this._config.size/2+"px";if(this.map.getMapType()!=="B_EARTH_MAP"&&this.map._renderType!=="webgl"){this.initialize(this.map)}if(this.infoWindow!==null&&this.infoWindow.isOpen()){this.infoWindow.setPosition(jf.center,jf.zoom)}},showInternal:function(){if(d9.prototype.showInternal.call(this)===false){return false}if(!this._visible){return false}return true},hideInternal:function(e){if(d9.prototype.hideInternal.call(this,e)===false){return false}return true},getVertexInfoForGL:function(){var e=this.point;var je=hT(e.lng);var i=hT(e.lat);var T=[];this._buildVertexForEachRender(je,i,T);return{vertex:T}},_buildVertexForEachRender:function(je,e,T){var i=gR.formatColorCssToRgbaArray(this._config.fillColor,this._config.fillOpacity,true);T.push([je[0],e[0],je[1],e[1],this._config.height,i[0]/255,i[1]/255,i[2]/255,i[3],this._config.size*fD(),this._config.shape])}});');
﻿_jsload&&_jsload('poly', 'hL.DOM_ATTRS={strokecolor:1,strokeweight:1,strokeopacity:1,fillcolor:1,fillopacity:1,strokelinecap:1,strokelinejoin:1,strokestyle:1,topfillcolor:1,topfillopacity:1,sidefillcolor:1,sidefillopacity:1};ev.extend(hL.prototype,{initialize:function(T){if(T&&this._graphMouseEvent){T.addEventListener("onmousemove",this._graphMouseEvent)}if(T&&this._graphClickEvent){T.addEventListener("onclick",this._graphClickEvent);T.addEventListener("ondblclick",this._graphClickEvent);T.addEventListener("onrightclick",this._graphClickEvent);T.addEventListener("onrightdblclick",this._graphClickEvent)}if((this._config.strokeStyle==="dashed"||this._config.strokeStyle==="dotted")&&T.getRenderType()==="webgl"&&!this._config.texture){this._generateTexture()}var e=d9.prototype.initialize.call(this,T);if(this._config.enableEditing===true&&!this._config.geodesic){var i=this;setTimeout(function(){i.clearVertexs();i.addVertexs()},0)}return e},_generateTexture:function(){var jg=this._config;var T=jg.dashArray;var jf=document.createElement("canvas");var e;var je;if(jg.strokeStyle==="dashed"){e=16;je=e*8}else{if(jg.strokeStyle==="dotted"){e=32;je=e*2}}jf.width=e;jf.height=je;var i=jf.getContext("2d");i.fillStyle=jg.strokeColor;i.globalAlpha=jg.strokeOpacity;if(jg.strokeStyle==="dashed"){this._drawDashArrayTexture(i,e,je)}else{if(jg.strokeStyle==="dotted"){this._drawDottedTexture(i,e,je)}}this._config.texture=jf;this._config.textureSize=[e,je]},_drawDashArrayTexture:function(jk,je,jg){var T=this._config;var ji=T.dashArray;if(!ji){jk.fillRect(0,0,je,jg/2);this._totalDashLen=T.strokeWeight*4}else{var jj=0;if(ji.length%2!==0){ji=ji.concat(ji)}for(var jf=0;jf<ji.length;jf++){jj+=ji[jf]}var e=0;for(var jf=0;jf<ji.length;jf++){var jh=ji[jf]/jj*jg;if(jf%2===0){jk.fillRect(0,e,je,jh)}e+=jh}this._totalDashLen=jj}},_drawDottedTexture:function(i,e,T){i.beginPath();i.arc(e/2,e/2,e/2,0,2*Math.PI);i.fill();i.closePath();this._totalDashLen=this._config.strokeWeight*2},_addDom:function(){if(this.map._renderType==="webgl"){return}var e=this._drawer=fm.getDrawer(this.map);this.domElement=e.addLine()},_bind:function(){var e=this.domElement;var je=this;function jg(jm,jk){var jj=jm.srcElement||jm.target;var ji=ge();var i=jm.pageX?jm.pageX:(jm.clientX+ji[1]);var jo=jm.pageY?jm.pageY:(jm.clientY+ji[0]);if(jm&&jk&&i&&jo&&jj){var jl=ev.I(jj.hashCode).map;var jn=ev.Dom.getOffset(jl.container);jk.pixel=new eO(i-jn.left,jo-jn.top);jk.point=jl.pixelToPointIn(jk.pixel);jk.latLng=jl.pixelToPoint(jk.pixel);return jk}else{return jk}}if(e&&fm.getDrawer(this.map).getType()!=="canvas"){ev.on(e,"click",function(i){je.dispatchEvent(jg(i,new fa("onclick").inherit(i)))});ev.on(e,"mousedown",function(i){je.dispatchEvent(jg(i,new fa("onmousedown").inherit(i)))});ev.on(e,"mouseup",function(i){je.dispatchEvent(jg(i,new fa("onmouseup").inherit(i)))});ev.on(e,"dblclick",function(i){je.dispatchEvent(jg(i,new fa("ondblclick").inherit(i)))})}e=null;if(!this._binded){this._binded=true;this.enableEventListen=true;this._graphMouseEvent=function(jl){if(!je.map){return}if(je.map.getMapType()==="B_EARTH_MAP"){return}if(je instanceof bp.PolylineMultipart||je instanceof bp.Marker3D){return}if(je.map.temp._draggingMarker){return}if(!je.enableEventListen){return}var ji;if(jl.overlay&&jl.overlay.toString()==="Marker"){if(!jl.overlay.keepWhenMousemoveOn){if(je._temp.ismouseout===false&&je._temp.ismouseover===true){je._temp.ismouseover=false;je._temp.ismouseout=true;ji=new fa("onmouseout");je.dispatchEvent(ji)}return}}var i=jl.point;var jk;if(je.toString()!=="Polyline"){jk=je._getInPnpoly(i)}else{jk=je._getProximity(i)}var jj=jk.dist;if(jj>=0&&jj<je._config.mouseOverTolerance){if(!je._temp.ismouseover){je._temp.ismouseover=true;je._temp.ismouseout=false;ji=new fa("onmouseover")}else{ji=new fa("onmousemove");je.map.platform.style.cursor=je.map.config.overlayMoveCursor}}else{if(!je._temp.ismouseout&&je._temp.ismouseover){je._temp.ismouseover=false;je._temp.ismouseout=true;ji=new fa("onmouseout");je.map.platform.style.cursor=je.map.config.defaultCursor}}if(ji){if(je.toString()!=="Polyline"&&ji.type==="onmousemove"&&je._temp.ismouseover===true&&(jj===0||jj>je._config.mouseOverTolerance)){ji.pixel=jl.pixel;ji.point=jl.point;ji.latLng=this.overlayPixelToPoint(jl.pixel)}else{ji.point=this.overlayPixelToPointIn(jk.pixel);ji.pixel=this.pointToPixelIn(ji.point);ji.latLng=this.overlayPixelToPoint(jk.pixel)}je.dispatchEvent(ji)}};this._graphClickEvent=function(jl){if(!je.map){return}if(je.map.getMapType()==="B_EARTH_MAP"){return}if(je instanceof bp.PolylineMultipart||je instanceof bp.Marker3D){return}if(je.map.temp._draggingMarker){return}if(!je.enableEventListen){return}var ji;var i=jl.point;var jk;if(je.toString()!=="Polyline"){jk=je._getInPnpoly(i)}else{jk=je._getProximity(i)}var jj=jk.dist;if(jj>=0&&jj<je._config.mouseOverTolerance){ji=new fa(jl.type)}if(ji){if(je.toString()!=="Polyline"&&ji.type==="onmousemove"&&je._temp.ismouseover===true&&(jj===0||jj>je._config.mouseOverTolerance)){ji.pixel=jl.pixel;ji.point=jl.point;ji.latLng=this.overlayPixelToPoint(jl.pixel)}else{ji.point=this.overlayPixelToPointIn(jk.pixel);ji.pixel=this.pointToPixelIn(ji.point);ji.latLng=this.overlayPixelToPoint(jk.pixel);if(je.toString()==="GroundOverlay"&&je.canPixelMap&&je.canPixelMap()){ji.color=je.getImagePixel(ji.point);ji.value=je.getValue(ji.color)}}je.dispatchEvent(ji)}};this.map.addEventListener("onmousemove",this._graphMouseEvent);var jf=["onclick","dblclick","onrightclick","onrightdblclick"];for(var T=0;T<jf.length;T++){var jh=jf[T];this.map.addEventListener(jh,this._graphClickEvent)}this.addEventListener("mouseover",function(i){if(!this.map){return}});this.addEventListener("mouseout",function(i){if(!this.map){return}});this.map.addEventListener("movestart",function(){je.enableEventListen=false;je._mouseEventPixels=null});this.map.addEventListener("moveend",function(){je.enableEventListen=true});this.map.addEventListener("zoomstart",function(){je.enableEventListen=false;je._mouseEventPixels=null});this.map.addEventListener("zoomend",function(){je.enableEventListen=true});this.map.on("center_changed",function(){je._mouseEventPixels=null});this.map.on("zoom_changed",function(){je._mouseEventPixels=null});this.map.on("load",function(){je._mouseEventPixels=null})}},draw:function(jf){if(!this.domElement){return}var je=this.map;if(je.getMapType()==="B_EARTH_MAP"||je._renderType==="webgl"){return}jf=jf||{};var T=this.points.slice(0);if(this.greatCirclePoints.length>0){T[0]=this.greatCirclePoints}var i=this._getDisplayPixels(T,jf.zoom,jf.center);if(this._drawer){this._drawer.setPath(this.domElement,i)}},_draw:function(){if(this.map){this.initialize(this.map);if(this.domElement){this.domElement.style.WebkitUserSelect="none"}this.draw()}},_getDisplayPixels:function(ji,jj,e){var je=this.map;var jh=[];if(ji.length==0||!this.isVisible()){return[jh]}if(je._renderType!=="webgl"&&!this.domElement){return[jh]}var T=ji;if(!this._config.enableEditing&&this._config.enableParse){T=this._simplification(ji)}var jg=[];if(ji[0] instanceof cf){var jk=this._toOverlayPixels(T,jj,e);jg.push(jk.pixels);jg.isOnBack=jk.isOnBack}else{jg.isOnBack=false;for(var jf=0;jf<T.length;jf++){var jk=this._toOverlayPixels(T[jf],jj,e);jg.push(jk.pixels);if(jk.isOnBack===true){jg.isOnBack=true}}}return jg},_toOverlayPixels:function(jj,jm,e){var T=this.map;var jk;var jl=[];var ji=T.pointToOverlayPixelIn(jj[0],{zoom:jm,center:e});jl.push(ji);if(ji.onBack){jk=true}for(var jg=1,jf=1,je=jj.length;jg<je;jg++){var jh=T.pointToOverlayPixelIn(jj[jg],{zoom:jm,center:e});if(jh.onBack){jk=true}if(!jh.equals(jl[jf-1])){jl.push(jh);jf++}}return{pixels:jl,isOnBack:jk}},getParseCacheIndex:function(e){e=Math.floor(e);if(this._config.getParseCacheIndex){return this._config.getParseCacheIndex(e)}if(e<6){return 0}if(e<10){return 1}if(e<15){return 2}return 3},getParseTolerance:function(i,e){if(e===2){e=1}i=Math.floor(i);if(this._config.getParseTolerance){return this._config.getParseTolerance(i,e)}return hL.parseTolerance[e][this.getParseCacheIndex(i)]},setPoints:function(i){this._clearCache();this.points=hL.getGraphPoints(i).slice(0);if(this.toString()==="GroundOverlay"&&this.updatePixelMc){this.updatePixelMc()}this._calcBounds();this.draw();var e=new fa("onlineupdate");e.overlay=this;this.dispatchEvent(e);if(this._visible&&this._config.enableEditing===true&&!this._config.geodesic){this.clearVertexs();this.addVertexs()}},setPointAt:function(T,e){if(!e||!this.points[T]){return}this._clearCache();this.points[T]=new cf(e.lng,e.lat);this._calcBounds();this.draw();var i=new fa("onlineupdate");i.overlay=this;this.dispatchEvent(i)},setPositionAt:function(i,e){if(!e||!this.points[i]){return}var T=ig.convertLL2MC(e);this.setPointAt(i,T);if(this._config.enableEditing===true&&!this._config.geodesic){this.clearVertexs();this.addVertexs()}},setOptions:function(i){i=i||{};var T=this.isStyleUseTexture();for(var e in i){if(i.hasOwnProperty(e)){var jf=this._config[e];var je=i[e];this._config[e]=je;if(je!==jf&&(e==="strokeColor"||e==="strokeOpacity"||e==="strokeWeight")){if(this._config.texture){this._config.texture=null}if(T){this._generateTexture()}}if(this.map){this._setDomAttribute(e.toLowerCase(),i[e])}}}},isStyleUseTexture:function(){if(!this.map){return false}if(this.map.getRenderType()!=="webgl"){return false}return this._config.strokeStyle==="dashed"||this._config.strokeStyle==="dotted"},setStrokeColor:function(e){this.setOptions({strokeColor:e})},setStrokeLineCap:function(e){if(this._config){this._config.strokeLineCap=e}this._setDomAttribute("strokelinecap",e)},setStrokeLineJoin:function(e){if(this._config){this._config.strokeLineJoin=e}this._setDomAttribute("strokelinejoin",e)},setStrokeWeight:function(e){if(e>0){this._config.strokeWeight=e;if(!this.map){return}this._setDomAttribute("strokeweight",e)}},setStrokeOpacity:function(e){if(!e||e>1||e<0){return}this._config.strokeOpacity=e;if(!this.map){return}this._setDomAttribute("strokeopacity",e)},setFillOpacity:function(e){if(e>1||e<0){return}this._config.fillOpacity=e;this._setDomAttribute("fillopacity",e)},setStrokeStyle:function(e){if(e!="solid"&&e!="dashed"&&e!="dotted"){return}this._config.strokeStyle=e;this._setDomAttribute("strokestyle",e)},setFillColor:function(e){this._config.fillColor=e||"";this._setDomAttribute("fillcolor",e)},_setDomAttribute:function(i,T){if(!hL.DOM_ATTRS[i]){return}if(this._drawer){if(T===false||T===null||typeof T==="undefined"){T=""}this._drawer.setAttribute(this.domElement,i,T,this._config)}var e=new fa("onlineupdate");e.overlay=this;this.dispatchEvent(e);if(i==="strokeweight"&&this.getStrokeStyle()==="dashed"&&fm.getDrawer(this.map)&&fm.getDrawer(this.map).getType()==="svg"){this._setDomAttribute("strokestyle","dashed")}},addVertexs:function(){var ji=this;if(ji.vertexMarkers.length){return}var jj=this.getVertexPoints();var jh;for(var jg=0,je=jj.length;jg<je;jg++){var e=jj[jg];if(e.t){if(this._config.nodeT&&this._config.nodeT instanceof iy){var T=this._config.nodeT}else{jh=w.imgPath+"nodeT.gif";var T=new iy(jh,new h8(11,11),{offset:new h8(5,5)})}}else{if(this._config.node&&this._config.node instanceof iy){var T=this._config.node}else{jh=w.imgPath+"node.gif";var T=new iy(jh,new h8(11,11),{offset:new h8(5,5)})}}var jf=new iU(e.p,{icon:T});jf.enableDragging(true);jf.addEventListener("ondragging",function(i){ji._onMarkerDragging(i)});jf.addEventListener("ondragstart",function(i){ji._onMarkerDragstart(i)});jf.addEventListener("ondragend",function(i){ji._onMarkerDragend(i)});jf.addEventListener("onmarkerdelvertex",function(i){ji._onMarkerDelVertex(i)});jf.index=jg;jf.t=e.t;this.vertexMarkers.push(jf);this.map?this.map.addOverlay(jf):""}},clearVertexs:function(){var e;while(e=this.vertexMarkers.pop()){this.map.removeOverlay(e);e=undefined}this.vertexMarkers.length=0},getVertexPoints:function(){var jg=[];for(var jf=0,T=this.points.length;jf<T;jf++){var jh=this.points[jf];jg.push({p:jh,t:0});if(jf<T-1){var e=this.points[jf+1];var je=new cf((jh.lng+e.lng)/2,(jh.lat+e.lat)/2);jg.push({p:je,t:1})}}this.vertexPoints=jg;return jg},delVertex:function(e){this.map.removeOverlay(this.vertexMarkers[e]);this.vertexPoints.splice(e,1);this.vertexMarkers.splice(e,1)},_onMarkerDragging:function(i){},_onMarkerDragstart:function(T){this._editstate=false;var i=new fa("oneditstart");i.pixel=T.pixel;i.point=T.point;i.latLng=T.latLng;i.overlay=this;this.dispatchEvent(i)},_onMarkerDragend:function(ji){this.vertexPoints.length=0;this._editstate=false;if(this._temp.dashedLine){this.map.removeOverlay(this._temp.dashedLine);delete this._temp.dashedLine}if(this._temp.preTNode){this.map.removeOverlay(this._temp.preTNode);delete this._temp.preTNode}if(this._temp.nexTNode){this.map.removeOverlay(this._temp.nexTNode);delete this._temp.nexTNode}var jh=ji.currentTarget;var jj=ji.point;var T=jh.index;var jg;if(T%2!=0){T=Math.ceil(T/2);jg=this.points.slice();var jf=this.points.length-T;var je=jg.splice(T,jf);jg[jg.length]=jj;jg=jg.concat(je)}else{T=T/2;this.points.splice(T,1,jj);if(this instanceof gB&&this.points.length-1==T){this.points.splice(0,1,jj)}jg=this.points}this.clearVertexs();this.setPoints(jg);this.addVertexs();var i=new fa("oneditend");i.pixel=ji.pixel;i.point=ji.point;i.latLng=ji.latLng;i.overlay=this;this.dispatchEvent(i);this._mouseEventPixels=null},_onMarkerDelVertex:function(jg){if(this.toString()!=="Polyline"&&this.toString()!=="Polygon"){return}if(jg.target.type===0||jg.target.t===0){var jf=[];if(this.vertexPoints.length<4&&this.toString()==="Polyline"){return}if(this.vertexPoints.length<8&&this.toString()==="Polygon"){return}if(this.toString()==="Polygon"&&(jg.target.index===0||jg.target.index===(this.vertexPoints.length-1))){this.delVertex(this.vertexPoints.length-1);this.delVertex(0)}else{this.delVertex(jg.target.index)}for(var je=0;je<this.vertexPoints.length;je++){if(this.vertexPoints[je].t===0){jf.push(this.vertexPoints[je].p)}}this.points=jf;if(this.points[0].lng===this.points[this.points.length-1].lng&&this.points[0].lat===this.points[this.points.length-1].lat){this.points.splice(this.points.length-1,1)}this.clearVertexs();this.setPoints(this.points);this.addVertexs();var T=new fa("oneditend");T.pixel=jg.pixel;T.point=jg.point;T.latLng=jg.latLng;T.overlay=this;this.dispatchEvent(T);this._mouseEventPixels=null}},_getInPnpoly:function(T){var je;var ji=[];var e=this.map.pointToOverlayPixelIn(T);if(this._mouseEventPixels){ji=this._mouseEventPixels}else{if(!(this.points[0] instanceof cf)){var jh=this._getDisplayPixels(this.points);for(var jg=0;jg<jh.length;jg++){jh[jg].push(jh[jg][0]);ji=ji.concat(jh[jg])}}else{ji=this._getDisplayPixels(this.points)[0]}this._mouseEventPixels=ji}var jf=this._pixelPnpoly(e,ji);je=jf?0:1000;return{pixel:e,dist:je}},_getProximity:function(jp){var T,jf,jq,ji,jh,jo,jn,jm=[];var jr=this.map.pointToOverlayPixelIn(jp);if(this._mouseEventPixels){jm=this._mouseEventPixels}else{jm=this._getDisplayPixels(this.points)[0];this._mouseEventPixels=jm}var ju=jm.length;if(ju>1){for(var js=1;js<ju;js++){var jk=jm[js-1];var jy=jm[js];if(!jk||!jy){continue}if(jk.x!=jy.x){var jx=(jy.y-jk.y)/(jy.x-jk.x);var jv=jy.y-jx*jy.x;jn=Math.abs(jx*jr.x+jv-jr.y)/Math.sqrt(jx*jx+1)}else{jn=Math.abs(jr.x-jy.x)}var jt=Math.pow(jy.y-jk.y,2)+Math.pow(jy.x-jk.x,2);var je=Math.pow(jy.y-jr.y,2)+Math.pow(jy.x-jr.x,2);var jw=Math.pow(jk.y-jr.y,2)+Math.pow(jk.x-jr.x,2);var jg=Math.pow(jn,2);var e=je-jg+jw-jg;if(e>jt){jn=Math.sqrt(Math.min(je,jw))}if((T==null)||(T>jn)){jf=Math.sqrt(jw-jg)/Math.sqrt(jt);jq=Math.sqrt(je-jg)/Math.sqrt(jt);T=jn;jo=js}T=Math.min(T,jn)}if(jf>1){jf=1}if(jq>1){jf=0;jq=1}var jl=jm[jo-1].x-jm[jo].x;var jj=jm[jo-1].y-jm[jo].y;ji=jm[jo-1].x-(jl*jf);jh=jm[jo-1].y-(jj*jf)}return{pixel:new eO(ji,jh),dist:T}},_pixelPnpoly:function(jf,jh){var e=jh.length;var T=0;var jg=false;for(var je=0;je<e;je++){T=(je===e-1)?0:T+1;if((jh[je].y!==jh[T].y)&&(((jf.y>=jh[je].y)&&(jf.y<jh[T].y))||((jf.y>=jh[T].y)&&(jf.y<jh[je].y)))&&(jf.x<(jh[T].x-jh[je].x)*(jf.y-jh[je].y)/(jh[T].y-jh[je].y)+jh[je].x)){jg=!jg}}return jg},getMinDistance:function(i){var e=this._getProximity(i);var T=this.map.overlayPixelToPointIn(e.pixel);return this.map.getDistanceIn(i,T)},buildVertex:function(jf,jl){var ji=[];var jm=[];var jo=this.points.slice(0);var jp=[];if(this.greatCirclePoints.length>0){jo[0]=this.greatCirclePoints}var T=hL.JOININDEX[this._config.strokeLineJoin];var jn=hL.CAPINDEX[this._config.strokeLineCap];var je=this.getStrokeColorForGL();var e=this._config.strokeWeight/2;var jh=this.map.getZoom();if(jo.length>500&&jo[0] instanceof cf){if(!jl&&this._lastResult){return this._lastResult}var jk=this._getDisplayPixelsGLWithCut(jo);for(var jg=0;jg<jk.length;jg++){if(jk[jg].length<2){continue}if(ji.length/6+jf.getVertexCount(jk[jg].length)>65536){jp.push([ji,jm]);ji=[];jm=[]}jf.buildData(jk[jg],T,jn,ji,jm,je,e)}jp.push([ji,jm]);jp.inCache=false;this._lastResult=jp;return jp}var jj=this.getParseCacheIndex(this.map.getZoom());if(jl!==true&&this._parseCacheGL[jj]){this._parseCacheGL[jj].inCache=true;return this._parseCacheGL[jj]}var jk=this._getDisplayPixelsGL(jo);for(var jg=0;jg<jk.length;jg++){if(jk[jg].length<2){continue}if(ji.length/6+jf.getVertexCount(jk[jg].length)>65536){jp.push([ji,jm]);ji=[];jm=[]}jf.buildData(jk[jg],T,jn,ji,jm,je,e)}jp.push([ji,jm]);this._parseCacheGL[jj]=jp;this._parseCacheGL[jj].cacheIndex=jj;return jp},ifInMapView:function(){if(!this.map){return false}if(this.map.getZoom()<5){return true}if(this._config.clip===false){return true}var e=this.map.getBoundsIn();return !!e.intersects(this.getBoundsIn())},_getDisplayPixelsGLWithCut:function(e){return this._getDisplayPixelsGL(e)},_getDisplayPixelsGL:function(je){var jg=this.map;var jf=[];var ji=[];jf.pointsArray=ji;if(je.length==0||!this.isVisible()){return[jf]}var jh=je;if(!this._config.enableEditing&&this._config.enableParse){jh=this._simplification(je)}var T=[];if(!this.hasMultipleParts){T[0]=this._toOverlayPixelsGL(jh)}else{for(var e=0;e<jh.length;e++){T.push(this._toOverlayPixelsGL(jh[e]))}}return T},_toOverlayPixelsGL:function(jl){var T=this.map;var jk=[];var jh=[];jk.pointsArray=jh;var e=T._polyOverlayBasePoint;var jj=[jl[0].lng-e.lng,jl[0].lat-e.lat];jk.push(jj);jh.push(jj[0],jj[1]);for(var jg=1,jf=1,je=jl.length;jg<je;jg++){var ji=[jl[jg].lng-e.lng,jl[jg].lat-e.lat];if(ji[0]!==jk[jf-1][0]||ji[1]!==jk[jf-1][1]){jk.push(ji);jh.push(ji[0],ji[1]);jf++}}return jk},getStrokeColorForGL:function(){var i=this._config.strokeOpacity;var e;e=gR.formatColorCssToRgbaArray(this._config.strokeColor,i,false);return e},show:function(){d9.prototype.show.call(this);var e=new fa("onlineupdate");e.action="show";e.overlay=this;this.dispatchEvent(e);if(this.map.getMapType()==="B_EARTH_MAP"||this.map._renderType==="webgl"){this._draw()}else{this.draw()}this._mouseEventPixels=null;if(this._config.enableEditing===true&&!this._config.geodesic){this.addVertexs()}if(this._areaCacheGL){var i=this.getParseCacheIndex(this.map.getZoom());if(this._areaCacheGL[i]){this._areaCacheGL[i]=null}this.map._overlayMgrGL._updateGraphRenderData(this,true)}},hide:function(){d9.prototype.hide.call(this);var e=new fa("onlineupdate");e.action="hide";e.overlay=this;this.dispatchEvent(e);this._mouseEventPixels=null;if(this._config.enableEditing===true&&!this._config.geodesic){this.clearVertexs()}},remove:function(){if(this.map){this.map.removeEventListener("onmousemove",this._graphMouseEvent);this.map.removeEventListener("onclick",this._graphClickEvent);this.map.removeEventListener("ondblclick",this._graphClickEvent);this.map.removeEventListener("onrightclick",this._graphClickEvent);this.map.removeEventListener("onrightdblclick",this._graphClickEvent)}d9.prototype.remove.call(this);this._clearCache();var e=new fa("onlineupdate");e.action="remove";e.overlay=this;this.fire(e);if(this._config.enableEditing===true&&!this._config.geodesic){this.clearVertexs()}}});function bi(jg,je,jn){var jk=false,ji=false,jl=false,jp=new eO(jg.x,jg.y),jo=new eO(je.x,je.y),jf=fb(jp,jn),T=fb(jo,jn),jm;var jr,jq;var jj=jn.minX,jh=jn.minY,i=jn.maxX,e=jn.maxY;do{if(jf.all==0&&T.all==0){jk=true;jl=true}else{if((jf.all&T.all)!=0){jl=true}else{if(jf.all!=0){jm=jf}else{jm=T}if(jm.top){jr=jp.x+(jo.x-jp.x)*(jh-jp.y)/(jo.y-jp.y);jq=jh}else{if(jm.bottom){jr=jp.x+(jo.x-jp.x)*(e-jp.y)/(jo.y-jp.y);jq=e}else{if(jm.right){jq=jp.y+(jo.y-jp.y)*(i-jp.x)/(jo.x-jp.x);jr=i}else{if(jm.left){jq=jp.y+(jo.y-jp.y)*(jj-jp.x)/(jo.x-jp.x);jr=jj}}}}ji=true;if(jm.all==jf.all){jp.x=Math.round(jr);jp.y=Math.round(jq);jf=fb(jp,jn)}else{jo.x=Math.round(jr);jo.y=Math.round(jq);T=fb(jo,jn)}}}}while(!jl);if(jk){return{pixel0:new eO(jp.x,jp.y),pixel1:new eO(jo.x,jo.y),clip:ji?true:false}}}function fb(i,jf){var T={top:0,bottom:0,right:0,left:0,all:0};var e=i.x,je=i.y;if(je<jf.minY){T.top=8;T.all+=T.top}else{if(je>jf.maxY){T.bottom=4;T.all+=T.bottom}}if(e>jf.maxX){T.right=2;T.all+=T.right}else{if(e<jf.minX){T.left=1;T.all+=T.left}}return T}ev.extend(fl.prototype,{initialize:function(i){hL.prototype.initialize.call(this,i);var e=this._config;this.setOptions({fillColor:"",strokeColor:e.strokeColor,strokeWeight:e.strokeWeight,strokeStyle:e.strokeStyle,strokeLineCap:e.strokeLineCap,strokeLineJoin:e.strokeLineJoin,strokeOpacity:e.strokeOpacity});return this.domElement},setPoints:function(je){this._clearCache();this.points=hL.getGraphPoints(je).slice(0);if(this._config.geodesic===true){this.greatCirclePoints.length=0;for(var T=0;T<this.points.length-1;T++){this.calcGreatCirclePoints(this.points[T],this.points[T+1])}}this._calcBounds();this.draw();var e=new fa("onlineupdate");e.overlay=this;this.dispatchEvent(e)},_getDisplayPixels:function(jr,e,jw){var jx=this.map;var jg=[];if(jr.length===0||!this.isVisible()){return[jg]}if(jx._renderType!=="webgl"&&!this.domElement){return[jg]}if(!((ev.Platform.ipad||ev.Platform.iphone||ev.Platform.android)&&jr.length>5000)&&!this._config.enableEditing){var jh=this.getParseCacheIndex(jx.getZoom());if(this._parseCache[jh]){jr=this._parseCache[jh]}else{var jj=jx.config.coordType===2?1:jx.config.coordType;var T=ds(jr,this.getParseTolerance(jx.getZoom(),jj));jr=this._parseCache[jh]=T}}var jv;var jy=jx.pointToOverlayPixelIn(jr[0],{zoom:e,center:jw});jg.push(jy);if(jy.onBack){jv=true}for(var js=1,jp=1,jo=jr.length;js<jo;js++){var jf=jx.pointToOverlayPixelIn(jr[js],{zoom:e,center:jw});if(jf.onBack){jv=true}if(!jf.equals(jg[jp-1])){jg.push(jf);jp++}}var ju=[];var jm=Math.round(jx.offsetX);var jl=Math.round(jx.offsetY);if(jx._renderType==="webgl"){jm=jl=0}var jk=jx.config.drawMargin;var ji={minX:-jm-jk,minY:-jl-jk,maxX:-jm+jk+jx.width,maxY:-jl+jk+jx.height};for(js=0,jo=jg.length-1;js<jo;js++){var jt=jg[js];var jq=jg[js+1];var je=bi(jt,jq,ji);if(je){ju.push(je)}}var jn=[[]];for(js=0,jo=ju.length;js<jo;js++){if(ju[js].clip){jn[jn.length-1].push(ju[js].pixel0);jn[jn.length-1].push(ju[js].pixel1);if(ju[js+1]&&ju[js+1].clip){jn.push([])}}else{jn[jn.length-1].push(ju[js].pixel0);if(js===ju.length-1){jn[jn.length-1].push(ju[js].pixel1)}}}jn.isOnBack=jv;return jn},_getDisplayPixelsGLWithCut:function(jp){var ju=this.map;var jg=[];if(jp.length===0||!this.isVisible()){return[jg]}if(!this._config.enableEditing){var jh=this.getParseCacheIndex(ju.getZoom());if(this._parseCache[jh]){jp=this._parseCache[jh]}else{var jj=ju.config.coordType===2?1:ju.config.coordType;var T=ds(jp,this.getParseTolerance(ju.getZoom(),jj));jp=this._parseCache[jh]=T}}var jv=ju._polyOverlayBasePoint;var e=ju.getZoomUnits();if(this._parseCacheGLRaw[jh]){jg=this._parseCacheGLRaw[jh]}else{var jw=new eO(jp[0].lng-jv.lng,jp[0].lat-jv.lat);jg.push(jw);for(var jq=1,jn=1,jm=jp.length;jq<jm;jq++){var jf=new eO(jp[jq].lng-jv.lng,jp[jq].lat-jv.lat);if(!jf.equals(jg[jn-1])){jg.push(jf);jn++}}this._parseCacheGLRaw[jh]=jg}var jt=ju.pixelToPointIn(new eO(0,ju.height));var js=[];var jk=ju.config.drawMarginGL;var ji={minX:Math.round(-jk*e+(jt.lng-jv.lng)),minY:Math.round(-jk*e+(jt.lat-jv.lat)),maxX:Math.round((jk+ju.width)*e+(jt.lng-jv.lng)),maxY:Math.round((jk+ju.height)*e+(jt.lat-jv.lat))};for(jq=0,jm=jg.length-1;jq<jm;jq++){var jr=jg[jq];var jo=jg[jq+1];var je=bi(jr,jo,ji);if(je){js.push(je)}}var jl=[[]];for(jq=0,jm=js.length;jq<jm;jq++){if(js[jq].clip){jl[jl.length-1].push([js[jq].pixel0.x,js[jq].pixel0.y]);jl[jl.length-1].push([js[jq].pixel1.x,js[jq].pixel1.y]);if(js[jq+1]&&js[jq+1].clip){jl.push([])}}else{jl[jl.length-1].push([js[jq].pixel0.x,js[jq].pixel0.y]);if(jq===js.length-1){jl[jl.length-1].push([js[jq].pixel1.x,js[jq].pixel1.y])}}}return jl},_getDisplayPixelsGL:function(jl){var T=this.map;var jk=[];if(jl.length===0||!this.isVisible()){return[jk]}if(this.greatCirclePoints.length>0){jl=this.greatCirclePoints}if(!this._config.enableEditing){var jj=this.getParseCacheIndex(T.getZoom());if(this._parseCache[jj]){jl=this._parseCache[jj]}else{var jh=T.config.coordType===2?1:T.config.coordType;var jm=ds(jl,this.getParseTolerance(T.getZoom(),jh));jl=this._parseCache[jj]=jm}}var e=T._polyOverlayBasePoint;jk.push([jl[0].lng-e.lng,jl[0].lat-e.lat]);for(var jg=1,jf=1,je=jl.length;jg<je;jg++){var ji=[jl[jg].lng-e.lng,jl[jg].lat-e.lat];if(ji[0]!==jk[jf-1][0]||ji[1]!==jk[jf-1][1]){jk.push(ji);jf++}}jk=[jk];this._addMultipleDrawPath(jk);return jk},_addMultipleDrawPath:function(T,jg,i){if(this._config.clip===true){return}var jf=this.map;jg=jg||jf.getZoom();if(jg>12&&jf.getRenderType()!=="webgl"){return}var e=i?jf.worldSize(jg):g0.WORLD_SIZE_MC;var je=T.slice(0);ev.each(je,function(jh){var ji=[];ev.each(jh,function(jj){if(jj.x){ji.push(new eO(jj.x-e,jj.y))}else{ji.push([jj[0]-e,jj[1]])}});T.push(ji)});ev.each(je,function(jh){var ji=[];ev.each(jh,function(jj){if(jj.x){ji.push(new eO(jj.x+e,jj.y))}else{ji.push([jj[0]+e,jj[1]])}});T.push(ji)})},getParsedPoints:function(){var jh=this.map;var i=this.points;var e=[];var T=this;var jg=i.slice(0);jg=[jg];if(this.greatCirclePoints.length>0){jg=[];jg[0]=this.greatCirclePoints}ev.each(jg,function(jk){var jj=jh.config.coordType===2?1:jh.config.coordType;var ji=ds(jk,T.getParseTolerance(jh.getZoom(),jj));e.push(ji)});var jf=0;if(this._bounds.sw.lng<-g0.WORLD_SIZE_MC_HALF){jf=g0.WORLD_SIZE_MC}if(this._bounds.ne.lng>g0.WORLD_SIZE_MC_HALF){jf=-g0.WORLD_SIZE_MC}if(jf===0){return e}var je=e.slice(0);ev.each(je,function(ji){var jj=[];ev.each(ji,function(jk){jj.push(new cf(jk.lng+jf,jk.lat))});e.push(jj)});return e},_onMarkerDragging:function(jk){this._editstate=true;var T=jk.currentTarget;var jm=jk.point;var jl=T.index;var i=this.vertexPoints;var jn;var ji=null;var je=null;if(jl===0){var jj=i[jl+2].p;jn=[jm,jj];ji=new cf((jj.lng+jm.lng)/2,(jj.lat+jm.lat)/2);if(this.vertexMarkers[jl+1]){this.vertexMarkers[jl+1].hide()}}else{if(jl===i.length-1){var jh=i[jl-2].p;jn=[jh,jm];ji=new cf((jh.lng+jm.lng)/2,(jh.lat+jm.lat)/2);if(this.vertexMarkers[jl-1]){this.vertexMarkers[jl-1].hide()}}else{var jh=i[jl-1].p;var jj=i[jl+1].p;jn=[jh,jm,jj];if(!T.t){jh=i[jl-2].p;jj=i[jl+2].p;jn=[jh,jm,jj];ji=new cf((jh.lng+jm.lng)/2,(jh.lat+jm.lat)/2);je=new cf((jj.lng+jm.lng)/2,(jj.lat+jm.lat)/2);if(this.vertexMarkers[jl-1]){this.vertexMarkers[jl-1].hide()}if(this.vertexMarkers[jl+1]){this.vertexMarkers[jl+1].hide()}}}}if(!this._temp.dashedLine){var jg=new fl(jn,{strokeStyle:"dashed",strokeColor:this._config.strokeColor,strokeWeight:this._config.strokeWeight,strokeOpacity:this._config.strokeOpacity});this.map.addOverlay(jg);jg.hide();this._temp.dashedLine=jg}else{this._temp.dashedLine.setPoints(jn);this._temp.dashedLine.show()}if(this._config.nodeT&&this._config.nodeT instanceof iy){var jf=this._config.nodeT}else{var jf=new iy(w.imgPath+"nodeT.gif",new h8(11,11),{offset:new h8(5,5)})}if(!this._temp.preTNode&&ji){this._temp.preTNode=new iU(ji,{icon:jf});this.map.addOverlay(this._temp.preTNode)}else{if(ji){this._temp.preTNode.setPoint(ji)}}if(!this._temp.nexTNode&&je){this._temp.nexTNode=new iU(je,{icon:jf});this.map.addOverlay(this._temp.nexTNode)}else{if(je){this._temp.nexTNode.setPoint(je)}}}});ev.extend(gb.prototype,{initialize:function(i){hL.prototype.initialize.call(this,i);var e=this._config;this.setOptions({fillColor:"",strokeColor:e.strokeColor,strokeWeight:e.strokeWeight,strokeStyle:e.strokeStyle,strokeLineCap:e.strokeLineCap,strokeLineJoin:e.strokeLineJoin,strokeOpacity:e.strokeOpacity});return this.domElement},setPoints:function(i){this._clearCache();this.points=hL.getGraphPoints(i).slice(0);this.points=this.calcBezierPoints(this.points,this._cps);this._calcBounds();this.draw();var e=new fa("onlineupdate");e.overlay=this;this.dispatchEvent(e)},_getDisplayPixels:function(jr,e,jw){var jx=this.map;var jg=[];if(jr.length===0||!this.isVisible()){return[jg]}if(jx._renderType!=="webgl"&&!this.domElement){return[jg]}if(!((ev.Platform.ipad||ev.Platform.iphone||ev.Platform.android)&&jr.length>5000)&&!this._config.enableEditing){var jh=this.getParseCacheIndex(jx.getZoom());if(this._parseCache[jh]){jr=this._parseCache[jh]}else{var jj=jx.config.coordType===2?1:jx.config.coordType;var T=ds(jr,this.getParseTolerance(jx.getZoom(),jj));jr=this._parseCache[jh]=T}}var jv;var jy=jx.pointToOverlayPixelIn(jr[0],{zoom:e,center:jw});jg.push(jy);if(jy.onBack){jv=true}for(var js=1,jp=1,jo=jr.length;js<jo;js++){var jf=jx.pointToOverlayPixelIn(jr[js],{zoom:e,center:jw});if(jf.onBack){jv=true}if(!jf.equals(jg[jp-1])){jg.push(jf);jp++}}var ju=[];var jm=Math.round(jx.offsetX);var jl=Math.round(jx.offsetY);if(jx._renderType==="webgl"){jm=jl=0}var jk=jx.config.drawMargin;var ji={minX:-jm-jk,minY:-jl-jk,maxX:-jm+jk+jx.width,maxY:-jl+jk+jx.height};for(js=0,jo=jg.length-1;js<jo;js++){var jt=jg[js];var jq=jg[js+1];var je=bi(jt,jq,ji);if(je){ju.push(je)}}var jn=[[]];for(js=0,jo=ju.length;js<jo;js++){if(ju[js].clip){jn[jn.length-1].push(ju[js].pixel0);jn[jn.length-1].push(ju[js].pixel1);if(ju[js+1]&&ju[js+1].clip){jn.push([])}}else{jn[jn.length-1].push(ju[js].pixel0);if(js===ju.length-1){jn[jn.length-1].push(ju[js].pixel1)}}}jn.isOnBack=jv;return jn},_getDisplayPixelsGLWithCut:function(jp){var ju=this.map;var jg=[];if(jp.length===0||!this.isVisible()){return[jg]}if(!this._config.enableEditing){var jh=this.getParseCacheIndex(ju.getZoom());if(this._parseCache[jh]){jp=this._parseCache[jh]}else{var jj=ju.config.coordType===2?1:ju.config.coordType;var T=ds(jp,this.getParseTolerance(ju.getZoom(),jj));jp=this._parseCache[jh]=T}}var jv=ju._polyOverlayBasePoint;var e=ju.getZoomUnits();if(this._parseCacheGLRaw[jh]){jg=this._parseCacheGLRaw[jh]}else{var jw=new eO(jp[0].lng-jv.lng,jp[0].lat-jv.lat);jg.push(jw);for(var jq=1,jn=1,jm=jp.length;jq<jm;jq++){var jf=new eO(jp[jq].lng-jv.lng,jp[jq].lat-jv.lat);if(!jf.equals(jg[jn-1])){jg.push(jf);jn++}}this._parseCacheGLRaw[jh]=jg}var jt=ju.pixelToPointIn(new eO(0,ju.height));var js=[];var jk=ju.config.drawMarginGL;var ji={minX:Math.round(-jk*e+(jt.lng-jv.lng)),minY:Math.round(-jk*e+(jt.lat-jv.lat)),maxX:Math.round((jk+ju.width)*e+(jt.lng-jv.lng)),maxY:Math.round((jk+ju.height)*e+(jt.lat-jv.lat))};for(jq=0,jm=jg.length-1;jq<jm;jq++){var jr=jg[jq];var jo=jg[jq+1];var je=bi(jr,jo,ji);if(je){js.push(je)}}var jl=[[]];for(jq=0,jm=js.length;jq<jm;jq++){if(js[jq].clip){jl[jl.length-1].push([js[jq].pixel0.x,js[jq].pixel0.y]);jl[jl.length-1].push([js[jq].pixel1.x,js[jq].pixel1.y]);if(js[jq+1]&&js[jq+1].clip){jl.push([])}}else{jl[jl.length-1].push([js[jq].pixel0.x,js[jq].pixel0.y]);if(jq===js.length-1){jl[jl.length-1].push([js[jq].pixel1.x,js[jq].pixel1.y])}}}return jl},_getDisplayPixelsGL:function(jl){var T=this.map;var jk=[];if(jl.length===0||!this.isVisible()){return[jk]}if(this.greatCirclePoints.length>0){jl=this.greatCirclePoints}if(!this._config.enableEditing){var jj=this.getParseCacheIndex(T.getZoom());if(this._parseCache[jj]){jl=this._parseCache[jj]}else{var jh=T.config.coordType===2?1:T.config.coordType;var jm=ds(jl,this.getParseTolerance(T.getZoom(),jh));jl=this._parseCache[jj]=jm}}var e=T._polyOverlayBasePoint;jk.push([jl[0].lng-e.lng,jl[0].lat-e.lat]);for(var jg=1,jf=1,je=jl.length;jg<je;jg++){var ji=[jl[jg].lng-e.lng,jl[jg].lat-e.lat];if(ji[0]!==jk[jf-1][0]||ji[1]!==jk[jf-1][1]){jk.push(ji);jf++}}jk=[jk];this._addMultipleDrawPath(jk);return jk},_addMultipleDrawPath:function(T,jg,i){if(this._config.clip===true){return}var jf=this.map;jg=jg||jf.getZoom();if(jg>12&&jf.getRenderType()!=="webgl"){return}var e=i?jf.worldSize(jg):g0.WORLD_SIZE_MC;var je=T.slice(0);ev.each(je,function(jh){var ji=[];ev.each(jh,function(jj){if(jj.x){ji.push(new eO(jj.x-e,jj.y))}else{ji.push([jj[0]-e,jj[1]])}});T.push(ji)});ev.each(je,function(jh){var ji=[];ev.each(jh,function(jj){if(jj.x){ji.push(new eO(jj.x+e,jj.y))}else{ji.push([jj[0]+e,jj[1]])}});T.push(ji)})},});ev.extend(b3.prototype,{initialize:function(T){hL.prototype.initialize.call(this,T);var i=this._config;var e={paths:i.path,isBuildingMask:i.isBuildingMask,isPoiMask:i.isPoiMask,isMapMask:i.isMapMask,showRegion:i.showRegion};T.stencil=T.stencil?Object.assign(T.stencil,e):e;return this.domElement},getFillStyleForGL:function(){var e=this._config.fillOpacity;var i=gR.formatColorCssToRgbaArray(this._config.fillColor,e);this._fillStyleInfoForGL=i.join(",");return this._fillStyleInfoForGL},buildFillVertex:function(jh){var jl=[];var jj=this.getParseCacheIndex(this.map.getZoom());if(this._areaCacheGL[jj]){return this._areaCacheGL[jj]}var jk=this._getDisplayPixelsGL(this.points);if(jk.pointsArray&&jk.pointsArray.length<3){this._areaCacheGL[jj]=[[],jl];return this._areaCacheGL[jj]}var jf;var jg=[];var je=0;for(var T=0;T<jk.length;T++){if(T>0){je+=jk[T-1].length}jf=jh(jk[T].pointsArray,null,null,je);for(var e=0,ji=jf.length;e<ji;e+=3){jl.push(jf[e],jf[e+1],jf[e+2])}jg=jg.concat(jk[T].pointsArray)}var jm=[new Float32Array(jg),new Uint16Array(jl)];this._areaCacheGL[jj]=jm;return jm}});ev.extend(dT.prototype,{setPoints:function(e){if(!e){return}this._clearCache();this.points=this._unifyArgs(e);if(this._config.geodesic===true){this.calcGreatCirclePoints(ig.convertMC2LL(this.points[0][0]),ig.convertMC2LL(this.points[0][1]))}this._calcBounds()},_getDisplayPixels:function(e,jh,je){var jg=this.map;var T=[];var i=this;var jf=e.slice(0);if(this.greatCirclePoints.length>0){jf[0]=this.greatCirclePoints}ev.each(jf,function(jj,ji){var jk=i._getEachDisplayPixels(jj,ji,jh,je);ev.each(jk,function(jl){T.push(jl)})});this._addMultipleDrawPath(T,jh,true);return T},_addMultipleDrawPath:function(T,jg,i){if(this._config.clip===true){return}var jf=this.map;jg=jg||jf.getZoom();if(jg>12&&jf.getRenderType()!=="webgl"){return}var e=i?jf.worldSize(jg):g0.WORLD_SIZE_MC;var je=T.slice(0);ev.each(je,function(jh){var ji=[];ev.each(jh,function(jj){if(jj.x){ji.push(new eO(jj.x-e,jj.y))}else{ji.push([jj[0]-e,jj[1]])}});T.push(ji)});ev.each(je,function(jh){var ji=[];ev.each(jh,function(jj){if(jj.x){ji.push(new eO(jj.x+e,jj.y))}else{ji.push([jj[0]+e,jj[1]])}});T.push(ji)})},_getDisplayPixelsGL:function(e){var T=[];var i=this;var je=e.slice(0);if(this.greatCirclePoints.length>0){je[0]=this.greatCirclePoints}ev.each(je,function(jg,jf){var jh=i._getEachDisplayPixelsGL(jg,jf);ev.each(jh,function(ji){T.push(ji)})});this._addMultipleDrawPath(T);return T},_getEachDisplayPixels:function(jo,ji,jh,jl){var e=this.map;var jn=[];if(jo.length===0||!this.domElement||!this.isVisible()){return[jn]}jo=this._simplification(jo,ji);var jm;var jk=e.pointToOverlayPixelIn(jo[0],{zoom:jh,center:jl});jn.push(jk);if(jk.onBack){jm=true}for(var jg=1,je=1,T=jo.length;jg<T;jg++){var jj=e.pointToOverlayPixelIn(jo[jg],{zoom:jh,center:jl});if(jj.onBack){jm=true}if(!jj.equals(jn[je-1])){jn.push(jj);je++}}if(e.getZoom()<5||this._config.clip===false){return[jn]}var jf=this._clipLine(jn);jf.isOnBack=jm;return jf},_simplification:function(je,T){if(this._config.enableEditing){return je}var jg=this.map;var jf=this.getParseCacheIndex(jg.getZoom());if(this._parseCache[jf]&&this._parseCache[jf][T]){return this._parseCache[jf][T]}else{var i=jg.config.coordType===2?1:jg.config.coordType;var e=ds(je,this.getParseTolerance(jg.getZoom(),i));if(!this._parseCache[jf]){this._parseCache[jf]=[]}this._parseCache[jf][T]=e;return e}},_clipLine:function(je){var e=this.map;var jk=[];var jn=Math.round(e.offsetX);var jm=Math.round(e.offsetY);var jo=e.config.drawMargin;var jg={minX:-jn-jo,minY:-jm-jo,maxX:-jn+jo+e.width,maxY:-jm+jo+e.height};for(var jh=0,T=je.length-1;jh<T;jh++){var jj=je[jh];var ji=je[jh+1];var jl=bi(jj,ji,jg);if(jl){jk.push(jl)}}var jf=[[]];for(var jh=0,T=jk.length;jh<T;jh++){if(jk[jh].clip){jf[jf.length-1].push(jk[jh].pixel0);jf[jf.length-1].push(jk[jh].pixel1);if(jk[jh+1]&&jk[jh+1].clip){jf.push([])}}else{jf[jf.length-1].push(jk[jh].pixel0);if(jh===jk.length-1){jf[jf.length-1].push(jk[jh].pixel1)}}}return jf},_getEachDisplayPixelsGL:function(jk,jh){var T=this.map;var jj=[];if(jk.length===0||!this.isVisible()){return[jj]}jk=this._simplification(jk,jh);if(this._config.clip===true){return this._clipLineGL(jk,jh)}var e=T._polyOverlayBasePoint;jj.push([jk[0].lng-e.lng,jk[0].lat-e.lat]);for(var jg=1,jf=1,je=jk.length;jg<je;jg++){var ji=[jk[jg].lng-e.lng,jk[jg].lat-e.lat];if(ji[0]!==jj[jf-1][0]||ji[1]!==jj[jf-1][1]){jj.push(ji);jf++}}return[jj]},_clipLineGL:function(jo,jh){var jt=this.map;var jg=this.getParseCacheIndex(jt.getZoom());var ju=jt._polyOverlayBasePoint;var jf=[];if(this._parseCacheGLRaw[jg]&&this._parseCacheGLRaw[jg][jh]){jf=this._parseCacheGLRaw[jg][jh]}else{var jv=new eO(jo[0].lng-ju.lng,jo[0].lat-ju.lat);jf.push(jv);for(var jp=1,jm=1,jl=jo.length;jp<jl;jp++){var je=new eO(jo[jp].lng-ju.lng,jo[jp].lat-ju.lat);if(!je.equals(jf[jm-1])){jf.push(je);jm++}}if(!this._parseCacheGLRaw[jg]){this._parseCacheGLRaw[jg]=[]}this._parseCacheGLRaw[jg][jh]=jf}var e=jt.getZoomUnits();var js=jt.pixelToPointIn(new eO(0,jt.height));var jr=[];var jj=jt.config.drawMarginGL;var ji={minX:Math.round(-jj*e+(js.lng-ju.lng)),minY:Math.round(-jj*e+(js.lat-ju.lat)),maxX:Math.round((jj+jt.width)*e+(js.lng-ju.lng)),maxY:Math.round((jj+jt.height)*e+(js.lat-ju.lat))};for(jp=0,jl=jf.length-1;jp<jl;jp++){var jq=jf[jp];var jn=jf[jp+1];var T=bi(jq,jn,ji);if(T){jr.push(T)}}var jk=[[]];for(jp=0,jl=jr.length;jp<jl;jp++){if(jr[jp].clip){jk[jk.length-1].push([jr[jp].pixel0.x,jr[jp].pixel0.y]);jk[jk.length-1].push([jr[jp].pixel1.x,jr[jp].pixel1.y]);if(jr[jp+1]&&jr[jp+1].clip){jk.push([])}}else{jk[jk.length-1].push([jr[jp].pixel0.x,jr[jp].pixel0.y]);if(jp===jr.length-1){jk[jk.length-1].push([jr[jp].pixel1.x,jr[jp].pixel1.y])}}}return jk},getParsedPoints:function(){var jh=this.map;var i=this.points;var e=[];var T=this;var jg=i.slice(0);if(this.greatCirclePoints.length>0){jg[0]=this.greatCirclePoints}ev.each(jg,function(jk){var jj=jh.config.coordType===2?1:jh.config.coordType;var ji=ds(jk,T.getParseTolerance(jh.getZoom(),jj));e.push(ji)});var jf=0;if(this._bounds.sw.lng<-g0.WORLD_SIZE_MC_HALF){jf=g0.WORLD_SIZE_MC}if(this._bounds.ne.lng>g0.WORLD_SIZE_MC_HALF){jf=-g0.WORLD_SIZE_MC}if(jf===0){return e}var je=e.slice(0);ev.each(je,function(ji){var jj=[];ev.each(ji,function(jk){jj.push(new cf(jk.lng+jf,jk.lat))});e.push(jj)});console.log(e);return e},setPointAt:function(T,e,je){je=je||0;if(!e||!this.points[je][T]||!this.points[je][T]){return}this._clearCache();this.points[je][T]=new cf(e.lng,e.lat);if(this._config.geodesic===true){this.calcGreatCirclePoints(ig.convertMC2LL(this.points[je][0]),ig.convertMC2LL(this.points[je][1]))}this._calcBounds();this.draw();var i=new fa("onlineupdate");i.overlay=this;this.dispatchEvent(i)},calcGreatCirclePoints:function(je,T){if(je.equals(T)){return}var e=ig.getDistance(hM(je.lng),hM(je.lat),hM(T.lng),hM(T.lat));if(e<250000){return}this.greatCirclePoints.length=0;var ji=Math.round(e/150000);var jm=this.calcAngularDistance(je,T);this.greatCirclePoints.push(this.points[0][0]);var jl=je.lng;var jk=this.points[0][0];for(var jf=0;jf<ji;jf++){var jh=this.calcMiddlePoint(je,T,jf/ji,jm);var jj=ig.convertLL2MC(jh);var jg=jj.lng;var jn=dZ(jj,jk);if(jn>30037726){if(jj.lng<jk.lng){jj.lng+=g0.WORLD_SIZE_MC}else{jj.lng-=g0.WORLD_SIZE_MC}}this.greatCirclePoints.push(jj);jk=jj}this.greatCirclePoints.push(this.points[0][1]);var jn=dZ(this.points[0][1],jk);if(jn>30037726){if(this.points[0][1].lng<jk.lng){this.points[0][1].lng+=g0.WORLD_SIZE_MC}else{this.points[0][1].lng-=g0.WORLD_SIZE_MC}}},calcMiddlePoint:function(jl,jk,jm,jq){var jf=jl.lat;var je=jk.lat;var jp=jl.lng;var jn=jk.lng;var jr=hM(jf);var jo=hM(je);var i=hM(jp);var e=hM(jn);var jt=Math.sin((1-jm)*jq)/Math.sin(jq);var js=Math.sin(jm*jq)/Math.sin(jq);var ji=jt*Math.cos(jr)*Math.cos(i)+js*Math.cos(jo)*Math.cos(e);var jh=jt*Math.cos(jr)*Math.sin(i)+js*Math.cos(jo)*Math.sin(e);var jg=jt*Math.sin(jr)+js*Math.sin(jo);var T=Math.atan2(jg,Math.sqrt(Math.pow(ji,2)+Math.pow(jh,2)));var jj=Math.atan2(jh,ji);return new cf(eG(jj),eG(T))},calcAngularDistance:function(jf,i){var jg=hM(jf.lat);var je=hM(i.lat);var T=hM(jf.lng);var e=hM(i.lng);return Math.acos(Math.sin(jg)*Math.sin(je)+Math.cos(jg)*Math.cos(je)*Math.cos(Math.abs(e-T)))}});ev.extend(gB.prototype,{initialize:function(i){hL.prototype.initialize.call(this,i);var e=this._config;this.setOptions({strokeColor:e.strokeColor,strokeWeight:e.strokeWeight,strokeStyle:e.strokeStyle,fillColor:e.fillColor,strokeOpacity:e.strokeOpacity,fillOpacity:e.fillOpacity});return this.domElement},setPointAt:function(T,e){if(!this._userPoints[T]){return}this._clearCache();this._userPoints[T]=new cf(e.lng,e.lat);this.points[T]=new cf(e.lng,e.lat);if(T===0&&!this.points[0].equals(this.points[this.points.length-1])){this.points[this.points.length-1]=new cf(e.lng,e.lat)}this._calcBounds();this.draw();var i=new fa("onlineupdate");i.overlay=this;this.dispatchEvent(i)},setPositionAt:function(i,e){if(!this._userPoints[i]){return}var T=ig.convertLL2MC(e);this.setPointAt(i,T);if(this._config.enableEditing===true&&!this._config.geodesic){this.clearVertexs();this.addVertexs()}},_onMarkerDragging:function(jl){this._editstate=true;var je=jl.currentTarget;var jn=jl.point;var jm=je.index;var i=this.vertexPoints;var jp;var ji=i[2].p;var jo=i[i.length-2].p;var jj=null;var T=null;var jk=null;var jh=null;if(jm===0){jk=i[jm+2].p;jp=[jo,jn,jk];if(!je.t){jj=new cf((jo.lng+jn.lng)/2,(jo.lat+jn.lat)/2);T=new cf((jk.lng+jn.lng)/2,(jk.lat+jn.lat)/2)}}else{if(jm===i.length-1){jh=i[jm-2].p;jp=[jh,jn,ji];if(!je.t){jj=new cf((jh.lng+jn.lng)/2,(jh.lat+jn.lat)/2);T=new cf((ji.lng+jn.lng)/2,(ji.lat+jn.lat)/2)}}else{jh=i[jm-1].p;jk=i[jm+1].p;jp=[jh,jn,jk];if(!je.t){jh=i[jm-2].p;jk=i[jm+2].p;jp=[jh,jn,jk];jj=new cf((jh.lng+jn.lng)/2,(jh.lat+jn.lat)/2);T=new cf((jk.lng+jn.lng)/2,(jk.lat+jn.lat)/2);if(this.vertexMarkers[jm-1]){this.vertexMarkers[jm-1].hide()}if(this.vertexMarkers[jm+1]){this.vertexMarkers[jm+1].hide()}}}}if(!this._temp.dashedLine){var jg=new fl(jp,{strokeStyle:"dashed",strokeColor:this._config.strokeColor,strokeWeight:this._config.strokeWeight,strokeOpacity:this._config.strokeOpacity});this.map.addOverlay(jg);this._temp.dashedLine=jg}else{this._temp.dashedLine.setPoints(jp)}if(this._config.nodeT&&this._config.nodeT instanceof iy){var jf=this._config.nodeT}else{var jf=new iy(w.imgPath+"nodeT.gif",new h8(11,11),{offset:new h8(5,5)})}if(!this._temp.preTNode&&jj){this._temp.preTNode=new iU(jj,{icon:jf});this.map.addOverlay(this._temp.preTNode)}else{if(jj){this._temp.preTNode.setPoint(jj)}}if(!this._temp.nexTNode&&T){this._temp.nexTNode=new iU(T,{icon:jf});this.map.addOverlay(this._temp.nexTNode)}else{if(T){this._temp.nexTNode.setPoint(T)}}},getFillStyleForGL:function(){var e=this._config.fillOpacity;var i;i=gR.formatColorCssToRgbaArray(this._config.fillColor,e);this._fillStyleInfoForGL=i.join(",");return this._fillStyleInfoForGL},buildFillVertex:function(jh){var jl=[];var jj=this.getParseCacheIndex(this.map.getZoom());if(this._areaCacheGL[jj]){return this._areaCacheGL[jj]}var jk=this._getDisplayPixelsGL(this.points);if(jk.pointsArray&&jk.pointsArray.length<3){this._areaCacheGL[jj]=[[],jl];return this._areaCacheGL[jj]}var jf;var jg=[];var je=0;for(var T=0;T<jk.length;T++){if(T>0){je+=jk[T-1].length}jf=jh(jk[T].pointsArray,null,null,je);for(var e=0,ji=jf.length;e<ji;e+=3){jl.push(jf[e],jf[e+1],jf[e+2])}jg=jg.concat(jk[T].pointsArray)}var jm=[new Float32Array(jg),new Uint16Array(jl)];this._areaCacheGL[jj]=jm;return jm}});ev.extend(gi.prototype,{initialize:function(e){gB.prototype.initialize.call(this,e);this.points=this._getPerimeterPoints(this.point,this.radius);this._calcBounds();return this.domElement},_addDom:function(){if(this.map._renderType==="webgl"){return}var e=this._drawer=fm.getDrawer(this.map);this.domElement=e.addStandardCircle()},draw:function(i){if(!this.domElement){return}i=i||{};var T=this.getDisplayGeometry(i.center,i.zoom);if(this._drawer){this._drawer.setStandardCircleGeometry(this.domElement,T)}},getDisplayGeometry:function(e,i){var T=this.map.pointToOverlayPixelIn(this.point,{zoom:i,center:e});var jf=Math.round(this._radiusMercator/this.map.getZoomUnits(i));var je={cx:T.x,cy:T.y,radius:jf};return je},setPoint:function(e,T){if(!e){return}this._clearCache();if(!T){this.vertexPoints=null}this.point=e;this.latLng=ig.convertMC2LL(e);this.points=this._getPerimeterPoints(e,this.radius);this._calcBounds();this.draw();var i=new fa("onlineupdate");i.overlay=this;this.dispatchEvent(i)},setRadius:function(e,T){this._clearCache();if(!T){this.vertexPoints=null}this.radius=Math.abs(e);this.points=this._getPerimeterPoints(this.point,this.radius);this._calcBounds();this.draw();var i=new fa("onlineupdate");i.overlay=this;this.dispatchEvent(i)},getParseTolerance:function(i,e){if(e===2){e=1}if(this._config.getParseTolerance){return this._config.getParseTolerance(i,e)}return gi.parseTolerance[e][this.getParseCacheIndex(i)]},_onMarkerDragging:function(jh){var jf;var jj;var jk;var i=this.map;this._editstate=true;var je=jh.currentTarget;var ji=je.index;var T=this.vertexPoints;var jg=T[0].p;var jl=T[T.length-1].p;if(ji==0){jj=je.point;jk=jl}else{jj=jg;jk=je.point}jf=ig.getDistanceByMC(jj,jk);this.setRadius(jf,true);this.setCenterIn(jj,true)},_onMarkerDragend:function(jf){this._editstate=false;var je=jf.currentTarget;var T=je.index;this.vertexPoints[0]={p:this.point,t:0};if(T==1){this.vertexPoints[1]={p:je.point,t:0}}this.clearVertexs();this.addVertexs();var i=new fa("oneditend");i.pixel=jf.pixel;i.point=jf.point;i.latLng=jf.latLng;i.overlay=this;this.dispatchEvent(i)},getVertexPoints:function(){if(!this.vertexPoints){var e=[];e.push({p:this.point,t:0});e.push({p:this.points[Math.floor(this.points.length*3/4)],t:0});this.vertexPoints=e}return this.vertexPoints}});ev.extend(i5.prototype,{initialize:function(i){hL.prototype.initialize.call(this,i);var e=this._config;this.setOptions({topFillColor:e.topFillColor,topFillOpacity:e.topFillOpacity,sideFillColor:e.sideFillColor,sideFillOpacity:e.sideFillOpacity,altitude:e.altitude});return this.domElement},setPointAt:function(T,e){if(!this._userPoints[T]){return}this._clearCache();this._userPoints[T]=new cf(e.lng,e.lat);this.points[T]=new cf(e.lng,e.lat);if(T===0&&!this.points[0].equals(this.points[this.points.length-1])){this.points[this.points.length-1]=new cf(e.lng,e.lat)}this._calcBounds();this.draw();var i=new fa("onlineupdate");i.overlay=this;this.dispatchEvent(i)},getFillStyleForGL:function(){var T=this._config.topFillOpacity;var i=this._config.sideFillOpacity;var e;var je;e=gR.formatColorCssToRgbaArray(this._config.topFillColor,T,false);je=gR.formatColorCssToRgbaArray(this._config.sideFillColor,i,false);return{top:e,side:je}},buildFillVertex:function(jg,jA){var jf=this.getParseCacheIndex(this.map.getZoom());if(this._areaCacheGL[jf]&&!jA){return this._areaCacheGL[jf]}var jD=this._getDisplayPixelsGL(this.points);if(jD.pointsArray&&jD.pointsArray.length<3){this._areaCacheGL[jf]={vertex:[],index:[]};return this._areaCacheGL[jf]}var jy=this.getFillStyleForGL();var jr=jy.top;var jv=jy.side;var jk=this._config.altitude;var jH=[0,0,1];var jm=[];var T=[];var jx=0;for(var jB=0;jB<jD.length;jB++){if(jB>0){jx+=(jD[jB-1].length-1)*5}var ju=jD[jB].pointsArray;ju.splice(-2,2);var jI=this.getClockwise(ju);if(jI){ju=this.rev(ju)}for(var jE=0;jE<ju.length;jE+=2){jm.push([ju[jE],ju[jE+1],jk,jH[0],jH[1],jH[2],jr[0],jr[1],jr[2],jr[3]])}var e=jg(ju,null,null,jx);for(var jE=0,jp=e.length;jE<jp;jE+=3){T.push(e[jE],e[jE+1],e[jE+2])}for(var jE=0,jw=ju.length;jE<jw;jE+=2){var jl=ju[jE];var jj=ju[jE+1];var jt=[jl,jj,0];var js=[jl,jj,jk];var je=jE+2;var ji=jE+3;if(jE===jw-2){je=0;ji=1}var jG=ju[je];var jF=ju[ji];var jq=[jG,jF,0];var jo=[jG,jF,jk];var jC=[jq[0]-jt[0],jq[1]-jt[1],jq[2]-jt[2]];var jz=[js[0]-jt[0],js[1]-jt[1],js[2]-jt[2]];var jH=[];vec3.cross(jH,jC,jz);jt.push(jH[0],jH[1],jH[2]);js.push(jH[0],jH[1],jH[2]);jq.push(jH[0],jH[1],jH[2]);jo.push(jH[0],jH[1],jH[2]);jt.push(jv[0],jv[1],jv[2],jv[3]);js.push(jv[0],jv[1],jv[2],jv[3]);jq.push(jv[0],jv[1],jv[2],jv[3]);jo.push(jv[0],jv[1],jv[2],jv[3]);var jh=jm.length;jm.push(jt);jm.push(js);jm.push(jq);jm.push(jo);T.push(jh,jh+2,jh+3,jh,jh+3,jh+1)}}var jn={vertex:this.convertBuilding3dToTypedArray(jm),index:new Uint16Array(T)};this._areaCacheGL[jf]=jn;return jn},getClockwise:function(jk){var jg=jk.length;if(jg<6){return false}var je=jk[jg-2];var jj=jk[jg-1];var T=jk[0];var ji=jk[1];var e=jk[2];var jh=jk[3];for(var jf=2;jf<jg;jf+=2){if(jk[jf]>T){je=jk[jf-2];jj=jk[jf-1];T=jk[jf];ji=jk[jf+1];if(jf+2>=jg){e=jk[0];jh=jk[1]}else{e=jk[jf+2];jh=jk[jf+3]}}}return((T-je)*(jh-ji)-(ji-jj)*(e-T)<0)},rev:function(je){var e=[];for(var T=je.length-1;T>=0;T-=2){e[je.length-1-T]=je[T-1];e[je.length-1-T+1]=je[T]}return e},convertBuilding3dToTypedArray:function(jh){var T=jh.length;var je=new Float32Array(T*7);var jg=new DataView(je.buffer);var e=0;for(var jf=0;jf<jh.length;jf++){e=jf*7;je[e+0]=jh[jf][0];je[e+1]=jh[jf][1];je[e+2]=jh[jf][2];je[e+3]=jh[jf][3];je[e+4]=jh[jf][4];je[e+5]=jh[jf][5];jg.setUint8(e*4+24,jh[jf][6]);jg.setUint8(e*4+25,jh[jf][7]);jg.setUint8(e*4+26,jh[jf][8]);jg.setUint8(e*4+27,jh[jf][9])}return je}});ev.extend(bM.prototype,{initialize:function(e){hL.prototype.initialize.call(this,e);return this.domElement},getFillStyleForGL:function(){if(!this._config.url){return}switch(this._config.type){case"image":var e={type:"image",texture:this._config.url,opacity:this._config.opacity};this._fillStyleInfoForGL=e;break;case"video":var e={type:"video",texture:this._config.url,opacity:this._config.opacity};this._fillStyleInfoForGL=e;break;case"canvas":var e={type:"canvas",texture:this._config.url,opacity:this._config.opacity};this._fillStyleInfoForGL=e;break}return this._fillStyleInfoForGL},buildFillVertex:function(jh){var jk=[];var jj=this._getDisplayPixelsGL(this.points);var jf;var jg=[];var je=0;for(var T=0;T<jj.length;T++){if(T>0){je+=jj[T-1].length}jf=jh(jj[T].pointsArray,null,null,je);for(var e=0,ji=jf.length;e<ji;e+=3){jk.push(jf[e],jf[e+1],jf[e+2])}jg=jg.concat(jj[T].pointsArray)}var jl=[new Float32Array(jg),new Uint16Array(jk)];return jl},buildFillMaskVertex:function(){var jj=[0,0,1,0,1,1,0,1];var jk=this._getDisplayPixelsGL(this.points);var T=this._config.maskCoord;if(this.hasMaskPng&&T&&T.length===2){var e=[];for(var ji=0;ji<T.length;ji++){e[ji]=ig.convertLL2MC(T[ji])}var jn=this._toOverlayPixelsGL(e);this.maskOverlayPixels=jn;var jh=jn[1][0]-jn[0][0];var jf=jn[1][1]-jn[0][1];var jm=(jk[0][0][0]-jn[0][0])/jh;var jl=(jk[0][0][1]-jn[0][1])/jf;var jg=(jk[0][2][0]-jn[0][0])/jh;var je=(jk[0][2][1]-jn[0][1])/jf;jj=[jm,jl,jg,jl,jg,je,jm,je]}else{this.maskOverlayPixels=[jk[0][0],jk[0][2]]}return jj}});function K(e){this._map=e;this._canvasAttrName={strokeweight:"lineWidth",strokecolor:"strokeStyle",fillcolor:"fillStyle",strokeopacity:"globalAlpha",fillopacity:"globalAlpha"};this._type="canvas"}K.prototype=new eB();var cy=K.prototype;cy.addLine=function(){var i=bL("canvas");this._map.getPanes().mapPane.appendChild(i);i.style.position="absolute";var e=i.getContext("2d");e.lineCap="round";e.lineJoin="round";e.save();return i};cy.setPath=function(T,i){if(!T){return}var e=T.getContext("2d");this._setCanvasPosition(T);this._clearCanvas(e);var jf=parseInt(T.style.top);var je=parseInt(T.style.left);e.beginPath();ev.each(i,function(ji){if(ji.length===0){return}e.moveTo(ji[0].x-je,ji[0].y-jf);for(var jh=1,jg=ji.length;jh<jg;jh++){e.lineTo(ji[jh].x-je,ji[jh].y-jf)}});this._drawCanvas(T)};cy.setAttribute=function(je,i,jf){if(!je){return}var e=je.getContext("2d");var T=this._getAttributeName(i);if(T){e[T]=jf}je.setAttribute("_"+i,jf||"");e.save();this._clearCanvas(e);this._drawCanvas(je)};cy._getAttributeName=function(e){return this._canvasAttrName[e]||e};cy._setCanvasPosition=function(jf){var i=this._map;var jk=i.config.drawMargin;var T=i.width+2*jk;var jh=i.height+2*jk;var je=-i.offsetX-jk;var jg=-i.offsetY-jk;var jj=jf.getContext("2d");var ji={strokeStyle:jj.strokeStyle,fillStyle:jj.fillStyle,globalAlpha:jj.globalAlpha,lineWidth:jj.lineWidth,lineCap:"round",lineJoin:"round"};jf.setAttribute("width",T);jf.setAttribute("height",jh);for(var e in ji){jj[e]=ji[e]}jj.save();var jl=jf.style;jl.top=jg+"px";jl.left=je+"px"};cy._clearCanvas=function(e){e.clearRect(0,0,9999,9999)};cy._drawCanvas=function(i){var e=i.getContext("2d");e.globalAlpha=i.getAttribute("_fillopacity");if(e.globalAlpha!=0&&i.getAttribute("_fillcolor")){e.fill()}e.globalAlpha=i.getAttribute("_strokeopacity");if(e.globalAlpha!==0&&i.getAttribute("_strokecolor")){e.stroke()}};cy.addStandardCircle=function(){var i=bL("canvas");this._map.getPanes().mapPane.appendChild(i);i.style.position="absolute";var e=i.getContext("2d");e.lineCap="round";e.lineJoin="round";e.save();return i};cy.setStandardCircleGeometry=function(je,jh){if(!je){return}var T=je.getContext("2d");this._setCanvasPosition(je);this._clearCanvas(T);var jg=parseInt(je.style.top);var jf=parseInt(je.style.left);var i=jh.cx-jf;var ji=jh.cy-jg;var e=jh.radius;T.beginPath();T.arc(i,ji,e,0,Math.PI*2);this._drawCanvas(je)};function eB(){}DrawerPrototype=eB.prototype;DrawerPrototype.setPalette=function(){};DrawerPrototype.addLine=function(){throw"addLine接口没有实现"};DrawerPrototype.setAttribute=function(){throw"setAttribute接口没有实现"};DrawerPrototype.setPath=function(){throw"setPath接口没有实现"};DrawerPrototype.getType=function(){return this._type};var fm={getDrawer:function(e){if(e._renderType==="webgl"){return null}if(!fm["_"+e.hashCode]){fm["_"+e.hashCode]={}}switch(e.config.drawer){case BMAP_SVG_DRAWER:return fm.getSvgDrawer(e);case BMAP_VML_DRAWER:return fm.getVmlDrawer(e);case BMAP_CANVAS_DRAWER:return fm.getCanvasDrawer(e);default:break}if(fm.isSupportSvg()){return fm.getSvgDrawer(e)}if(fm.isSupportVml()){return fm.getVmlDrawer(e)}if(fm.isSupportCanvas()){return fm.getCanvasDrawer(e)}},getSvgDrawer:function(e){if(!fm["_"+e.hashCode]._svgDrawer){fm["_"+e.hashCode]._svgDrawer=new ej(e)}return fm["_"+e.hashCode]._svgDrawer},getVmlDrawer:function(e){if(!fm["_"+e.hashCode]._vmlDrawer){fm["_"+e.hashCode]._vmlDrawer=new ag(e)}return fm["_"+e.hashCode]._vmlDrawer},getCanvasDrawer:function(e){if(!fm["_"+e.hashCode]._canvasDrawer){fm["_"+e.hashCode]._canvasDrawer=new K(e)}return fm["_"+e.hashCode]._canvasDrawer},isSupportVml:function(){if(typeof fm.supportVml!="undefined"){return fm.supportVml}var T=document.body.appendChild(bL("div"));T.innerHTML=\'<v:shape id="vml_tester1" adj="1" />\';var i=T.firstChild;if(!i.style){return false}i.style.behavior="url(#default#VML)";var e=i?typeof i.adj=="object":true;T.parentNode.removeChild(T);fm.supportVml=e;return e},isSupportSvg:function(){if(typeof fm.supportSvg=="undefined"){fm.supportSvg=!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.1")}return fm.supportSvg},isSupportCanvas:function(){if(typeof fm.supportCanvas=="undefined"){fm.supportCanvas=!!bL("canvas").getContext}return fm.supportCanvas}};bp.DrawerSelector=fm;function ej(e){this._map=e;this.SVG_NS="http://www.w3.org/2000/svg";this._svgAttrName={strokeweight:"stroke-width",strokecolor:"stroke",fillcolor:"fill",strokeopacity:"stroke-opacity",fillopacity:"fill-opacity",strokestyle:"stroke-dasharray",strokelinecap:"stroke-linecap",strokelinejoin:"stroke-linejoin"};this._svg=this._createSvg();this._type="svg"}ej.prototype=new eB();var cd=ej.prototype;cd._createSvg=function(){var e=this._svg=bL("svg",{},this.SVG_NS);e.setAttribute("version","1.1");e.setAttribute("type","system");var i=e.style;i.position="absolute";i.MozUserSelect="none";this.setPalette();this._map.getPanes().mapPane.appendChild(e);return e};cd.setPalette=function(){if(!this._svg){return}var T=this._svg;var ji=this._map;var i=ji.config.drawMargin;var jf=ji.width+2*i;var e=ji.height+2*i;var jh=-ji.offsetX-i;var jg=-ji.offsetY-i;this.setAttribute(T,"x",jf+"px");this.setAttribute(T,"y",e+"px");this.setAttribute(T,"viewBox",jh+" "+jg+" "+jf+" "+e);var je=T.style;je.top=jg+"px";je.left=jh+"px";je.width=jf+"px";je.height=e+"px"};cd.getPalette=function(){return this._svg};cd.setAttribute=function(jf,T,jg,je,i){if(!jf){return}if(T==="strokestyle"){i=i||{};var je=i.strokeWeight||4;var e=i.dashArray||null;switch(jg){case"dashed":if(e){jg=e.join(",")}else{jg=je*2}break;case"dotted":if(i.strokeLineCap==="round"){jg="1,"+2*je}else{jg=je}break;default:jg=0;break}}var jh=jg||"none";if(jg===0){jh=0}jf.setAttributeNS(null,this._getAttributeName(T),jh);return jf};cd._getAttributeName=function(e){return this._svgAttrName[e]||e};cd.addLine=function(){var e=bL("path",{},this.SVG_NS);this.setAttribute(e,"fill-rule","evenodd");this._svg.appendChild(e);return e};cd.setPath=function(T,e){var i=this._getPathString(e)||"M -9999,-9999";this.setAttribute(T,"d",i)};cd._getPathString=function(e){if(e.length===0){return""}var i=[];ev.each(e,function(jf){if(jf.length<2){return}i.push("M "+jf[0].x+" "+jf[0].y+" L");for(var je=1,T=jf.length;je<T;je++){i.push(jf[je].x);i.push(jf[je].y)}});return i.join(" ")};cd.addStandardCircle=function(){var e=bL("circle",{},this.SVG_NS);this._svg.appendChild(e);return e};cd.setStandardCircleGeometry=function(T,je){var i=je.cx;var jf=je.cy;var e=je.radius;this.setAttribute(T,"cx",i);this.setAttribute(T,"cy",jf);this.setAttribute(T,"r",e)};function ag(e){this._map=e;this._vmlAttrName={strokeweight:"weight",strokecolor:"color",fillcolor:"color",strokeopacity:"opacity",fillopacity:"opacity",strokestyle:"dashstyle"};this._type="vml"}ag.prototype=new eB();var dl=ag.prototype;dl.setAttribute=function(T,e,je){if(T){if(e.indexOf("stroke")==0){T=T.getElementsByTagName("stroke")[0]}else{if(e.indexOf("fill")==0){T=T.getElementsByTagName("fill")[0]}}if(e.indexOf("color")>0){if(!je){T.on=false}else{T.on=true}}if(e=="strokestyle"){switch(je){case"dashed":je="4 2 1 2";break;case"dotted":je="1 1";break;default:je="solid";break}}if(e=="strokeweight"){je=je+"px"}var i=this._getAttributeName(e);T[i]=je||""}};dl._getAttributeName=function(e){return this._vmlAttrName[e]||e};dl.addLine=function(){var e=[\'<v:shape style="behavior:url(#default#VML);z-index:1;width:1px;height:1px;position:absolute;left:0;top:0;"\',\'coordsize="1,1" coordorigin="0,0" filled="t" fillcolor="white">\',\'<v:stroke style="behavior:url(#default#VML);" endcap="round" oned="true" />\',\'<v:fill style="behavior:url(#default#VML);" />\',"</v:shape>"].join("");return bB(this._map.getPanes().mapPane,e)};dl.setPath=function(i,e){this.setAttribute(i,"path",this._getPathString(e));if(ev.Browser.ie==6){i.style.display="none";i.style.display=""}};dl._getPathString=function(e){if(e.length==0){return""}var i=[];ev.each(e,function(jf){if(jf.length<2){return}i.push("m "+jf[0].x+" "+jf[0].y+" l");for(var je=1,T=jf.length;je<T;je++){i.push(jf[je].x);i.push(jf[je].y)}i.push("e")});return i.join(" ")||" "};dl.addStandardCircle=function(){var e=[\'<v:oval style="behavior:url(#default#VML);z-index:1;width:1px;height:1px;position:absolute;left:0;top:0;">\',\'<v:stroke style="behavior:url(#default#VML);" endcap="round" oned="true" />\',\'<v:fill style="behavior:url(#default#VML);" />\',"</v:oval>"].join("");return bB(this._map.getPanes().mapPane,e)};dl.setStandardCircleGeometry=function(T,je){var i=je.cx;var jf=je.cy;var e=je.radius;T.style.left=(i-e)+"px";T.style.top=(jf-e)+"px";T.style.width=(e*2)+"px";T.style.height=(e*2)+"px";if(ev.Browser.ie===6){T.style.display="none";T.style.display=""}};');
﻿_jsload&&_jsload('mapgl', 'bp.register(function(i){if(i._renderType!=="webgl"||i._destroyed){return}i._webglMapCamera=new fQ(i);var e=new b6(i,i._webglMapCamera);i._webglPainter=e;i._webglMapScene=new es(i,e);new be(i);if(i.config.showControls===true){this._navigationCtrl=new ex(i)}i.fire(new fa("onglmoduleloaded"))});function fQ(i){this._map=i;this._fovy=35;this._fovyRadian=this._fovy*Math.PI/180;this._projectionMatrix=mat4.create();this._modelViewMatrix=mat4.create();this._projectionMatrix3D=mat4.create();this._projectionMatrix3DInverse=mat4.create();this._projectionMatrix3D64=mat4.create(Float64Array);this._projectionMatrix3DInverse64=mat4.create(Float64Array);this._projectionMatrixLabel3D64=mat4.create(Float64Array);this._modelViewMatrix3D=mat4.create();this._modelViewMatrixLineLabel=mat4.create();this._modelViewMatrixMCPlane64=mat4.create(Float64Array);this._modelViewMatrixMCPlaneInverse64=mat4.create(Float64Array);this._modelViewMatrixMCPlane=mat4.create();this._modelViewMatrixMC3D=mat4.create();this._modelViewMatrixPoly=mat4.create();this._ray=new dt.Ray();this._tempV4=vec4.create(Float64Array);this._tempRes=vec4.create();this._tempNdc=vec4.create();this._near=10;this._far=4000;this._farLabel=2800;if(!this._map.config.restrictCenter){this._far=3000;var e=this._map.getSize();if(e.height>1500){this._far=e.height*2}this._farLabel=2000}this._frustumSideLen=this._far/Math.cos(this._fovyRadian);this._init()}ev.extend(fQ.prototype,{_init:function(){var e=this;e._renderTilt=e._getRenderTilt();e._updateSize();e._updateProjectionMatrix();e._updatePolyMatrix();e._updatePlaneMatrix();this._map.on("updateoverlaymatrix",function(i){e._updatePolyMatrix()})},update:function(T){var i=this;i._renderTilt=i._getRenderTilt();if("onsize_changed" in T.changedStatus){i._updateSize();i._updateProjectionMatrix()}i._updatePolyMatrix();i._updatePlaneMatrix()},_getRenderTilt:function(){var T=this._map;var e=T.getTilt();var i=T.getZoom();if(e!==0&&i<T._enableTiltZoom){if(i>=T._enableTiltZoom-2){e=(1-(T._enableTiltZoom-i)/2)*e}else{e=0}}return e},_updateSize:function(){var e=this._map.getSize();this._width=e.width;this._height=e.height;this._widthHeightRatio=this._width/this._height;this._translateZ=Math.round(-this._height/(2*Math.tan(this._fovyRadian/2)));this._farLabel=Math.abs(this._translateZ)+1400},_updateProjectionMatrix:function(){var i=this._map;var e=i.getSize();mat4.ortho(this._projectionMatrix,0,e.width,0,e.height,this._near,this._far);mat4.perspective(this._projectionMatrix3D64,this._fovyRadian,this._widthHeightRatio,this._near,this._far);mat4.invert(this._projectionMatrix3DInverse64,this._projectionMatrix3D64);this._projectionMatrix3D=mat4.clone(this._projectionMatrix3D64);this._projectionMatrix3DInverse=mat4.clone(this._projectionMatrix3DInverse64);mat4.perspective(this._projectionMatrixLabel3D64,this._fovyRadian,this._widthHeightRatio,this._near,this._farLabel)},getProjectionMatrix:function(){return this._projectionMatrix},getProjectionMatrix3D:function(){return this._projectionMatrix3D},getMCPlaneMVMatrix:function(){return this._modelViewMatrixMCPlane},getMC3DMVMatrix:function(){return this._modelViewMatrixMC3D},getXYZCustomModelViewMatrix3D:function(jm){var jg=jm.col;var jf=jm.row;var jr=jm.zoom;var je=jm.loopOffsetX||0;var jp=this._map;var jk=jp.getZoom();mat4.identity(this._modelViewMatrix3D);var jl=jp.getCenterIn();var T=dd.getPointPixelCoor(jl,jr,jm.transform);var jn=Math.pow(2,jr-18);var i=je*jn;var jj=T[0];var ji=T[1];var js=dd.getResolutionScale(jr,jm.transform);var e=Math.pow(2,jk-jr);var jo=dd.getXYZCellPixelCoor(jg,jf,jr,jm.transform);var jh=this._modelViewMatrix3D;var jq=this._translateZ;if(this._renderTilt!==0){mat4.translate(jh,jh,[0,0,jq]);mat4.rotate(jh,jh,hM(this._renderTilt),[-1,0,0]);mat4.translate(jh,jh,[0,0,-jq])}if(jp._heading%360!==0){mat4.rotate(jh,jh,hM(jp._heading),[0,0,-1])}mat4.translate(jh,jh,[0,0,jq]);mat4.scale(jh,jh,[e,e,e]);mat4.translate(jh,jh,[0,0,-jq]);mat4.translate(jh,jh,[(jo.x-jj)*js+i,(jo.y-ji)*js,jq]);return this._modelViewMatrix3D},getModelViewMatrix3D:function(je){var e=je.col;var jr=je.row;var jo=je.zoom;var jk=je.loopOffsetX;var jq=je.baseTileSize;var T=this._map;var ji=T.getZoom();mat4.identity(this._modelViewMatrix3D);var jp=T.getCenterIn();var jm=Math.pow(2,jo-18);var jj=jk*jm;var jn=jp.lng*jm;var jl=jp.lat*jm;var jf=Math.pow(2,ji-jo);var jg=new eO(e*jq,jr*jq);var jh=this._modelViewMatrix3D;var i=this._translateZ;if(this._renderTilt!==0){mat4.translate(jh,jh,[0,0,i]);mat4.rotate(jh,jh,hM(this._renderTilt),[-1,0,0]);mat4.translate(jh,jh,[0,0,-i])}if(T._heading%360!==0){mat4.rotate(jh,jh,hM(T._heading),[0,0,-1])}mat4.translate(jh,jh,[0,0,i]);mat4.scale(jh,jh,[jf,jf,jf]);mat4.translate(jh,jh,[0,0,-i]);mat4.translate(jh,jh,[jg.x-jn+jj,jg.y-jl,i]);return this._modelViewMatrix3D},getModelViewMatrixForLineLabel:function(je){var i=this._map;if(!i.loaded){return}var jh=this._modelViewMatrixLineLabel;mat4.identity(jh);var T=this._translateZ;var jk=i.centerPoint;var jj=i.zoomLevel;var jl=i.getZoomUnits();var e=je.col;var jo=je.row;var jn=je.baseTileSize;var jf=Math.pow(2,jj-je.zoom);var jg={x:e*jn*jf,y:jo*jn*jf};var ji=[jg.x-jk.lng/jl,jg.y-jk.lat/jl,T];if(this._renderTilt!==0){mat4.translate(jh,jh,[0,0,T]);mat4.rotate(jh,jh,hM(this._renderTilt),[-1,0,0]);mat4.translate(jh,jh,[0,0,-T])}if(i._heading%360!==0){mat4.rotate(jh,jh,hM(i._heading),[0,0,-1])}mat4.translate(jh,jh,ji);var jm=Math.pow(2,jj-18);mat4.scale(jh,jh,[jm,jm,Math.pow(2,jj-20)]);return this._modelViewMatrixLineLabel},_updatePlaneMatrix:function(){var ji=this._map;if(!ji.loaded){return}var jf=this._modelViewMatrixMCPlane64;mat4.identity(jf);var je=this._translateZ;var T=ji.centerPoint;var jh=ji.zoomLevel;var jg=ji.getZoomUnits();var i=[-T.lng/jg,-T.lat/jg,je];if(this._renderTilt!==0){mat4.translate(jf,jf,[0,0,je]);mat4.rotate(jf,jf,hM(this._renderTilt),[-1,0,0]);mat4.translate(jf,jf,[0,0,-je])}if(ji._heading%360!==0){mat4.rotate(jf,jf,hM(ji._heading),[0,0,-1])}mat4.translate(jf,jf,i);var e=Math.pow(2,jh-18);mat4.scale(jf,jf,[e,e,Math.pow(2,jh-20)]);mat4.invert(this._modelViewMatrixMCPlaneInverse64,jf);this._modelViewMatrixMCPlane=mat4.clone(this._modelViewMatrixMCPlane64)},_updatePolyMatrix:function(){if(!this._map._polyOverlayBasePoint){return}var ji=this._map;var jh=ji.getZoom();mat4.identity(this._modelViewMatrixPoly);var jg=ji.getCenterIn();var i=Math.pow(2,jh-18);var e=jg.sub(ji._polyOverlayBasePoint).mult(i);var je=this._translateZ;var T=this._modelViewMatrixPoly;if(this._renderTilt!==0){mat4.translate(T,T,[0,0,je]);mat4.rotate(T,T,hM(this._renderTilt),[-1,0,0]);mat4.translate(T,T,[0,0,-je])}if(ji._heading%360!==0){mat4.rotate(T,T,hM(ji._heading),[0,0,-1])}mat4.translate(T,T,[-e.lng,-e.lat,je]);var jf=i;mat4.scale(T,T,[jf,jf,jf])},getModelViewMatrixPoly:function(){return this._modelViewMatrixPoly},castRay:function(T,jf){var i=this._ray;var e=T.x;var ji=T.y;var je=vec3.create(Float64Array);var jg=vec4.set(this._tempV4,e,ji,-1,1);this._calcV4InCastRay(jg,jf);vec3.scale(je,jg,1/jg[3]);var jh=vec3.create(Float64Array);jg=vec4.fromValues(e,ji,1,1,Float64Array);this._calcV4InCastRay(jg,jf);vec3.scale(jg,jg,1/jg[3]);vec3.sub(jh,jg,je);vec3.normalize(jh,jh);i.set(je,jh);return i},_calcV4InCastRay:function(jg,T){if(!T||!T.matrixInfo){mat4.multiply(jg,this._projectionMatrix3DInverse64,jg);mat4.multiply(jg,this._modelViewMatrixMCPlaneInverse64,jg)}else{if(T.matrixInfo){var e=T.matrixInfo.projectionMatrix;var je=mat4.create(Float64Array);if(e){mat4.invert(je,e)}else{je=this._projectionMatrix3DInverse64}var i=T.matrixInfo.modelViewMatrix;var jf=mat4.create(Float64Array);if(i){mat4.invert(jf,i)}else{jf=this._projectionMatrix3DInverse64}mat4.multiply(jg,je,jg);mat4.multiply(jg,jf,jg)}}},fromXYZToNDC:function(jh,jf,T,jj){var je=vec4.set(this._tempV4,jh,jf,T,1);var i=this._tempRes;jj=jj||{};var e=this._modelViewMatrixMCPlane64;var jg=this._projectionMatrix3D64;if(jj.matrixInfo){e=jj.matrixInfo.modelViewMatrix||e;jg=jj.matrixInfo.projectionMatrix||jg}mat4.multiply(i,e,je);mat4.multiply(i,jg,i);var ji=vec4.set(this._tempNdc,i[0]/i[3],i[1]/i[3],i[2]/i[3],1);ji.outOfFrustum=false;if(jj.frustumTest){if(i[0]<-i[3]||i[0]>i[3]||i[1]<-i[3]||i[1]>i[3]||i[2]<-i[3]||i[2]>i[3]){ji.outOfFrustum=true}}ji.w=i[3];return ji},fromMCToScreenPixel:function(jf,je,jl){jl=jl||{};var T={matrixInfo:{}};if(jl.center||jl.zoom||typeof jl.heading==="number"||typeof jl.tilt==="number"){var ji=jl.zoom||this._map.zoomLevel;var e=jl.center||this._map.centerPoint;var jk=typeof jl.heading==="number"?jl.heading:this._map.getHeading();var jj=typeof jl.tilt==="number"?jl.tilt:this._renderTilt;T.matrixInfo.modelViewMatrix=this.generateMVMatrix(e,ji,jk,jj)}T.frustumTest=jl.frustumTest;if(jl.forLabel){T.matrixInfo.projectionMatrix=this._projectionMatrixLabel3D64}var jh=jl.height||0;var jg=this.fromXYZToNDC(jf,je,jh,T);if(!jg){return null}var i=new eO(((jg[0]+1)*this._map.width/2),((1-jg[1])*this._map.height/2));i.depth=(jg[2]+1)*0.5;i.w=jg.w;i.outOfFrustum=jg.outOfFrustum;return i},fromScreenPixelToMC:function(jl,jh,jr){var jk=jl*2/this._map.width-1;var ji=1-jh*2/this._map.height;jr=jr||{};var T=null;if(jr.zoom||jr.center||typeof jr.heading==="number"||typeof jr.tilt==="number"){var i=this._map;var jo=jr.zoom||i.zoomLevel;var e=jr.center||i.centerPoint;var jq=typeof jr.heading==="number"?jr.heading:i.getHeading();var jn=typeof jr.tilt==="number"?jr.tilt:this._renderTilt;T={matrixInfo:{modelViewMatrix:this.generateMVMatrix(e,jo,jq,jn)}}}var jj=this.castRay(new eO(jk,ji),T);var je=vec3.fromValues(0,0,1,Float64Array);var jg=vec3.dot(je,jj.origin);var jf=vec3.dot(je,jj.direction);var jm=-jg/jf;var jp=vec3.create(Float64Array);vec3.scaleAndAdd(jp,jj.origin,jj.direction,jm);jp[0]=Math.round(jp[0]*100000)/100000;jp[1]=Math.round(jp[1]*100000)/100000;return new cf(jp[0],jp[1])},generateMVMatrix:function(e,ji,jk,jj){var i=this._map;if(!i.loaded){return}e=e||i.centerPoint;ji=ji||i.zoomLevel;jk=typeof jk==="number"?jk:i._heading;jj=typeof jj==="number"?jj:this._renderTilt;var je=mat4.create(Float64Array);mat4.identity(je);var T=this._translateZ;var jg=i.getZoomUnits(ji);var jf=[-e.lng/jg,-e.lat/jg,T];if(jj!==0){mat4.translate(je,je,[0,0,T]);mat4.rotate(je,je,hM(jj),[-1,0,0]);mat4.translate(je,je,[0,0,-T])}if(jk%360!==0){mat4.rotate(je,je,hM(jk),[0,0,-1])}mat4.translate(je,je,jf);var jh=Math.pow(2,ji-18);mat4.scale(je,je,[jh,jh,1]);return je},getPosition:function(e){e=e||this._modelViewMatrixMCPlaneInverse64;return vec3.transformMat4(vec3.create(Float64Array),vec3.fromValues(0,0,0,Float64Array),e)}});function es(i,e){this._map=i;this._camera=i._webglMapCamera;this._painter=e;this._changedStatus={};this._statusChanged=false;this._rAFStarted=false;this._enabled=true;if(i.getMapType()==="B_EARTH_MAP"){this._enabled=false}this._onEachFrame=(function(T){return function(){T._updateFrame()}})(this);this._init()}ev.extend(es.prototype,{_init:function(){this._fpsStarted=false;this._mapStatusIdle=true;this._bind();this._statusChanged=true;this.startRenderThread();var e=new I();var T=this;var je=this._map;je.on("movestart",function(){if(T._fpsStarted){return}T._fpsStarted=true;e.startFPS()});je.on("moveend",function(){if(!T._fpsStarted){return}T._fpsStarted=false;e.stopFPS()});je.on("zoomstart",function(){if(T._fpsStarted){return}T._fpsStarted=true;e.startFPS()});je.on("zoomend",function(){if(!T._fpsStarted){return}T._fpsStarted=false;e.stopFPS()});function i(){if(!e.fpsStarted){return}if(je.getMapType()!=="B_NORMAL_MAP"){return}var jh=e.getAverageFPS();var jg=e.getHigherAverageFPS();var jf=new fa("onfpsdata_ready");jf.fps=jh;jf.fpsH=jg;je.fire(jf);e.clearFPSData()}setTimeout(i,5000);setInterval(i,10000)},_bind:function(){var je=this._map;var e=this;function jg(jh){e._changedStatus[jh.type]=jh||true;e._statusChanged=true;e.startRenderThread()}je.on("zoom_changed",jg);je.on("center_changed",jg);je.on("heading_changed",jg);je.on("tilt_changed",jg);je.on("size_changed",jg);je.on("displayoptions_changed",jg);je.on("mapglidle_inner",function(){cancelAnimationFrame(e.renderTimer);e._rAFStarted=false;this.fire(new fa("onrenderthreadstop"));this.fire(new fa("onmapglidle"));e.renderTimer=null});var T=function(jh){e.startRenderThread()};je.on("refresh",T);function jf(){if(this.mapType==="B_EARTH_MAP"){e._enabled=false;cancelAnimationFrame(e.renderTimer);e._rAFStarted=false;je.fire(new fa("onrenderthreadstop"));e.renderTimer=null}else{e._enabled=true;e.startRenderThread()}}je.on("maptypechange",jf);function i(){if(document.hidden){cancelAnimationFrame(e.renderTimer)}else{e.startRenderThread()}}document.addEventListener("visibilitychange",i,false);je.on("destroy",function(){this.off("zoom_changed",jg);this.off("center_changed",jg);this.off("heading_changed",jg);this.off("tilt_changed",jg);this.off("size_changed",jg);this.off("displayoptions_changed",jg);this.off("refresh",T);this.off("maptypechange",jf);document.removeEventListener("visibilitychange",i,false);cancelAnimationFrame(this.renderTimer)})},startRenderThread:function(){if(!this._enabled){return}var T=this;if(T.idleTimer){clearTimeout(T.idleTimer)}T.idleTimer=setTimeout(function i(){T._map.fire(new fa("onmapglidle_inner"));T.idleTimer=null},200);if(T._statusChanged===true){if(T._mapStatusIdle===true){T._mapStatusIdle=false;T._map.fire(new fa("onmapstatusbusy_inner"))}if(T.statusIdleTimer){clearTimeout(T.statusIdleTimer)}T.statusIdleTimer=setTimeout(function e(){T._mapStatusIdle=true;T._map.fire(new fa("onmapstatusidle_inner"));T.statusIdleTimer=null},100)}if(this._rAFStarted===true){return}this._rAFStarted=true;this.renderTimer=requestAnimationFrame(this._onEachFrame)},_updateFrame:function(){this.renderTimer=requestAnimationFrame(this._onEachFrame);this._map.fire(new fa("onbeforeupdateframe"));if(this._rAFStarted===false){cancelAnimationFrame(this.renderTimer);return}var T=hq();if(this._statusChanged){this._statusChanged=false;var e=new fa("onupdate");e.changedStatus=this._changedStatus;if(this._changedStatus.onsize_changed){this._resizeMap(this._changedStatus.onsize_changed.oldSize)}this._camera.update(e);this._map.fire(e);this._changedStatus={}}this._painter.draw({idle:this._mapStatusIdle});var je=hq()-T;var i=new fa("onupdateframe");i.frameTime=je;this._map.fire(i)},_resizeMap:function(e){var T=this._map;var je=T.getSize();var jj=(je.width-e.width)/2;var jg=(je.height-e.height)/2;var i=jj;var jh=jg;if(T._heading!==0){var jl=hM(T._heading);i=Math.abs(Math.cos(jl)*jj)+Math.abs(Math.sin(jl)*jg);jh=Math.abs(Math.sin(jl)*jj)+Math.abs(Math.cos(jl)*jg)}var ji=T.getZoomUnits();var jk=T.centerPoint;if(jk&&!T.config.enableResizeOnCenter){if(T._heading%360!==0||T._tilt>0){var jf=new eO(je.width/2,je.height/2);T.centerPoint=T.restrictCenter(T.pixelToPointIn(jf))}else{T.centerPoint=T.restrictCenter(new cf(jk.lng+i*ji,jk.lat-jh*ji))}}}});function I(){this._fps=0;this.preFrameTimeStamp=Date.now();this.currentTime=null;this.fpsArr=[];this.averageFPS=0;this.higherAverageFPS=0;this.averageTimeInterval=20;this.fpsStarted=false}I.prototype.startFPS=function(){this.fpsStarted=true;this.preFrameTimeStamp=Date.now();this.initFPS()};I.prototype.initFPS=function(){this._fps++;this.currentTime=Date.now();if(this.currentTime-this.preFrameTimeStamp>500){var i=this._fps*2;i=i>60?60:i;this.fpsArr.push(i);if(this.fpsArr.length===this.averageTimeInterval){this._calcAverageFPS()}this._fps=0;this.preFrameTimeStamp=this.currentTime}var e=this;this.timer=requestAnimationFrame(function(){e.initFPS()})};I.prototype._calcAverageFPS=function(){if(this.fpsArr.length===0){return}var je=0;var e=0;this.fpsArr.sort(function(jg,i){return i-jg});var jf=Math.round(this.fpsArr.length*0.8);for(var T=0;T<this.fpsArr.length;T++){if(T===jf){e=je}je+=this.fpsArr[T]}this.averageFPS=Math.round(je/this.fpsArr.length);this.higherAverageFPS=Math.round(e/jf);this.fpsArr=[]};I.prototype.getAverageFPS=function(){if(this.averageFPS===0){this._calcAverageFPS()}return this.averageFPS};I.prototype.getHigherAverageFPS=function(){if(this.higherAverageFPS===0){this._calcAverageFPS()}return this.higherAverageFPS};I.prototype.stopFPS=function(){if(this.timer){cancelAnimationFrame(this.timer);this.timer=null;if(this._fps!==0){var e=this.currentTime-this.preFrameTimeStamp;var i=this._fps*1000/e;i=i>60?60:i;this.fpsArr.push(i);this._fps=0}}};I.prototype.clearFPSData=function(){this.averageFPS=0;this.higherAverageFPS=0;this.fpsStarted=false};var iJ=(function(){var e={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],\'"\':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],"$":[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],"0":[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],"1":[20,[6,17,8,18,11,21,11,0]],"2":[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],"3":[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],"4":[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],"5":[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],"6":[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],"7":[20,[17,21,7,0,-1,-1,3,21,17,21]],"8":[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],"9":[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};return function(jp,T,jl,jf){jf=jf||1;var jh=[];var jj;var jk;var ji;var jg;var jm;var jo;var jn;var je;for(jj=0,jk=jp.length;jj<jk;jj++){jm=e[jp[jj]];if(!jm){continue}je=null;for(ji=0,jg=jm[1].length;ji<jg;ji+=2){if(jm[1][ji]===-1&&jm[1][ji+1]===-1){je=null}else{jo=T+jm[1][ji]*jf;jn=jl-jm[1][ji+1]*jf;if(je){jh.push(je.x,je.y,jo,jn)}je={x:jo,y:jn}}}T+=jm[0]*jf}return jh}})();var iC={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Float32:"FLOAT"};var hk={Int8:1,Uint8:1,Int16:2,Uint16:2,Float32:4};function v(je,jg,T,jf){this.arrayBuffer=je;this.attributes=jg.members;this.bytesPerElement=0;if(this.attributes){for(var e=0;e<this.attributes.length;e++){this.bytesPerElement+=hk[this.attributes[e].type]*this.attributes[e].components}}else{this.bytesPerElement=je.BYTES_PER_ELEMENT*jg.components}this.length=jf||je.byteLength/this.bytesPerElement;this.type=T;this.arrayType=jg}v.prototype.bind=function(i){var e=i[this.type];if(!this.buffer){this.buffer=i.createBuffer();i.bindBuffer(e,this.buffer);i.bufferData(e,this.arrayBuffer,i.STATIC_DRAW);this.arrayBuffer=null}else{i.bindBuffer(e,this.buffer)}};v.prototype.setVertexAttribPointers=function(je,e){for(var i=0;i<this.attributes.length;i++){var jf=this.attributes[i];var T=e.attributes[jf.name];je.vertexAttribPointer(T,jf.components,je[iC[jf.type]],jf.normalize,this.bytesPerElement,jf.offset)}};v.prototype.updateVertexData=function(je,i,T){this.arrayBuffer=i;if(!this.buffer){return this.bind(je)}if(T<=this.length){var e=je[this.type];je.bindBuffer(e,this.buffer);je.bufferData(e,this.arrayBuffer,je.STATIC_DRAW)}else{this.destroy(je);this.bind(je)}this.length=T};v.prototype.destroy=function(e){if(this.buffer){e.deleteBuffer(this.buffer);this.buffer=null}};v.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"};v.ELEMENT_ATTRIBUTE_TYPE="Uint16";v.VERTEX_ATTRIBUTE_ALIGNMENT=4;function dp(){this.boundProgram=null;this.boundVertexBuffer=null;this.boundElementBuffer=null;this.vao=null}dp.prototype.bind=function(ji,e,je,jh){var jf=ji.extVertexArrayObject;if(jf===undefined){jf=ji.extVertexArrayObject=ji.getExtension("OES_vertex_array_object")}if(jf){if(!this.vao){this.vao=jf.createVertexArrayOES()}jf.bindVertexArrayOES(this.vao)}else{}if(!this.boundProgram){var jj=jf?0:(ji.currentNumAttributes||0);var jg=e.numAttributes;var T;for(T=jj;T<jg;T++){ji.enableVertexAttribArray(T)}if(!jf){for(T=jg;T<jj;T++){ji.disableVertexAttribArray(T)}ji.currentNumAttributes=jg}je.bind(ji);je.setVertexAttribPointers(ji,e);if(jh){jh.bind(ji)}if(jf){this.boundProgram=e;this.boundVertexBuffer=je;this.boundElementBuffer=jh}}};dp.prototype.update=function(ji,je,T,jh,e,i,jg){var jf=ji.extVertexArrayObject;if(jf===undefined){jf=ji.extVertexArrayObject=ji.getExtension("OES_vertex_array_object")}if(jf){jf.bindVertexArrayOES(this.vao);if(this.boundVertexBuffer){this.boundVertexBuffer.updateVertexData(ji,T,jh);this.boundVertexBuffer.setVertexAttribPointers(ji,this.boundProgram)}if(e&&this.boundElementBuffer){this.boundElementBuffer.updateVertexData(ji,i,jg)}}else{je.updateVertexData(ji,T,jh);if(e){e.updateVertexData(ji,i,jg)}}};dp.prototype.unbind=function(i){var e=i.extVertexArrayObject;if(e){e.bindVertexArrayOES(null);this.boundProgram=null;this.boundVertexBuffer=null;this.boundElementBuffer=null}};dp.prototype.destroy=function(i){var e=i.extVertexArrayObject;if(e&&this.vao){e.deleteVertexArrayOES(this.vao);this.vao=null;this.boundProgram=null;this.boundVertexBuffer=null;this.boundElementBuffer=null}};function bX(i,jg,e,jf,je){var jh=i.gl;var T=i.programMgr.useProgram("block");e.vao1.bind(jh,T,e.vertex,e.element1);jh.uniformMatrix4fv(T.uniforms.u_mv_matrix,false,jg.mvMatrix);if(jf){mat4.invert(i.normalMatrix,jg.mvMatrix);mat4.transpose(i.normalMatrix,i.normalMatrix)}jh.uniformMatrix4fv(T.uniforms.u_normal_matrix,false,i.normalMatrix);jh.drawElements(jh.TRIANGLES,e.element1.length,jh.UNSIGNED_SHORT,0)}function iV(e,T,je){var jf=e.gl;var i=e.programMgr.useProgram("block");jf.uniform3fv(i.uniforms.u_side_light_dir,T);jf.uniform1i(i.uniforms.u_is_normal,je);if(!i.lastState.projMatrix){jf.uniformMatrix4fv(i.uniforms.u_proj_matrix,false,e.projMatrix);i.lastState.projMatrix=true}var jg=e._camera._far||4000;if(i.lastState.cameraFar!==jg){jf.uniform1f(i.uniforms.u_camera_far,jg);i.lastState.cameraFar=jg}}function ee(ji,jh,e,jj){var jg=ji.gl;var jf=ji.programMgr.useProgram("shadow");jg.uniformMatrix4fv(jf.uniforms.u_mv_matrix,false,jh.mvMatrix);if(typeof e.length==="number"){for(var je=0;je<e.length;je++){var jk=e[je];var T=jj[je];if(T.type==="fill"){jk.vao1.bind(jg,jf,jk.vertex,jk.element1);jg.drawElements(jg.TRIANGLES,jk.element1.length,jg.UNSIGNED_SHORT,0)}}}else{e.vao1.bind(jg,jf,e.vertex,e.element1);jg.drawElements(jg.TRIANGLES,e.element1.length,jg.UNSIGNED_SHORT,0)}}function eC(i,e){var je=i.gl;var T=i.programMgr.useProgram("shadow");je.uniform3fv(T.uniforms.u_light_dir,e);if(!T.lastState.projMatrix){je.uniformMatrix4fv(T.uniforms.u_proj_matrix,false,i.projMatrix);T.lastState.projMatrix=true}var jf=i._camera._far||4000;if(T.lastState.cameraFar!==jf){je.uniform1f(T.uniforms.u_camera_far,jf);T.lastState.cameraFar=jf}}var X=(function(){var i=new Image();var e=false;i.onload=function(){e=true};i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAUdJREFUeNrs2sENwyAQRcE4ckf0RBv04Z7ck30wFXBi/4wU5bScXhQk9hhj9B+xzu/7WjijvZ/b/Jbz/e83kE0AAkAACAABIAAEgAAQAAJAAAgAAVDYfA5ui+eY33R+BuA9PXO++QtwB0AACAABIAAEgAAQAAJAAAgAASAAqrIPED5vH8A+AO4ACAABIAAEgAAQAAJAAAgAASAABEBJ9gHC5+0D2AfAHQABIAAEgAAQAAJAAAgAASAABIAAKMk+QPi8fQD7ALgDIAAEgAAQAAJAAAgAASAABIAAEAAl2QcIn7cPYB8AdwAEgAAQAAJAAAgAASAABIAAEAACoCT7AOHz9gHsA+AOgAAQAAJAAAgAASAABIAAEAACQACUZB8gfN4+gH0A3AEQAAJAAAgAASAABIAAEAACQABUNV8D++I5nmM3nX8EGADa0U/2xPbBVwAAAABJRU5ErkJggg==";function T(je,jf){if(!je._gridTexture){je._gridTexture=jf.createTexture();jf.bindTexture(jf.TEXTURE_2D,je._gridTexture);jf.texParameteri(jf.TEXTURE_2D,jf.TEXTURE_WRAP_S,jf.REPEAT);jf.texParameteri(jf.TEXTURE_2D,jf.TEXTURE_WRAP_T,jf.REPEAT);jf.texParameteri(jf.TEXTURE_2D,jf.TEXTURE_MIN_FILTER,jf.LINEAR_MIPMAP_LINEAR);jf.texParameteri(jf.TEXTURE_2D,jf.TEXTURE_MAG_FILTER,jf.LINEAR);jf.texImage2D(jf.TEXTURE_2D,0,jf.RGBA,jf.RGBA,jf.UNSIGNED_BYTE,i);jf.generateMipmap(jf.TEXTURE_2D)}else{jf.bindTexture(jf.TEXTURE_2D,je._gridTexture)}}return function(je,jg,jh){if(!e){return}var ji=je.gl;var jf=je.programMgr.useProgram("grid");if(!jf.lastState.projMatrix){ji.uniformMatrix4fv(jf.uniforms.u_proj_matrix,false,je.projMatrix);jf.lastState.projMatrix=true}ji.uniformMatrix4fv(jf.uniforms.u_mv_matrix,false,jg);je._state.activeTexture(ji.TEXTURE0);T(je,ji);if(jf.uniforms.lastSampler!==0){ji.uniform1i(jf.uniforms.u_image,0);jf.uniforms.lastSampler=0}if(jf.uniforms.lastTexScale!==jh){ji.uniform1f(jf.uniforms.u_tex_scale,jh);jf.uniforms.lastTexScale=jh}je.gridVAO.bind(ji,jf,je.gridBuffer);ji.drawArrays(ji.TRIANGLE_STRIP,0,je.gridBuffer.length)}})();var A=(function(){var je={};function i(jg,jk,jj,jf,ji){var jl=jg.gl;var jh=jg.programMgr.useProgram("overlayfill");jl.uniform4fv(jh.uniforms.u_color,ji);jf.vao1.bind(jl,jh,jf.vertex,jf.element1);if(!jh.lastState.projMatrix){jl.uniformMatrix4fv(jh.uniforms.u_proj_matrix,false,jg.projMatrix);jh.lastState.projMatrix=true}jl.uniformMatrix4fv(jh.uniforms.u_mv_matrix,false,jk);jl.drawElements(jl.TRIANGLES,jf.element1.length,jl.UNSIGNED_SHORT,0);if(window.global_lines){jl.uniform4fv(jh.uniforms.u_color,[1,0,0,1]);jl.drawElements(jl.LINE_STRIP,jj[2].length,jl.UNSIGNED_SHORT,0)}}function e(jh,jk,jj,jg,jf){var jl=jh.gl;var ji=jh.programMgr.useProgram("fill");jg.vao1.bind(jl,ji,jg.vertex,jg.element1);if(!ji.lastState.projMatrix){jl.uniformMatrix4fv(ji.uniforms.u_proj_matrix,false,jh.projMatrix);ji.lastState.projMatrix=true}if(ji.lastState.isFlat!==jh.isFlat){jl.uniform1i(ji.uniforms.u_flat,jh.isFlat);ji.lastState.isFlat=jh.isFlat}if(ji.lastState.drawPart!==jf){jl.uniform1i(ji.uniforms.u_draw_part,jf);ji.lastState.drawPart=jf}var jm=jh._camera._far||4000;if(ji.lastState.cameraFar!==jm){jl.uniform1f(ji.uniforms.u_camera_far,jm);ji.lastState.cameraFar=jm}jl.uniformMatrix4fv(ji.uniforms.u_mv_matrix,false,jk);jl.drawElements(jl.TRIANGLES,jg.element1.length,jl.UNSIGNED_SHORT,0)}return function T(jk,jj,ji,jg,jm,jo){jo=jo||{};if(!jm){var jl=jo.drawPart||0;e(jk,jj.mvMatrix,ji,jg,jl);return}var jh=jk.gl;var jn=jk._state;if(jo.usePolygonStencil&&jo.drawPolygonPass===1){jf=[1,1,1,255];jh.clear(jh.STENCIL_BUFFER_BIT);jh.stencilFunc(jh.NEVER,0,255);jn.stencilOp(jh.INVERT,jh.INVERT,jh.INVERT);jh.stencilMask(255);jn.colorMask(false,false,false,false);i(jk,jj.mvMatrix,ji,jg,jf);return}if(jo.usePolygonStencil&&jo.drawPolygonPass===2){jh.stencilFunc(jh.EQUAL,255,255);jh.stencilMask(0);jn.stencilOp(jh.KEEP,jh.KEEP,jh.KEEP);jn.colorMask(true,true,true,true)}var jf=je[ji[0]];if(!jf){jf=ji[0].split(",");jf=[jf[0]/255,jf[1]/255,jf[2]/255,parseFloat(jf[3])];je[ji[0]]=jf}i(jk,jj.mvMatrix,ji,jg,jf);if(jo.usePolygonStencil){jh.clear(jh.STENCIL_BUFFER_BIT);jh.stencilMask(255);jh.stencilFunc(jh.ALWAYS,1,255)}}})();var eX=(function(){function i(jk,je,jj,jn,jl,jm){if(je.element1&&je.element1.length===0){return}var jg=jk.gl;var jf=jk.programMgr.useProgram("line");if(!jf.lastState.projMatrix){jg.uniformMatrix4fv(jf.uniforms.u_proj_matrix,false,jk.projMatrix);jf.lastState.projMatrix=true}jg.uniformMatrix4fv(jf.uniforms.u_mv_matrix,false,jj);var T;if(jn){T=jk.polyZoomRatio}else{T=jk.tileScale}if(jf.lastState.scale!==T){jg.uniform1f(jf.uniforms.u_scale,T);jf.lastState.scale=T}var jh=jm?false:jk.isFlat;if(jf.lastState.isFlat!==jh){jg.uniform1i(jf.uniforms.u_flat,jh);jf.lastState.isFlat=jh}if(jf.lastState.drawPart!==jl){jg.uniform1i(jf.uniforms.u_draw_part,jl);jf.lastState.drawPart=jl}var ji=jk._camera._far||4000;if(jf.lastState.cameraFar!==ji){jg.uniform1f(jf.uniforms.u_camera_far,ji);jf.lastState.cameraFar=ji}je.vao1.bind(jg,jf,je.vertex,je.element1);jg.drawElements(jg.TRIANGLES,je.element1.length,jg.UNSIGNED_SHORT,0)}function e(jy,jA,jB,jq,jr,ju,js,jx,jj){var jt=jy.gl;var ji=jy.programMgr.useProgram("dash");var jp=jB.texture;if(!jy._dashLineTextures){jy._dashLineTextures={}}var jm;var jf=jt.REPEAT;var jv;if(ju&&jB.overlay){jv=jB.overlay}if(jp instanceof HTMLCanvasElement){if(!jB.glTexture){if(jv&&jv._config.textureRepeat===false){jf=jt.CLAMP_TO_EDGE}jB.glTexture=dt.utils.createTexture(jt,jp,{flipY:false,wrap:jf,mipmap:true,unpackAlpha:true})}jm=jB.glTexture}else{var je=jy._dashLineTextures;if(!je[jp]){je[jp]={status:"init"};var jC=new Image();jC.crossOrigin="anonymous";if(jv&&jv._config.textureRepeat===false){jf=jt.CLAMP_TO_EDGE}jC.onload=function(){je[jp].texture=dt.utils.createTexture(jt,this,{flipY:false,wrap:jf,mipmap:true,unpackAlpha:true});je[jp].status="done";jy._map.fire(new fa("onrefresh"))};if(!ju){jC.src=w.getIconSetPath(jy._map.config.style)+jp}else{jC.src=jp}}if(je[jp].status!=="done"){return}jm=je[jp].texture}if(!ji.lastState.projMatrix){jt.uniformMatrix4fv(ji.uniforms.u_proj_matrix,false,jy.projMatrix);ji.lastState.projMatrix=true}var jl=jx?false:jy.isFlat;if(ji.lastState.isFlat!==jl){jt.uniform1i(ji.uniforms.u_flat,jl);ji.lastState.isFlat=jl}jt.uniformMatrix4fv(ji.uniforms.u_mv_matrix,false,jr);jy._state.activeTexture(jt.TEXTURE6);jt.bindTexture(jt.TEXTURE_2D,jm);if(ji.uniforms.lastSampler!==6){jt.uniform1i(ji.uniforms.u_image,6);ji.uniforms.lastSampler=6}var jg=jB.textureSize;var T=jB.lineWidth;var jh=jB.isSingle?true:false;var jz;if(jh){jz=1}else{var jw;jy._state.blendFunc(jt.ONE,jt.ONE_MINUS_SRC_ALPHA);if((!jB.zoomWithMap&&!ju)||ju){jz=jy.tileScale;var jn=1;if(/ditie/.test(jp)){jn=1}if(/shengjie/.test(jp)){jn=1.2;if(jj<=7){jn=0.8}}if(ju){jy._state.blendFunc(jt.ONE,jt.ONE_MINUS_SRC_ALPHA);jz=jy.polyZoomRatio;jw=jv._totalDashLen;var jo=18;if(!jB.zoomWithMap){jo=jy._map.getZoom()}if(ji.lastState.stepZoom!==jo){jt.uniform1f(ji.uniforms.u_step_zoom,jo);ji.lastState.stepZoom=jo}}else{jz=jy.tileScale;jw=jg[1]*jn/jy.tileScaleFromStart;if(ji.lastState.stepZoom!==jy.stepZoom){jt.uniform1f(ji.uniforms.u_step_zoom,jy.stepZoom);ji.lastState.stepZoom=jy.stepZoom}}}else{jz=0.5;jw=jg[1]/jg[0]*T/2;if(ji.lastState.stepZoom!==jA.tileInfo.useZoom){jt.uniform1f(ji.uniforms.u_step_zoom,jA.tileInfo.useZoom);ji.lastState.stepZoom=jA.tileInfo.useZoom}}if(ji.lastState.dash!==jw){jt.uniform1f(ji.uniforms.u_dash,jw);ji.lastState.dash=jw}if(!ju){if(ji.lastState.tileZoom!==jA.tileInfo.useZoom){jt.uniform1f(ji.uniforms.u_tile_zoom,jA.tileInfo.useZoom);ji.lastState.tileZoom=jA.tileInfo.useZoom}}else{if(ji.lastState.tileZoom!==18){jt.uniform1f(ji.uniforms.u_tile_zoom,18);ji.lastState.tileZoom=18}}}if(ji.lastState.scale!==jz){jt.uniform1f(ji.uniforms.u_scale,jz);ji.lastState.scale=jz}if(ji.lastState.isSingle!==jh){jt.uniform1f(ji.uniforms.u_is_single,jh);ji.lastState.isSingle=jh}if(ji.lastState.drawPart!==js){jt.uniform1i(ji.uniforms.u_draw_part,js);ji.lastState.drawPart=js}var jk=jy._camera._far||4000;if(ji.lastState.cameraFar!==jk){jt.uniform1f(ji.uniforms.u_camera_far,jk);ji.lastState.cameraFar=jk}jq.vao1.bind(jt,ji,jq.vertex,jq.element1);jt.drawElements(jt.TRIANGLES,jq.element1.length,jt.UNSIGNED_SHORT,0);jy._state.blendFunc(jt.SRC_ALPHA,jt.ONE_MINUS_SRC_ALPHA,jt.ONE,jt.ONE_MINUS_SRC_ALPHA)}return function(jh,jg,jf,T,jk,jl){if(!T){return}if(jk){for(var je=0;je<T.length;je++){if(jf[je].texture){e(jh,jg,jf[je],T[je],jg.mvMatrix,true)}else{i(jh,T[je],jg.mvMatrix,true)}}}else{jl=jl||{};var ji=jl.drawPart||0;var jj=jl.force3D||false;if(jf.texture){e(jh,jg,jf,T,jg.mvMatrix,false,ji,jj,jg.tileInfo.zoom)}else{i(jh,T,jg.mvMatrix,false,ji,jj)}}}})();var iD=(function(){var T=mat4.create();var i=vec3.create();function e(ju,jt,jx,jq,jm,jf,jw,jh,je,jo,jn,jk,jp,jr,jg,jj){var js=ju.gl;var jl=ju.programMgr.useProgram("symbol");jh=jh||0;je=je||0;jn=jn||0;jr=jr||T;js.uniformMatrix4fv(jl.uniforms.uOrthoPMatrix,false,jr);if(!jl.lastState.projMatrix){js.uniformMatrix4fv(jl.uniforms.uPMatrix,false,jw);js.uniform2fv(jl.uniforms.uMapHalfSize,jo);jl.lastState.projMatrix=true}js.uniformMatrix4fv(jl.uniforms.uMVMatrix,false,jq);js.uniform3fv(jl.uniforms.uCameraPosHigh,jk);js.uniform3fv(jl.uniforms.uCameraPosLow,jp);js.uniform1f(jl.uniforms.uCameraFar,ju._camera._farLabel);if(jj){var jv=ju._map;var ji=hT(g0.WORLD_SIZE_MC);js.uniform3fv(jl.uniforms.uFixPositionInfo,[1,ji[0],ji[1]])}else{js.uniform3fv(jl.uniforms.uFixPositionInfo,i)}if(typeof jg!=="number"){jg=7}ju._state.activeTexture(js.TEXTURE0+jg);js.bindTexture(js.TEXTURE_2D,jm);if(jl.uniforms.lastSamper!==jg){js.uniform1i(jl.uniforms.uSampler,jg);jl.uniforms.lastSamper=jg}js.uniform1i(jl.uniforms.uHighlight,jh);js.uniform1i(jl.uniforms.uForRenderPNG8Text,jf);js.uniform1i(jl.uniforms.uUseRound,je);if(jl.uniforms.lastMapZoom!==jn){js.uniform1f(jl.uniforms.uMapZoom,jn);jl.uniforms.lastMapZoom=jn}jx.bind(js,jl,jt);js.drawArrays(js.TRIANGLES,0,jt.length)}return function(jq,jk,jf,jp,jm,jj,jo,jg,jt,je,ji,jn,jh,jr,js,jl){e(jq,jk,jf,jp,jm,jj,jo,jg,jt,je,ji,jn,jh,jr,js,jl)}})();var h2=(function(){var T=mat4.create();var e=vec3.create();function i(jo,jk,jf,jn,jl,jj,jm,jr,je,ji,jq,jp){var jh=jo.gl;var jg=jo.programMgr.useProgram("symbolline");jr=jr||0;ji=ji||0;if(!jg.lastState.projMatrix){jh.uniformMatrix4fv(jg.uniforms.uPMatrix,false,jm);jh.uniform2fv(jg.uniforms.uMapHalfSize,je);jg.lastState.projMatrix=true}jh.uniformMatrix4fv(jg.uniforms.uMVMatrix,false,jn);jh.uniform1f(jg.uniforms.uCameraFar,jo._camera._farLabel);if(typeof jp!=="number"){jp=7}jo._state.activeTexture(jh.TEXTURE0+jp);jh.bindTexture(jh.TEXTURE_2D,jl);if(jg.uniforms.lastSamper!==jp){jh.uniform1i(jg.uniforms.uSampler,jp);jg.uniforms.lastSamper=jp}jh.uniform1i(jg.uniforms.uForRenderPNG8Text,jj);jh.uniform1i(jg.uniforms.uUseRound,jr);if(jg.lastState.isFlat!==jo.isFlat){jh.uniform1i(jg.uniforms.u_flat,jo.isFlat);jg.lastState.isFlat=jo.isFlat}if(jg.uniforms.lastMapZoom!==ji){jh.uniform1f(jg.uniforms.uMapZoom,ji);jg.uniforms.lastMapZoom=ji}jf.bind(jh,jg,jk);jh.drawArrays(jh.TRIANGLES,0,jk.length)}return function(jn,ji,jf,jm,jk,jh,jl,jq,je,jg,jp,jo,jj){i(jn,ji,jf,jm,jk,jh,jl,jq,je,jg,jp,jo,jj)}})();var gX=(function(){function e(jq,jj,i,jp,jo,jf){var jn=jf.texture;var jm=jf._texture;var jl=jf.attach;var jh=jq.gl;var jg=jq.programMgr.useProgram("raster");if(jm){var T={fShader:jl.fomularC};jg=jq.programMgr.useProgram("rasterpixel",T);if(jg.lastState.fHashcode!==jl.fHashcode){jq.programMgr.removeProgram("rasterpixel");jg=jq.programMgr.useProgram("rasterpixel",T);jg.lastState.fHashcode=jl.fHashcode}}jh.uniformMatrix4fv(jg.uniforms.uPMatrix,false,jo);jh.uniformMatrix4fv(jg.uniforms.uMVMatrix,false,jp);jq._state.activeTexture(jh.TEXTURE7);jh.bindTexture(jh.TEXTURE_2D,jn);jh.uniform1i(jg.uniforms.uSampler,7);i.bind(jh,jg,jj);if(jm){jq._state.activeTexture(jh.TEXTURE8);jh.bindTexture(jh.TEXTURE_2D,jm);jh.uniform1i(jg.uniforms.u_ColorMap,8);if(jl.textureMask&&jl.maskBox){jq._state.activeTexture(jh.TEXTURE9);jh.bindTexture(jh.TEXTURE_2D,jl.textureMask);jh.uniform1i(jg.uniforms.u_Mask,9);jh.uniform1i(jg.uniforms.u_maskLoaded,1)}else{jh.uniform1i(jg.uniforms.u_maskLoaded,0)}var js=jl.maskData;jh.uniform1f(jg.uniforms.u_maskData,js);var je=jl.domain;jh.uniform2f(jg.uniforms.u_domain,je[0],je[1]);var ji=jl.clamp;jh.uniform2f(jg.uniforms.u_clamp,ji[0],ji[1]);var jr=jl.noData;jh.uniform1f(jg.uniforms.u_noData,jr);var jk=jl.opacity;jh.uniform1f(jg.uniforms.u_opacity,jk)}jh.drawArrays(jh.TRIANGLES,0,jj.length)}return function(i,jg,je,T,jf,jh){e(i,jg,je,T,jf,jh)}})();var cs=(function(){var i=new Image();var e=false;i.onload=function(){e=true};i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ5JREFUeNrsllEKgCAMhp14rsqT1X08Q6VdbDmYLxGUoO5lg72J+9i/3wmIaCTDGuFQAAVQANfyshCCSkBx5pwlAZackUEmSQkIJH2BjJiBAnK8gQBtwzy9I1cidWTLeUm5wHNHduqIlXagEyhMDlmLBNDyR8QvIf4pPNIFkZ3gn8V7SxB52tOwZVRTuCeArzkM+i1XAAVQAGmAW4ABAOOjKXrLR4xWAAAAAElFTkSuQmCC";function T(jf,je){if(!je._arrowTexture){je._arrowTexture=dt.utils.createTexture(jf,i,{wrap:jf.REPEAT})}else{jf.bindTexture(jf.TEXTURE_2D,je._arrowTexture)}}return function(jk,jj,ji,jf,jm,jn){if(!e){return}var jl=jn.drawPart||0;var jh=jk.gl;var jg=jk.programMgr.useProgram("arrow");if(!jg.lastState.projMatrix){jh.uniformMatrix4fv(jg.uniforms.u_proj_matrix,false,jk.projMatrix);jg.lastState.projMatrix=true}if(jg.lastState.drawPart!==jl){jh.uniform1i(jg.uniforms.u_draw_part,jl);jg.lastState.drawPart=jl}if(jg.lastState.isFlat!==jk.isFlat){jh.uniform1i(jg.uniforms.u_flat,jk.isFlat);jg.lastState.isFlat=jk.isFlat}jh.uniformMatrix4fv(jg.uniforms.u_mv_matrix,false,jj.mvMatrix);var je=jk.tileScale;if(jk.mapZoom>=19){je*=1.8}else{je*=1.2}if(jg.lastState.scale!==je){jh.uniform1f(jg.uniforms.u_scale,je);jg.lastState.scale=je}jk._state.activeTexture(jh.TEXTURE4);T(jh,jk);if(!jg.uniforms.lastSampler){jh.uniform1i(jg.uniforms.u_image,4);jg.uniforms.lastSampler=true}jf.vao1.bind(jh,jg,jf.vertex,jf.element1);jh.drawElements(jh.TRIANGLES,jf.element1.length,jh.UNSIGNED_SHORT,0)}})();var it=(function(){return function(e,je,T,jh,jg){var ji=e.gl;var i=e.programMgr.useProgram("sky");ji.depthMask(false);ji.uniformMatrix4fv(i.uniforms.uPMatrix,false,e.projMatrix2D);ji.uniformMatrix4fv(i.uniforms.uMVMatrix,false,je);ji.uniform4fv(i.uniforms.uGroundColor,jg[0]);ji.uniform4fv(i.uniforms.uSkyColor,jg[1]||jg[0]);var jf=jh-T;jf=jf<0?0:jf;ji.uniform1f(i.uniforms.uHorizonY,jf);e.skyVAO.bind(ji,i,e.skyBuffer);ji.drawArrays(ji.TRIANGLES,0,e.skyBuffer.length);ji.depthMask(true)}})();function fz(ji,je){var T=ji.gl;var i=ji.programMgr.useProgram("debug");T.uniform4fv(i.uniforms.u_color,[1,0,0,1]);T.uniform1f(i.uniforms.u_opacity,1);T.uniformMatrix4fv(i.uniforms.u_proj_matrix,false,ji.projMatrix);T.uniformMatrix4fv(i.uniforms.u_mv_matrix,false,je.mvMatrix);ji.debugVAO.bind(T,i,ji.debugBuffer);T.drawArrays(T.LINE_STRIP,0,ji.debugBuffer.length);ji.debugVAO.unbind(T);var jh=mat4.create();jh=mat4.scale(jh,jh,[1,-1,1]);jh=mat4.multiply(jh,je.mvMatrix,jh);T.uniformMatrix4fv(i.uniforms.u_mv_matrix,false,jh);var e=je.tileInfo;var jk=je.tileInfo.col+"-"+je.tileInfo.row+"-"+je.tileInfo.zoom;var jf=iJ(jk,10,-10,0.5);var jg=new v(new Float32Array(jf),{alignment:1,components:2,members:[{name:"a_pos",components:2,offset:0,type:"Float32"}]},v.BufferType.VERTEX);var jj=new dp();jj.bind(T,i,jg);T.drawArrays(T.LINES,0,jg.length)}var bc=(function(){function jf(jn,jl,jm,jk,jg,ji,jh){var jj=jn.createTexture();jn.bindTexture(jn.TEXTURE_2D,jj);jn.pixelStorei(jn.UNPACK_FLIP_Y_WEBGL,true);jn.texImage2D(jn.TEXTURE_2D,0,jm||jn.RGBA,jm||jn.RGBA,jn.UNSIGNED_BYTE,jl);jn.texParameteri(jn.TEXTURE_2D,jn.TEXTURE_MAG_FILTER,jk||jn.LINEAR);jn.texParameteri(jn.TEXTURE_2D,jn.TEXTURE_MIN_FILTER,jg||jn.LINEAR);jn.texParameteri(jn.TEXTURE_2D,jn.TEXTURE_WRAP_S,ji||jn.CLAMP_TO_EDGE);jn.texParameteri(jn.TEXTURE_2D,jn.TEXTURE_WRAP_T,jh||jn.CLAMP_TO_EDGE);jn.bindTexture(jn.TEXTURE_2D,null);return jj}function T(jh,jj){var jg=new Image();jg.onload=function(){jh._smaaInfo.areaTexture=jf(jj,this,jj.RGB,jj.LINEAR,jj.LINEAR,null,null);if(jh._smaaInfo.areaTexture&&jh._smaaInfo.searchTexture){jh._smaaInfo.glDrawSMAAReady=true}};jg.src=i();var ji=new Image();ji.onload=function(){jh._smaaInfo.searchTexture=jf(jj,this,null,jj.NEAREST,jj.NEAREST,null,null);if(jh._smaaInfo.areaTexture&&jh._smaaInfo.searchTexture){jh._smaaInfo.glDrawSMAAReady=true}};ji.src=e()}function je(jg,jh){if(!jg._smaaInfo.textureBeginToLoad){T(jg,jh);jg._smaaInfo.textureBeginToLoad=true}}return{init:function(jg){jg._smaaInfo={areaTexture:null,searchTexture:null,textureBeginToLoad:false,glDrawSMAAReady:false}},loadTexture:je,draw:function(jj,ji,jl,jh,jm,jg){var jn=jj.gl;if(jj._smaaInfo.glDrawSMAAReady===false){return}jj._state.disableCap("blend");jn.bindFramebuffer(jn.FRAMEBUFFER,jh[1].framebuffer);var jk=jj.programMgr.useProgram("smaa1");ji.vao1.bind(jn,jk,ji.vertex);jn.uniform2fv(jk.uniforms.resolution,[1/jm,1/jg]);jn.uniformMatrix4fv(jk.uniforms.projectionMatrix,false,jj.projMatrix2D);jn.uniformMatrix4fv(jk.uniforms.modelViewMatrix,false,jl);jj._state.activeTexture(jn.TEXTURE1);jn.bindTexture(jn.TEXTURE_2D,jh[0].texture);jn.uniform1i(jk.uniforms.tDiffuse,1);jn.drawArrays(jn.TRIANGLES,0,ji.vertex.length);jn.bindFramebuffer(jn.FRAMEBUFFER,null);jn.bindFramebuffer(jn.FRAMEBUFFER,jh[2].framebuffer);jk=jj.programMgr.useProgram("smaa2");ji.vao2.bind(jn,jk,ji.vertex);jn.uniform2fv(jk.uniforms.resolution,[1/jm,1/jg]);jn.uniformMatrix4fv(jk.uniforms.projectionMatrix,false,jj.projMatrix2D);jn.uniformMatrix4fv(jk.uniforms.modelViewMatrix,false,jl);jj._state.activeTexture(jn.TEXTURE1);jn.bindTexture(jn.TEXTURE_2D,jh[1].texture);jn.uniform1i(jk.uniforms.tDiffuse,1);jj._state.activeTexture(jn.TEXTURE2);jn.bindTexture(jn.TEXTURE_2D,jj._smaaInfo.areaTexture);jn.uniform1i(jk.uniforms.tArea,2);jj._state.activeTexture(jn.TEXTURE3);jn.bindTexture(jn.TEXTURE_2D,jj._smaaInfo.searchTexture);jn.uniform1i(jk.uniforms.tSearch,3);jn.drawArrays(jn.TRIANGLES,0,ji.vertex.length);jn.bindFramebuffer(jn.FRAMEBUFFER,null);jk=jj.programMgr.useProgram("smaa3");ji.vao3.bind(jn,jk,ji.vertex);jn.uniform2fv(jk.uniforms.resolution,[1/jm,1/jg]);jn.uniformMatrix4fv(jk.uniforms.projectionMatrix,false,jj.projMatrix2D);jn.uniformMatrix4fv(jk.uniforms.modelViewMatrix,false,jl);jj._state.activeTexture(jn.TEXTURE1);jn.bindTexture(jn.TEXTURE_2D,jh[2].texture);jn.uniform1i(jk.uniforms.tDiffuse,1);jj._state.activeTexture(jn.TEXTURE2);jn.bindTexture(jn.TEXTURE_2D,jh[0].texture);jn.uniform1i(jk.uniforms.tColor,2);jn.drawArrays(jn.TRIANGLES,0,ji.vertex.length);jj._state.enableCap("blend")}};function i(){return"data:image/png;base64,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"}function e(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAIAAADiVupLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrs00EKgAAIRNEZ739mTQoiwmhRi4L/FiKiu9ERISkzbXdTVV3H4WhfOG6ehl1rNR7qDSF8hwkVcJXt+3A//I0Nv0GoCBUAAAAAAMA/LAIMAB+Dcg2OE2zsAAAAAElFTkSuQmCC"}})();var cU=(function(){function e(T,jf,i){var jg=T.gl;var je=T.programMgr.useProgram("overlayblock");i.vao1.bind(jg,je,i.vertex,i.element1);if(!je.lastState.projMatrix){jg.uniformMatrix4fv(je.uniforms.u_proj_matrix,false,T.projMatrix);je.lastState.projMatrix=true}var jh=T._camera._far||4000;if(je.lastState.cameraFar!==jh){jg.uniform1f(je.uniforms.u_camera_far,jh);je.lastState.cameraFar=jh}jg.uniformMatrix4fv(je.uniforms.u_mv_matrix,false,jf);jg.uniformMatrix4fv(je.uniforms.u_normal_matrix,false,T.normalMatrix);jg.drawElements(jg.TRIANGLES,i.element1.length,jg.UNSIGNED_SHORT,0)}return function(T,jf,i,je){je=je||{};e(T,jf.mvMatrix,i)}})();var i4=(function(){function e(T,jf,jh,jj,i,jg){if(i.length<=0){return}var ji=T.gl;var je=T.programMgr.useProgram("marker3d");i.vao.bind(ji,je,i.vertex);if(!je.lastState.projMatrix){ji.uniformMatrix4fv(je.uniforms.u_proj_matrix,false,T.projMatrix);je.lastState.projMatrix=true}ji.uniform1i(je.uniforms.u_use_texture,!!i.texture);if(i.texture){T._state.activeTexture(ji.TEXTURE7);ji.bindTexture(ji.TEXTURE_2D,i.texture);if(je.uniforms.lastSamper!==7){ji.uniform1i(je.uniforms.u_Sampler,7);je.uniforms.lastSamper=7}}ji.uniform3fv(je.uniforms.u_camera_pos_high,jh);ji.uniform3fv(je.uniforms.u_camera_pos_low,jj);ji.uniform3fv(je.uniforms.u_camera_pos_low,jj);ji.uniformMatrix4fv(je.uniforms.u_mv_matrix,false,jf);ji.drawArrays(ji.POINTS,0,i.vertex.length)}return function(T,jf,jg,jh,i,je){je=je||{};e(T,jf.mvMatrix,jg,jh,i,je)}})();var eA=(function(){function e(jp,jj,jm,jh,jo,jn,je){var jk=jp.gl;var ji=jp.programMgr.useProgram("groundoverlay");if(jn){var jg=jm.overlay;var T={fShader:jg._config.fomularC};ji=jp.programMgr.useProgram("groundpixeloverlay",T);if(ji.lastState.fHashcode!==jg.fHashcode){jp.programMgr.removeProgram("groundpixeloverlay");ji=jp.programMgr.useProgram("groundpixeloverlay",T);ji.lastState.fHashcode=jg.fHashcode}}if(ji.lastState.opacity!==jm.opacity){jk.uniform1f(ji.uniforms.u_opacity,jm.opacity);ji.lastState.opacity=jm.opacity}if(!ji.lastState.projMatrix){jk.uniformMatrix4fv(ji.uniforms.u_proj_matrix,false,jp.projMatrix);ji.lastState.projMatrix=true}jh.vao1.bind(jk,ji,jh.vertex,jh.element1);jp._state.activeTexture(jk.TEXTURE0);jk.bindTexture(jk.TEXTURE_2D,jo);jk.uniform1i(ji.uniforms.u_Sampler,0);if(jn){jp._state.activeTexture(jk.TEXTURE1);jk.bindTexture(jk.TEXTURE_2D,jn);jk.uniform1i(ji.uniforms.u_ColorMap,1);if(je){jp._state.activeTexture(jk.TEXTURE2);jk.bindTexture(jk.TEXTURE_2D,je);jk.uniform1i(ji.uniforms.u_Mask,2);jk.uniform1i(ji.uniforms.u_maskLoaded,1)}else{jk.uniform1i(ji.uniforms.u_maskLoaded,0)}var jf=jm.overlay._config.domain;jk.uniform2f(ji.uniforms.u_domain,jf[0],jf[1]);var jl=jm.overlay._config.clamp;jk.uniform2f(ji.uniforms.u_clamp,jl[0],jl[1]);var jr=jm.overlay._config.maskData;jk.uniform1f(ji.uniforms.u_maskData,jr);var jq=jm.overlay._config.noData;jk.uniform1f(ji.uniforms.u_noData,jq)}jk.uniformMatrix4fv(ji.uniforms.u_mv_matrix,false,jj);jk.drawElements(jk.TRIANGLES,jh.element1.length,jk.UNSIGNED_SHORT,0)}return function i(je,jj,jh,T,ji,jg,jk,jf){jf=jf||{};e(je,jj.mvMatrix,jh,T,ji,jg,jk)}})();function iz(jj,jo,kq){var jR=new jj.Int8Array(kq);var jQ=new jj.Int16Array(kq);var jP=new jj.Int32Array(kq);var jO=new jj.Uint8Array(kq);var jM=new jj.Uint16Array(kq);var jL=new jj.Uint32Array(kq);var jK=new jj.Float32Array(kq);var jJ=new jj.Float64Array(kq);var jH=jo.DYNAMICTOP_PTR|0;var jG=jo.tempDoublePtr|0;var jF=jo.ABORT|0;var jE=jo.STACKTOP|0;var jD=jo.STACK_MAX|0;var jB=jo.gb|0;var jA=jo.fb|0;var jz=0;var jy=0;var jx=0;var jw=0;var jv=jj.NaN,ju=jj.Infinity;var jt=0,js=0,jr=0,jq=0,jp=0;var kn=0;var km=jj.Math.floor;var kl=jj.Math.abs;var kk=jj.Math.sqrt;var ki=jj.Math.pow;var kh=jj.Math.cos;var kg=jj.Math.sin;var kf=jj.Math.tan;var ke=jj.Math.acos;var kc=jj.Math.asin;var kb=jj.Math.atan;var j9=jj.Math.atan2;var j8=jj.Math.exp;var j7=jj.Math.log;var j6=jj.Math.ceil;var j4=jj.Math.imul;var j3=jj.Math.min;var j2=jj.Math.max;var j1=jj.Math.clz32;var j0=jo.abort;var jZ=jo.assert;var jY=jo.enlargeMemory;var jX=jo.getTotalMemory;var jW=jo.abortOnCannotGrowMemory;var jV=jo.setTempRet0;var jU=jo.getTempRet0;var jT=0;function kv(i){i=i|0;var e=0;e=jE;jE=jE+i|0;jE=jE+15&-16;return e|0}function kr(){return jE|0}function j5(e){e=e|0;jE=e}function jC(i,e){i=i|0;e=e|0;jE=i;jD=e}function jk(i,e){i=i|0;e=e|0;if(!jz){jz=i;jy=e}}function jf(){return jB+1892368|0}function ky(){return jB+1990672|0}function ks(){return jB+0|0}function kd(){return jB+4374544|0}function jI(){return jB+1998864|0}function jl(){return jB+1998864+(jP[jB+32768>>2]<<1)|0}function jg(){return jB+2523152|0}function kA(){return jB+2523152+((jP[jB+32772>>2]|0)*20|0)|0}function ku(){return jP[jB+32772>>2]|0}function kj(){jP[jB+32768>>2]=0;jP[jB+32772>>2]=0;return}function jN(){return jB+32776|0}function jm(){return jB+3833872|0}function jh(){jP[jB+40968>>2]=0;jP[jB+40972>>2]=0;return}function kB(){return jB+3842064|0}function kw(){return jB+3842064+(jP[jB+40968>>2]<<1)|0}function ko(){return jB+40976|0}function jS(){return jB+40976+((jP[jB+40972>>2]|0)*28|0)|0}function jn(){return jP[jB+40972>>2]|0}function ji(){return jB+1875984|0}function je(T,i){T=T|0;i=i|0;var kE=0,kD=0,kC=0,ka=0;kD=(i|0)>0;if(kD){kE=0;do{kC=jB+1875984+(kE<<2)|0;jK[kC>>2]=+jK[kC>>2]/100;kE=kE+1|0}while((kE|0)!=(i|0))}if((i|0)>=(T|0)|kD^1){return}else{kE=i}do{kD=0;do{ka=kD+kE|0;kC=jB+1875984+(ka<<2)|0;jK[kC>>2]=+jK[jB+1875984+(ka-i<<2)>>2]+ +jK[kC>>2]/100;kD=kD+1|0}while((kD|0)!=(i|0));kE=kE+i|0}while((kE|0)<(T|0));return}function kx(k3,k2,k1,k0,kZ,kY,kX,kW,kV,kU,kT,kS,kQ){k3=k3|0;k2=k2|0;k1=k1|0;k0=k0|0;kZ=kZ|0;kY=+kY;kX=kX|0;kW=kW|0;kV=kV|0;kU=kU|0;kT=kT|0;kS=kS|0;kQ=kQ|0;var kO=0,kM=0,kL=0,kJ=0,kH=0,kF=0,kD=0,ka=0,T=0,kR=0,kP=0,kN=0,kK=0,kI=0,kG=0,kE=0,kC=0;kI=(k3|0)/2|0;kG=kT<<24>>24==1;if(kG){jQ[jB+4366352>>1]=0;if((kU|0)>2){kO=0;kM=2;do{kC=+(jP[jB+0+(kM<<2)>>2]|0);kE=+(jP[jB+0+((kM|1)<<2)>>2]|0);kO=(~~(+kk(+(kC*kC+kE*kE))/10)<<16>>16)+(kO<<16>>16)|0;jQ[jB+4366352+(((kM|0)/2|0)<<1)>>1]=kO;kM=kM+2|0}while((kM|0)<(kU|0));kO=4}}else{kO=4}if((kO|0)==4?(kU|0)>2:0){kO=2;kM=jP[jB+0>>2]|0;do{kN=jB+0+(kO<<2)|0;kM=(jP[kN>>2]|0)+kM|0;jP[kN>>2]=kM;kN=kO|1;kK=jB+0+(kN<<2)|0;jP[kK>>2]=(jP[kK>>2]|0)+(jP[jB+0+(kN+-2<<2)>>2]|0);kO=kO+2|0}while((kO|0)<(kU|0))}if(kV<<24>>24){jQ[jB+1892368>>1]=jQ[jB+1892368+8>>1]|0;jQ[jB+1892368+2>>1]=jQ[jB+1892368+10>>1]|0;jQ[jB+1892368+4>>1]=jQ[jB+1892368+12>>1]|0;jQ[jB+1892368+6>>1]=jQ[jB+1892368+14>>1]|0;kK=kI<<1;jQ[jB+1892368+(kK+-2<<1)>>1]=jQ[jB+1892368+(kK+-6<<1)>>1]|0;jQ[jB+1892368+(kK+-1<<1)>>1]=jQ[jB+1892368+(kK+-5<<1)>>1]|0;jQ[jB+1892368+(kK+-4<<1)>>1]=jQ[jB+1892368+(kK+-8<<1)>>1]|0;jQ[jB+1892368+(kK+-3<<1)>>1]=jQ[jB+1892368+(kK+-7<<1)>>1]|0}kN=kQ-kS|0;kK=jP[jB+32772>>2]|0;if((k3|0)<=1){kp(kN,kK);return}kR=(kX|0)==0;kP=kI+-2|0;kF=kT<<24>>24==2;kD=kI+-1|0;ka=kI+-4|0;T=kS+1|0;kH=kQ+-1|0;kL=0;kO=0;kJ=kK;do{if((kL|0)>=4){if((ka|0)>(kL|0)){kU=T+((kL+-4|0)/5|0)|0}else{kU=kH}}else{kU=kS}if(!kR){kO=jQ[jB+1990672+(kU<<1)>>1]|0}k3=kU<<1;kQ=((jP[jB+0+(k3<<2)>>2]|0)/10|0)&65535;k3=((jP[jB+0+((k3|1)<<2)>>2]|0)/10|0)&65535;kT=kL<<1;kX=~~(+(jQ[jB+1892368+(kT<<1)>>1]|0)*kY/10);kT=~~(+(jQ[jB+1892368+((kT|1)<<1)>>1]|0)*kY/10);jR:do{if(!((kL|0)==0|(kL|0)==(kP|0))){if((kL|0)==1|(kL|0)==(kD|0)){kV=-1}else{kM=kL+-2|0;switch((kM|0)%5|0|2|0){case 2:kV=1;break jR;case 3:kV=-1;break jR;default:kV=jR[((kM|0)/5|0)+(jB+4374544)>>0]|0;break jR}}}else{kV=1}}while(0);if(kG){kM=jQ[jB+4366352+(kU<<1)>>1]|0}else{kM=kF?((kU|0)==0?0:10):0}kU=kJ;kJ=kJ+1|0;jQ[jB+2523152+(kU*20|0)>>1]=kQ;jQ[jB+2523152+(kU*20|0)+2>>1]=k3;jQ[jB+2523152+(kU*20|0)+4>>1]=kX;jQ[jB+2523152+(kU*20|0)+6>>1]=kT;jR[jB+2523152+(kU*20|0)+8>>0]=k2;jR[jB+2523152+(kU*20|0)+9>>0]=k1;jR[jB+2523152+(kU*20|0)+10>>0]=k0;jR[jB+2523152+(kU*20|0)+11>>0]=kZ;jQ[jB+2523152+(kU*20|0)+12>>1]=kV;jQ[jB+2523152+(kU*20|0)+14>>1]=kO;jQ[jB+2523152+(kU*20|0)+16>>1]=kW;jQ[jB+2523152+(kU*20|0)+18>>1]=kM;kL=kL+1|0}while((kL|0)<(kI|0));jP[jB+32772>>2]=kJ;kp(kN,kK);return}function kp(kN,kM){kN=kN|0;kM=kM|0;var kL=0,kK=0,kJ=0,kI=0,kH=0,kG=0,kF=0,kE=0,kD=0,kC=0,ka=0,T=0;kE=kN+-1|0;kF=kN+-2|0;kG=0;kL=1;kK=1;kH=jP[jB+32768>>2]|0;while(1){kN=kL+1|0;kC=kN+kM|0;kN=(kN&1|0)==0;kI=kK<<24>>24!=0;ka=kC+-2|0;kD=kL+kM|0;kJ=kI?ka:kD;ka=kI?kD:ka;jQ[jB+1998864+(kH<<1)>>1]=kN?kJ:ka;jQ[jB+1998864+(kH+1<<1)>>1]=kN?ka:kJ;jQ[jB+1998864+(kH+2<<1)>>1]=kC;kC=kL+2|0;kJ=kC+kM|0;kC=(kC&1|0)==0;ka=kJ+-1|0;kN=kI?kD:ka;kD=kI?ka:kD;jQ[jB+1998864+(kH+3<<1)>>1]=kC?kN:kD;jQ[jB+1998864+(kH+4<<1)>>1]=kC?kD:kN;kN=kH+6|0;jQ[jB+1998864+(kH+5<<1)>>1]=kJ;if((kG|0)>=(kE|0)){break}kC=kL+3|0;kJ=kC+kM|0;kC=(kC&1|0)==0;kD=kJ+-2|0;T=kJ+-1|0;ka=kI?kD:T;kD=kI?T:kD;jQ[jB+1998864+(kN<<1)>>1]=kC?ka:kD;jQ[jB+1998864+(kH+7<<1)>>1]=kC?kD:ka;jQ[jB+1998864+(kH+8<<1)>>1]=kJ;kJ=kL+4|0;ka=kJ+kM|0;kD=(kJ&1|0)==0;kC=ka+-2|0;T=ka+-1|0;kN=kI?kC:T;kC=kI?T:kC;jQ[jB+1998864+(kH+9<<1)>>1]=kD?kN:kC;jQ[jB+1998864+(kH+10<<1)>>1]=kD?kC:kN;kN=kH+12|0;jQ[jB+1998864+(kH+11<<1)>>1]=ka;if((kG|0)==(kF|0)){kL=kJ}else{kL=kL+5|0;T=kL+kM|0;kD=(kL&1|0)==0;kC=T+-2|0;kJ=T+-1|0;ka=kI?kC:kJ;kC=kI?kJ:kC;jQ[jB+1998864+(kN<<1)>>1]=kD?ka:kC;jQ[jB+1998864+(kH+13<<1)>>1]=kD?kC:ka;jQ[jB+1998864+(kH+14<<1)>>1]=T;kK=kK<<24>>24==0&1;kN=kH+15|0}kG=kG+1|0;kH=kN}jP[jB+32768>>2]=kN;return}function kz(kY,kX,kW,kV,kU,kT,kS,kR,kQ,kP,kN){kY=kY|0;kX=kX|0;kW=+kW;kV=kV|0;kU=kU|0;kT=kT|0;kS=kS|0;kR=kR|0;kQ=kQ|0;kP=kP|0;kN=kN|0;var kL=0,kJ=0,kH=0,kF=0,kD=0,kC=0,ka=0,T=0,e=0,kO=0,kM=0,kK=0,kI=0,kG=0,kE=0;if((kY|0)>2){kL=2;kJ=jP[jB+32776>>2]|0;do{kF=jB+32776+(kL<<2)|0;kJ=(jP[kF>>2]|0)+kJ|0;jP[kF>>2]=kJ;kF=kL|1;kD=jB+32776+(kF<<2)|0;jP[kD>>2]=(jP[kD>>2]|0)+(jP[jB+32776+(kF+-2<<2)>>2]|0);kL=kL+2|0}while((kL|0)<(kY|0))}kF=jP[jB+40972>>2]|0;kD=(kY|0)>0;if(kD){kJ=kF+((kY+-1|0)>>>1)|0;kL=0;kH=kF;while(1){kC=+(jP[jB+32776+((kL|1)<<2)>>2]|0)/100;jK[jB+40976+(kH*28|0)>>2]=+(jP[jB+32776+(kL<<2)>>2]|0)/100;jK[jB+40976+(kH*28|0)+4>>2]=kC;jK[jB+40976+(kH*28|0)+8>>2]=kW;jK[jB+40976+(kH*28|0)+12>>2]=0;jK[jB+40976+(kH*28|0)+16>>2]=0;jK[jB+40976+(kH*28|0)+20>>2]=1;jR[jB+40976+(kH*28|0)+24>>0]=kV;jR[jB+40976+(kH*28|0)+25>>0]=kU;jR[jB+40976+(kH*28|0)+26>>0]=kT;jR[jB+40976+(kH*28|0)+27>>0]=kS;kL=kL+2|0;if((kL|0)>=(kY|0)){break}else{kH=kH+1|0}}kL=kJ+1|0;jP[jB+40972>>2]=kL}else{kL=kF}if((kX|0)>0){kV=jP[jB+40968>>2]|0;kJ=0;kH=kV;while(1){jQ[jB+3842064+(kH<<1)>>1]=(jM[jB+3833872+(kJ<<1)>>1]|0)+kF;kJ=kJ+1|0;if((kJ|0)==(kX|0)){break}else{kH=kH+1|0}}jP[jB+40968>>2]=kV+kX}if(!kD){return}kV=kY+-2|0;kH=jP[jB+40968>>2]|0;kT=(kY+-1|0)>>>1;kU=kL+(kT<<2)|0;kT=kH+(kT*6|0)|0;kJ=0;while(1){kK=+(jP[jB+32776+(kJ<<2)>>2]|0)/100;kM=+(jP[jB+32776+((kJ|1)<<2)>>2]|0)/100;kX=kJ;kJ=kJ+2|0;kS=(kX|0)==(kV|0);kO=+(jP[jB+32776+((kS?0:kJ)<<2)>>2]|0)/100;e=+(jP[jB+32776+((kS?1:kX+3|0)<<2)>>2]|0)/100;kG=kO-kK;kC=e-kM;kI=kK-kK;kE=kM-kM;T=kC*kW-kE*0;ka=kI*0-kG*kW;kC=kE*kG-kI*kC;kX=kL+1|0;jK[jB+40976+(kL*28|0)>>2]=kK;jK[jB+40976+(kL*28|0)+4>>2]=kM;jK[jB+40976+(kL*28|0)+8>>2]=0;jK[jB+40976+(kL*28|0)+12>>2]=T;jK[jB+40976+(kL*28|0)+16>>2]=ka;jK[jB+40976+(kL*28|0)+20>>2]=kC;jR[jB+40976+(kL*28|0)+24>>0]=kR;jR[jB+40976+(kL*28|0)+25>>0]=kQ;jR[jB+40976+(kL*28|0)+26>>0]=kP;jR[jB+40976+(kL*28|0)+27>>0]=kN;kS=kL+2|0;jK[jB+40976+(kX*28|0)>>2]=kK;jK[jB+40976+(kX*28|0)+4>>2]=kM;jK[jB+40976+(kX*28|0)+8>>2]=kW;jK[jB+40976+(kX*28|0)+12>>2]=T;jK[jB+40976+(kX*28|0)+16>>2]=ka;jK[jB+40976+(kX*28|0)+20>>2]=kC;jR[jB+40976+(kX*28|0)+24>>0]=kR;jR[jB+40976+(kX*28|0)+25>>0]=kQ;jR[jB+40976+(kX*28|0)+26>>0]=kP;jR[jB+40976+(kX*28|0)+27>>0]=kN;kD=kL+3|0;jK[jB+40976+(kS*28|0)>>2]=kO;jK[jB+40976+(kS*28|0)+4>>2]=e;jK[jB+40976+(kS*28|0)+8>>2]=0;jK[jB+40976+(kS*28|0)+12>>2]=T;jK[jB+40976+(kS*28|0)+16>>2]=ka;jK[jB+40976+(kS*28|0)+20>>2]=kC;jR[jB+40976+(kS*28|0)+24>>0]=kR;jR[jB+40976+(kS*28|0)+25>>0]=kQ;jR[jB+40976+(kS*28|0)+26>>0]=kP;jR[jB+40976+(kS*28|0)+27>>0]=kN;jK[jB+40976+(kD*28|0)>>2]=kO;jK[jB+40976+(kD*28|0)+4>>2]=e;jK[jB+40976+(kD*28|0)+8>>2]=kW;jK[jB+40976+(kD*28|0)+12>>2]=T;jK[jB+40976+(kD*28|0)+16>>2]=ka;jK[jB+40976+(kD*28|0)+20>>2]=kC;jR[jB+40976+(kD*28|0)+24>>0]=kR;jR[jB+40976+(kD*28|0)+25>>0]=kQ;jR[jB+40976+(kD*28|0)+26>>0]=kP;jR[jB+40976+(kD*28|0)+27>>0]=kN;kF=kL&65535;jQ[jB+3842064+(kH<<1)>>1]=kF;jQ[jB+3842064+(kH+1<<1)>>1]=kS;kD=kD&65535;jQ[jB+3842064+(kH+2<<1)>>1]=kD;jQ[jB+3842064+(kH+3<<1)>>1]=kF;jQ[jB+3842064+(kH+4<<1)>>1]=kD;jQ[jB+3842064+(kH+5<<1)>>1]=kX;if((kJ|0)>=(kY|0)){break}else{kH=kH+6|0;kL=kL+4|0}}jP[jB+40972>>2]=kU+4;jP[jB+40968>>2]=kT+6;return}function kt(){}return{_reset_line:kj,_get_block_index_start:kB,setThrew:jk,_get_line_turnings_address:kd,_get_block_triangle_indices_address:jm,_get_line_vertex_count:ku,stackAlloc:kv,_get_block_vertex_count:jn,_get_block_vertex_start:ko,_get_line_vertex_end:kA,_get_feature_points_address:ji,stackRestore:j5,_get_block_index_end:kw,_get_line_altitudes_address:ky,_get_block_vertex_end:jS,stackSave:kr,runPostSets:kt,_get_line_vertex_start:jg,_parse_points:je,_get_line_points_address:ks,establishStackSpace:jC,_get_line_index_end:jl,_append_line_data:kx,_get_line_index_start:jI,_append_block_data:kz,_get_block_points_address:jN,_reset_block:jh,_get_line_data_address:jf}}var dQ;var iY;var h4;var aY;var fT;var di;var aa;var e7;var gj;var fj;var de;var bQ;var he;var iB;var ce;var aD;var eS;var fA;if(!ArrayBuffer.prototype.slice){ArrayBuffer.prototype.slice=function(T,i){if(T===undefined){T=0}if(i===undefined){i=this.byteLength}T=Math.floor(T);i=Math.floor(i);if(T<0){T+=this.byteLength}if(i<0){i+=this.byteLength}T=Math.min(Math.max(0,T),this.byteLength);i=Math.min(Math.max(0,i),this.byteLength);if(i-T<=0){return new ArrayBuffer(0)}var e=new ArrayBuffer(i-T);var jf=new Uint8Array(e);var je=new Uint8Array(this,T,i-T);jf.set(je);return e}}function f0(i){var e=70;if(dQ){i&&i();return}dQ=new ArrayBuffer(e*65536);h4=new Float32Array(dQ);aY=new Int32Array(dQ);iY=new Int8Array(dQ);fT=new Int16Array(dQ);di=new Uint16Array(dQ);aa=self.createWasmModule(self,{DYNAMICTOP_PTR:0,tempDoublePtr:0,ABORT:0,STACKTOP:0,STACK_MAX:0,gb:0,fb:0},dQ);i&&i()}function df(e){if(!e7){e7=aa._get_line_data_address()>>1}fT.set(e,e7)}function bf(e){if(!gj){gj=aa._get_line_altitudes_address()>>1}fT.set(e,gj)}function go(e){if(!fj){fj=aa._get_line_points_address()>>2}aY.set(e,fj)}function bE(e){if(!de){de=aa._get_line_turnings_address()}iY.set(e,de)}function cC(e){if(!iB){iB=aa._get_block_points_address()>>2}aY.set(e,iB)}function Q(e){if(!ce){ce=aa._get_block_triangle_indices_address()>>1}di.set(e,ce)}var iN={parseFeature:function(i,T){var e=i.length;T=T||2;if(!fA){fA=aa._get_feature_points_address()>>2}h4.set(i,fA);aa._parse_points(e,T);return new Float32Array(dQ.slice(fA<<2,(fA+e)<<2))},getBlockVertices:function(){if(!eS){eS=aa._get_block_vertex_start()}return new Float32Array(dQ.slice(eS,aa._get_block_vertex_end()))},getBlockIndices:function(){if(!aD){aD=aa._get_block_index_start()}return new Uint16Array(dQ.slice(aD,aa._get_block_index_end()))},getBlockVertexCount:function(){return aa._get_block_vertex_count()},getLineVertices:function(){if(!he){he=aa._get_line_vertex_start()}return new Float32Array(dQ.slice(he,aa._get_line_vertex_end()))},getLineIndices:function(){if(!bQ){bQ=aa._get_line_index_start()}return new Uint16Array(dQ.slice(bQ,aa._get_line_index_end()))},getLineVertexCount:function(){return aa._get_line_vertex_count()},appendLineData:function(jh,jg,je,i,jk,e,jm,ji,jl,T,jf){var jj=0;if(i){jj=i.length;bf(i)}if(ji&&ji.length){bE(ji)}jk=jk||0;T=T||0;jf=jf||jm.length/2;df(jh);go(jm);aa._append_line_data(jh.length,jg[0],jg[1],jg[2],jg[3],je,jj,jk,e?1:0,jm.length,jl,T,jf)},resetLine:function(){aa._reset_line()},appendBlockData:function(jl,jj,jh,jg,jk,e,T,ji,i,je,jf){cC(jl);Q(jj);return aa._append_block_data(jl.length,jj.length,jh,jg,jk,e,T,ji,i,je,jf)},resetBlock:function(){aa._reset_block()},initWasmModule:f0};var a9={block:[["precision highp float;attribute vec4 a_pos;attribute vec4 a_normal;attribute vec4 a_color;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_normal_matrix;uniform vec3 u_side_light_dir;uniform bool u_is_normal;varying vec4 _;varying float a;const vec3 b=vec3(0.06,0.06,0.06);vec3 c=vec3(0.1,0.1,0.1);void main(){vec4 d=u_proj_matrix*u_mv_matrix*a_pos;gl_Position=d;a=-1./500.-a_pos.z/100.;gl_Position.z=gl_Position.z+a;if(!u_is_normal){c=vec3(0.2,0.2,0.2);}if(u_is_normal&&a_normal==vec4(0.,0.,1.,1.)){_=a_color;}else{vec3 e=a_color.rgb;vec3 f=normalize(vec3(u_normal_matrix*a_normal));vec4 g=u_mv_matrix*vec4(0,1,0,0);vec3 h=normalize(g.xyz);float i=max(0.,dot(f,-h));vec4 j=u_mv_matrix*vec4(u_side_light_dir,0);vec3 k=normalize(j.xyz);float l=max(0.,dot(f,-k));if(a_pos.z<2.){float m=(2.-a_pos.z)/5.;l=l-m;}_=vec4(e+e*c*l+e*b*i,a_color.a);}}",""].join("\\n"),["precision highp float;varying vec4 _;varying float a;uniform float u_camera_far;float b=500.0;void main(){float c=(gl_FragCoord.z/gl_FragCoord.w-a);float d=_.a;if(c>u_camera_far-b){d=d*(u_camera_far-c)/b;if(d<=0.){discard;}}gl_FragColor=vec4(_.rgb,d);}",""].join("\\n")],shadow:[["precision highp float;attribute vec3 a_pos;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform vec3 u_light_dir;varying vec4 _;varying float a;const vec4 b=vec4(153.0/255.0,157.0/255.0,170.0/255.0,.15);void main(){float c=u_light_dir.x/u_light_dir.z*a_pos.z;float d=u_light_dir.y/u_light_dir.z*a_pos.z;vec2 e=vec2(a_pos.x+c,a_pos.y+d);a=a_pos.z;gl_Position=u_proj_matrix*u_mv_matrix*vec4(e,0,1);_=b;}",""].join("\\n"),["precision highp float;varying vec4 _;varying float a;uniform float u_camera_far;float b=500.0;void main(){if(a<1.){discard;}else{float c=gl_FragCoord.z/gl_FragCoord.w;float d=_.a;if(c>u_camera_far-b){d=d*(u_camera_far-c)/b;if(d<=0.){discard;}}gl_FragColor=vec4(_.rgb,d);}}",""].join("\\n")],arrow:[["precision highp float;attribute vec3 a_pos;attribute vec2 a_diff;attribute vec2 a_normal;attribute vec2 a_tex;attribute float a_layer_index;varying vec2 _;varying float a;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform float u_scale;uniform bool u_flat;void main(){float b=a_pos.z;vec2 c=(a_pos.xy+a_diff*u_scale)+normalize(a_normal)*2.5*u_scale;float d=-a_layer_index/500.-b/100.;if(u_flat){a=0.;gl_Position=u_proj_matrix*u_mv_matrix*vec4(c,0.,1);vec4 e=u_proj_matrix*u_mv_matrix*vec4(c,b/10.,1);gl_Position.z=e.z+d;}else{a=b;gl_Position=u_proj_matrix*u_mv_matrix*vec4(c,b,1);gl_Position.z=gl_Position.z+d;}_=a_tex;}",""].join("\\n"),["precision mediump float;uniform sampler2D u_image;uniform int u_draw_part;varying vec2 _;varying float a;void main(){if(u_draw_part==1){if(a>0.){discard;}}else if(u_draw_part==2){if(a==0.){discard;}}gl_FragColor=texture2D(u_image,_);}",""].join("\\n")],grid:[["precision highp float;attribute vec2 a_pos;attribute vec2 a_tex;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform float u_tex_scale;varying vec2 _;void main(){vec4 a=u_proj_matrix*u_mv_matrix*vec4(a_pos,0,1);gl_Position=a;_=a_tex*u_tex_scale;}",""].join("\\n"),["precision mediump float;uniform sampler2D u_image;varying vec2 _;void main(){gl_FragColor=texture2D(u_image,_);}",""].join("\\n")],line:[["attribute vec2 a_pos;attribute vec2 a_normal;attribute vec4 a_color;attribute vec4 a_data;uniform mat4 u_mv_matrix;uniform mat4 u_proj_matrix;uniform float u_scale;uniform bool u_flat;varying float _;varying vec4 a;varying float b;varying float c;varying float d;const float e=0.5;void main(){vec2 f=a_normal/10.;_=a_data.x;float g=a_data.y/100.;float h=a_data.z;float i=length(f);float j=1.+e/i;b=1.-(2.*e/(i+e));a=a_color;d=-h/500.-g/100.;vec2 k=a_pos/10.+f*j*u_scale;if(u_flat){gl_Position=u_proj_matrix*u_mv_matrix*vec4(k,0.,1);vec4 l=u_proj_matrix*u_mv_matrix*vec4(k,g/10.,1);gl_Position.z=l.z+d;c=0.;}else{gl_Position=u_proj_matrix*u_mv_matrix*vec4(k,g,1.);gl_Position.z=gl_Position.z+d;c=g;}}",""].join("\\n"),["precision highp float;uniform int u_draw_part;varying float _;varying vec4 a;varying float b;varying float c;varying float d;uniform float u_camera_far;float e=500.0;void main(){if(u_draw_part==1){if(c>0.){discard;}}else if(u_draw_part==2){if(c==0.){discard;}}vec4 f;if(abs(_)>b){float g=1.-(abs(_)-b)/(1.-b);f=vec4(a.rgb,g*a.a);}else{f=a;}float g=(gl_FragCoord.z/gl_FragCoord.w-d);float h=f.a;if(g>u_camera_far-e){h=h*(u_camera_far-g)/e;if(h<=0.){discard;}}f.a=h;gl_FragColor=f;}",""].join("\\n")],dash:[["attribute vec2 a_pos;attribute vec2 a_normal;attribute vec4 a_color;attribute vec4 a_data;uniform mat4 u_mv_matrix;uniform mat4 u_proj_matrix;uniform float u_scale;uniform float u_dash;uniform float u_step_zoom;uniform float u_tile_zoom;uniform bool u_is_single;uniform bool u_flat;varying float _;varying vec2 a;varying vec4 b;varying float c;varying float d;varying float e;const float f=0.2;void main(){vec2 g=a_normal/10.;_=a_data.x;float h=a_data.y/100.;float i=a_data.z;float j=a_data.w/10.;float k=length(g);float l=1.+f/k;c=1.-(2.*f/(k+f));b=vec4(a_color.rgb,floor(a_color.a/10.));float m=0.;if(u_is_single){m=j;}else{m=j/u_dash/pow(2.,u_tile_zoom-u_step_zoom);}if(_==1.){a=vec2(1.,m);}else{a=vec2(0.,m);}e=-i/500.-h/100.;vec2 n=a_pos/10.+g*l*u_scale;if(u_flat){gl_Position=u_proj_matrix*u_mv_matrix*vec4(n,0.,1);vec4 o=u_proj_matrix*u_mv_matrix*vec4(n,h/10.,1);gl_Position.z=o.z+e;d=0.;}else{gl_Position=u_proj_matrix*u_mv_matrix*vec4(n,h,1.);gl_Position.z=gl_Position.z+e;d=h;}}",""].join("\\n"),["precision highp float;uniform sampler2D u_image;uniform float u_dash;uniform int u_draw_part;varying vec4 b;varying float _;varying vec2 a;varying float d;varying float e;varying float c;uniform float u_camera_far;float f=500.0;void main(){if(u_draw_part==1){if(d>0.){discard;}}else if(u_draw_part==2){if(d==0.){discard;}}vec4 g=texture2D(u_image,a);float h=g.a+b.a;vec4 i;if(abs(_)>c){float j=1.-(abs(_)-c)/(1.-c);i=vec4(g.rgb*j,j*h);}else{i=g;}float j=(gl_FragCoord.z/gl_FragCoord.w-e);float k=i.a;if(j>u_camera_far-f){k=k*(u_camera_far-j)/f;if(k<=0.){discard;}}i.a=k;gl_FragColor=i;}",""].join("\\n")],fill:[["precision highp float;attribute vec3 a_pos;attribute vec4 a_color;attribute float a_layer_index;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform bool u_flat;varying vec4 _;varying float a;varying float b;void main(){float c=a_pos.z;b=-a_layer_index/500.-c/100.;if(u_flat){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,0.,1);vec4 d=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,c/10.,1);gl_Position.z=d.z+b;a=0.;}else{gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,c,1);gl_Position.z=gl_Position.z+b;a=c;}_=a_color;}",""].join("\\n"),["precision highp float;uniform int u_draw_part;varying vec4 _;varying float a;varying float b;uniform float u_camera_far;float c=500.0;void main(){if(u_draw_part==1){if(a>0.){discard;}}else if(u_draw_part==2){if(a==0.){discard;}}float d=(gl_FragCoord.z/gl_FragCoord.w-b);float e=_.a/255.;if(d>u_camera_far-c){e=e*(u_camera_far-d)/c;if(e<=0.){discard;}}gl_FragColor=vec4(_.r/255.,_.g/255.,_.b/255.,e);}",""].join("\\n")],debug:[["precision highp float;attribute vec2 a_pos;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;void main(){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos,step(32767.,a_pos.x),1);}",""].join("\\n"),["precision mediump float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}",""].join("\\n")],symbol:[["precision highp float;attribute vec4 aPosition;attribute float aZLevel;attribute vec2 aExtend;attribute vec2 aLoopOffset;attribute vec2 aVertexTextureCoord;varying vec2 _;varying vec2 a;varying vec3 b;uniform bool uUseRound;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;uniform mat4 uOrthoPMatrix;uniform vec2 uMapHalfSize;uniform float uMapZoom;uniform vec3 uCameraPosHigh;uniform vec3 uCameraPosLow;uniform vec3 uFixPositionInfo;void main(){vec4 c;vec3 d=vec3(aPosition.xy,aZLevel);vec3 e=vec3(aPosition.zw,aZLevel);a=vec2(1.,1.);d.x+=aLoopOffset.x;e.x+=aLoopOffset.y;vec4 f=uPMatrix*uMVMatrix*vec4((d-uCameraPosHigh)+(e-uCameraPosLow),1.);float g=f[3]+100.;if((f[0]<-g||f[0]>g||f[1]<-g||f[1]>g||f[2]<-g||f[2]>g)&&uFixPositionInfo[0]!=1.){a=vec2(0.,0.);}vec3 h=vec3(f[0]/f[3],f[1]/f[3],f[2]/f[3]);vec3 i=vec3((h[0]+1.)*uMapHalfSize[0],(1.-h[1])*uMapHalfSize[1],0.5*h[2]+0.5);if(uFixPositionInfo[0]==1.){float j=uMapHalfSize[0]*2.;if(i[0]>j+20.){d.x-=uFixPositionInfo[1];e.x-=uFixPositionInfo[2];f=uPMatrix*uMVMatrix*vec4((d-uCameraPosHigh)+(e-uCameraPosLow),1.);h=vec3(f[0]/f[3],f[1]/f[3],f[2]/f[3]);i=vec3((h[0]+1.)*uMapHalfSize[0],(1.-h[1])*uMapHalfSize[1],0.5*h[2]+0.5);}else if(i[0]<-20.){d.x+=uFixPositionInfo[1];e.x+=uFixPositionInfo[2];f=uPMatrix*uMVMatrix*vec4((d-uCameraPosHigh)+(e-uCameraPosLow),1.);h=vec3(f[0]/f[3],f[1]/f[3],f[2]/f[3]);i=vec3((h[0]+1.)*uMapHalfSize[0],(1.-h[1])*uMapHalfSize[1],0.5*h[2]+0.5);}}c=vec4(i.xy,-100.,1.);c.y=uMapHalfSize[1]*2.-c.y;if(uUseRound==true){c.x=floor(c.x+.5);c.y=floor(c.y+.5);}c.x+=aExtend.x;c.y+=aExtend.y;b=vec3(1.,i.z,1./f[3]);gl_Position=uOrthoPMatrix*c;_=vec2(aVertexTextureCoord.xy);}",""].join("\\n"),["precision highp float;uniform sampler2D uSampler;uniform bool uForRenderPNG8Text;uniform bool uHighlight;uniform float uCameraFar;float c=500.0;varying vec2 _;varying vec2 a;varying vec3 b;void main(){if(a[0]==0.){discard;return;}vec4 d=texture2D(uSampler,_);if(uForRenderPNG8Text==true&&d.a<0.7){d.a=0.;}if(uHighlight==true){float e=d.a;if(e!=0.){float f=d.r;float g=d.g;float h=d.b;float i=floor((f*255.+g*255.+h*255.)/3.+0.5);float j=i-90.;if(j<0.){j=0.;}d.r=(51.+j*1.3)/255.;d.g=(133.+j*0.8)/255.;d.b=1.;}}float e=(b[1]/b[2]);float f=1.;if(e>uCameraFar-c){f=(uCameraFar-e)/c;if(f<=0.){discard;}}gl_FragColor=d*f;}",""].join("\\n")],symbolline:[["precision highp float;attribute vec2 aPosition;attribute float aZLevel;attribute vec2 aExtend;attribute vec2 aVertexTextureCoord;attribute vec2 aRotationCenter;attribute float aRotationAngle;varying vec2 _;varying vec2 a;uniform bool uUseRound;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;uniform vec2 uMapHalfSize;uniform float uMapZoom;uniform bool uIsFlat;float b(float b){return pow(2.,18.-b);}void main(){vec4 c;float d=aZLevel;if(uIsFlat){d=0.;}a=vec2(1.,1.);float e=b(uMapZoom);vec2 f=aPosition.xy+aExtend.xy*e;float g=sin(radians(-aRotationAngle));float h=cos(radians(-aRotationAngle));mat2 i=mat2(h,-g,g,h);vec3 j=vec3(aRotationCenter.xy+i*(f.xy-aRotationCenter.xy),d);c=uMVMatrix*vec4(j,1.);gl_Position=uPMatrix*c;_=vec2(aVertexTextureCoord.xy);}",""].join("\\n"),["precision highp float;uniform sampler2D uSampler;uniform bool uForRenderPNG8Text;uniform float uCameraFar;float b=500.0;varying vec2 _;varying vec2 a;void main(){if(a[0]==0.){discard;return;}vec4 c=texture2D(uSampler,_);if(uForRenderPNG8Text==true&&c.a<0.7){c.a=0.;}float d;bool e=false;d=(gl_FragCoord.z/gl_FragCoord.w);float f=c.a;if(d>uCameraFar-b){f=f*(uCameraFar-d)/b;if(f<1.){discard;}}gl_FragColor=vec4(c.rgb,f);}",""].join("\\n")],raster:[["precision highp float;attribute vec3 aVertexPosition;attribute vec2 aVertexTextureCoord;varying vec2 _;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;void main(){gl_Position=uPMatrix*uMVMatrix*vec4(aVertexPosition,1.);_=aVertexTextureCoord;}",""].join("\\n"),["precision highp float;uniform sampler2D uSampler;varying vec2 _;void main(){vec4 _=texture2D(uSampler,_);gl_FragColor=_;}",""].join("\\n")],rasterpixel:[["precision highp float;attribute vec3 aVertexPosition;attribute vec2 aVertexTextureCoord;attribute vec4 aVertexMaskCoord;varying vec2 _;varying vec4 a;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;void main(){gl_Position=uPMatrix*uMVMatrix*vec4(aVertexPosition,1.);_=aVertexTextureCoord;a=aVertexMaskCoord;}",""].join("\\n"),["precision highp float;uniform sampler2D uSampler;varying vec2 _;varying vec4 a;uniform sampler2D u_ColorMap;uniform sampler2D u_Mask;uniform float u_maskData;uniform float u_noData;uniform float u_opacity;uniform vec2 u_domain;uniform vec2 u_clamp;uniform bool u_maskLoaded;void main(){vec4 _=texture2D(uSampler,vec2(_.s,_.t));vec4 a=a;vec4 b=texture2D(u_Mask,vec2(a.s,a.t));float c=generateValue(_);if(c!=u_noData&&c>=u_clamp.s&&c<=u_clamp.t){c=(c-u_domain.s)/(u_domain.t-u_domain.s);vec4 d=texture2D(u_ColorMap,vec2(c,0));d.a*=_.a*u_opacity;_=d;}else{_=vec4(0,0,0,0);}if(u_maskLoaded){if(a.s<0.||a.s>1.||a.t<0.||a.t>1.){b.a=0.;}_.a*=b.a;if(u_maskData>0.){float d=b.r*255.;_.a*=(step(u_maskData,d)-step(u_maskData+1.,d));}}gl_FragColor=_;}",""].join("\\n")],sky:[["precision highp float;attribute vec3 aPos;uniform mat4 uPMatrix;uniform mat4 uMVMatrix;uniform float uHorizonY;uniform vec4 uGroundColor;uniform vec4 uSkyColor;varying vec4 _;void main(){vec2 a=aPos.xy;a.y+=uHorizonY;gl_Position=uPMatrix*uMVMatrix*vec4(a.xy,-2900.,1.);float b=aPos.z;if(b==0.){_=uGroundColor;}else{_=uSkyColor;}}",""].join("\\n"),["precision highp float;varying vec4 _;void main(){gl_FragColor=_;}",""].join("\\n")],smaa1:[["precision highp float;attribute vec3 position;attribute vec2 uv;uniform mat4 projectionMatrix;uniform mat4 modelViewMatrix;uniform vec2 resolution;varying vec2 _;varying vec4 a[3];void b(vec2 b){a[0]=b.xyxy+resolution.xyxy*vec4(-1.,0.,0.,1.);a[1]=b.xyxy+resolution.xyxy*vec4(1.,0.,0.,-1.);a[2]=b.xyxy+resolution.xyxy*vec4(-2.,0.,0.,2.);}void main(){_=uv;b(_);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}",""].join("\\n"),["precision highp float;","#define A 0.1","uniform sampler2D tDiffuse;varying vec2 _;varying vec4 a[3];vec4 b(vec2 _,vec4 a[3],sampler2D b){vec2 c=vec2(A,A);vec4 d;vec3 e=texture2D(b,_).rgb;vec3 f=texture2D(b,a[0].xy).rgb;vec3 g=abs(e-f);d.x=max(max(g.r,g.g),g.b);vec3 h=texture2D(b,a[0].zw).rgb;g=abs(e-h);d.y=max(max(g.r,g.g),g.b);vec2 i=step(c,d.xy);if(dot(i,vec2(1.,1.))==0.)discard;vec3 j=texture2D(b,a[1].xy).rgb;g=abs(e-j);d.z=max(max(g.r,g.g),g.b);vec3 k=texture2D(b,a[1].zw).rgb;g=abs(e-k);d.w=max(max(g.r,g.g),g.b);float l=max(max(max(d.x,d.y),d.z),d.w);vec3 m=texture2D(b,a[2].xy).rgb;g=abs(e-m);d.z=max(max(g.r,g.g),g.b);vec3 n=texture2D(b,a[2].zw).rgb;g=abs(e-n);d.w=max(max(g.r,g.g),g.b);l=max(max(l,d.z),d.w);i.xy*=step(0.5*l,d.xy);return vec4(i,0.,0.);}void main(){gl_FragColor=b(_,a,tDiffuse);}",""].join("\\n")],smaa2:[["precision highp float;","#define A 8","#define B 16","#define C (1.0/vec2(160.0,560.0))","#define D (1.0/7.0)","attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;uniform mat4 projectionMatrix;uniform mat4 modelViewMatrix;varying vec2 _;varying vec4 a[3];varying vec2 b;void c(vec2 c){b=c/resolution;a[0]=c.xyxy+resolution.xyxy*vec4(-0.25,0.125,1.25,0.125);a[1]=c.xyxy+resolution.xyxy*vec4(-0.125,0.25,-0.125,-1.25);a[2]=vec4(a[0].xz,a[1].yw)+vec4(-2.,2.,-2.,2.)*resolution.xxyy*float(A);}void main(){_=uv;c(_);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}",""].join("\\n"),["precision highp float;","#define A 8","#define B 16","#define C (1.0/vec2(160.0,560.0))","#define D (1.0/7.0)","#define E(tex,coord,offset) texture2D(tex,coord+float(offset)*resolution,0.0)","uniform sampler2D tDiffuse;uniform sampler2D tArea;uniform sampler2D tSearch;uniform vec2 resolution;varying vec2 _;varying vec4 a[3];varying vec2 b;vec2 c(vec2 _){return sign(_)*floor(abs(_)+0.5);}float d(sampler2D d,vec2 e,float f,float g){e.r=f+e.r*g;return 255.*texture2D(d,e,0.).r;}float e(sampler2D e,sampler2D f,vec2 g,float h){vec2 i=vec2(0.,1.);for(int j=0;j<A;j++){i=texture2D(e,g,0.).rg;g-=vec2(2.,0.)*resolution;if(!(g.x>h&&i.g>0.8281&&i.r==0.))break;}g.x+=0.25*resolution.x;g.x+=resolution.x;g.x+=2.*resolution.x;g.x-=resolution.x*d(f,i,0.,0.5);return g.x;}float f(sampler2D f,sampler2D g,vec2 h,float i){vec2 j=vec2(0.,1.);for(int k=0;k<A;k++){j=texture2D(f,h,0.).rg;h+=vec2(2.,0.)*resolution;if(!(h.x<i&&j.g>0.8281&&j.r==0.))break;}h.x-=0.25*resolution.x;h.x-=resolution.x;h.x-=2.*resolution.x;h.x+=resolution.x*d(g,j,0.5,0.5);return h.x;}float g(sampler2D g,sampler2D h,vec2 i,float j){vec2 k=vec2(1.,0.);for(int l=0;l<A;l++){k=texture2D(g,i,0.).rg;i+=vec2(0.,2.)*resolution;if(!(i.y>j&&k.r>0.8281&&k.g==0.))break;}i.y-=0.25*resolution.y;i.y-=resolution.y;i.y-=2.*resolution.y;i.y+=resolution.y*d(h,k.gr,0.,0.5);return i.y;}float h(sampler2D h,sampler2D i,vec2 j,float k){vec2 l=vec2(1.,0.);for(int m=0;m<A;m++){l=texture2D(h,j,0.).rg;j-=vec2(0.,2.)*resolution;if(!(j.y<k&&l.r>0.8281&&l.g==0.))break;}j.y+=0.25*resolution.y;j.y+=resolution.y;j.y+=2.*resolution.y;j.y-=resolution.y*d(i,l.gr,0.5,0.5);return j.y;}vec2 i(sampler2D i,vec2 j,float k,float l,float m){vec2 n=float(B)*c(4.*vec2(k,l))+j;n=C*n+(0.5*C);n.y+=D*m;return texture2D(i,n,0.).rg;}vec4 j(vec2 j,vec2 k,vec4 l[3],sampler2D m,sampler2D n,sampler2D o,ivec4 p){vec4 q=vec4(0.,0.,0.,0.);vec2 r=texture2D(m,j).rg;if(r.g>0.){vec2 s;vec2 t;t.x=e(m,o,l[0].xy,l[2].x);t.y=l[1].y;s.x=t.x;float u=texture2D(m,t,0.).r;t.x=f(m,o,l[0].zw,l[2].y);s.y=t.x;s=s/resolution.x-k.x;vec2 v=sqrt(abs(s));t.y-=1.*resolution.y;float w=E(m,t,ivec2(1,0)).r;q.rg=i(n,v,u,w,float(p.y));}if(r.r>0.){vec2 s;vec2 t;t.y=g(m,o,l[1].xy,l[2].z);t.x=l[0].x;s.x=t.y;float u=texture2D(m,t,0.).g;t.y=h(m,o,l[1].zw,l[2].w);s.y=t.y;s=s/resolution.y-k.y;vec2 v=sqrt(abs(s));t.y-=1.*resolution.y;float w=E(m,t,ivec2(0,1)).g;q.ba=i(n,v,u,w,float(p.x));}return q;}void main(){gl_FragColor=j(_,b,a,tDiffuse,tArea,tSearch,ivec4(0.));}",""].join("\\n")],smaa3:[["precision highp float;uniform vec2 resolution;attribute vec3 position;attribute vec2 uv;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;varying vec2 _;varying vec4 a[2];void b(vec2 b){a[0]=b.xyxy+resolution.xyxy*vec4(-1.,0.,0.,1.);a[1]=b.xyxy+resolution.xyxy*vec4(1.,0.,0.,-1.);}void main(){_=uv;b(_);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}",""].join("\\n"),["precision highp float;uniform sampler2D tDiffuse;uniform sampler2D tColor;uniform vec2 resolution;varying vec2 _;varying vec4 a[2];vec4 b(vec2 _,vec4 a[2],sampler2D b,sampler2D c){vec4 d;d.xz=texture2D(c,_).xz;d.y=texture2D(c,a[1].zw).g;d.w=texture2D(c,a[1].xy).a;if(dot(d,vec4(1.,1.,1.,1.))<1e-5){return texture2D(b,_,0.);}else{vec2 e;e.x=d.a>d.b?d.a:-d.b;e.y=d.g>d.r?-d.g:d.r;if(abs(e.x)>abs(e.y)){e.y=0.;}else{e.x=0.;}vec4 f=texture2D(b,_,0.);_+=sign(e)*resolution;vec4 g=texture2D(b,_,0.);float h=abs(e.x)>abs(e.y)?abs(e.x):abs(e.y);f.xyz=pow(f.xyz,vec3(2.2));g.xyz=pow(g.xyz,vec3(2.2));vec4 i=mix(f,g,h);i.xyz=pow(i.xyz,vec3(1./2.2));return i;}}void main(){gl_FragColor=b(_,a,tColor,tDiffuse);}",""].join("\\n")],overlayfill:[["precision highp float;attribute vec2 a_pos;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;void main(){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos,0,1);}",""].join("\\n"),["precision mediump float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}",""].join("\\n")],overlayblock:[["precision highp float;attribute vec4 a_pos;attribute vec4 a_normal;attribute vec4 a_color;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_normal_matrix;uniform vec3 u_side_light_dir;uniform bool u_is_normal;varying vec4 _;varying float a;varying vec4 b;const vec3 c=vec3(0.06,0.06,0.06);vec3 d=vec3(0.1,0.1,0.1);void main(){vec4 e=u_proj_matrix*u_mv_matrix*a_pos;gl_Position=e;a=-1./500.-a_pos.z/100.;gl_Position.z=gl_Position.z+a;b=a_normal;_=a_color;vec3 f=a_color.rgb;vec3 g=normalize(vec3(u_normal_matrix*a_normal));vec4 h=u_mv_matrix*vec4(0.5,0.5,0,0);vec3 i=normalize(h.xyz);float j=max(0.,dot(g,-i));_=vec4(f+f*c*j,a_color.a);}",""].join("\\n"),["precision highp float;varying vec4 _;varying float a;uniform float u_camera_far;float c=500.0;void main(){float d=(gl_FragCoord.z/gl_FragCoord.w-a);float e=_.a;if(d>u_camera_far-c){e=e*(u_camera_far-d)/c;if(e<=0.){discard;}}gl_FragColor=vec4(_.rgb,e);}",""].join("\\n")],marker3d:[["attribute vec4 a_pos;attribute float a_height;attribute vec4 a_color;attribute float a_shape;attribute float a_size;attribute vec4 a_texture_coord;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform vec3 u_camera_pos_high;uniform vec3 u_camera_pos_low;varying vec4 _;varying vec4 a;varying float b;void main(){if(a_color.w>=0.&&a_color.w<=1.){_=a_color;}else{_=vec4(a_color.xyz,1.);}b=a_shape;a=a_texture_coord;vec3 c=vec3(a_pos.xy,a_height);vec3 d=vec3(a_pos.zw,a_height);vec4 e=u_proj_matrix*u_mv_matrix*vec4((c-u_camera_pos_high)+(d-u_camera_pos_low),1.);gl_Position=e;gl_PointSize=a_size;}",""].join("\\n"),["precision mediump float;varying vec4 _;varying float b;varying vec4 a;uniform bool u_use_texture;uniform sampler2D u_Sampler;void main(){vec4 _=_;if(b==1.){float a=distance(gl_PointCoord,vec2(0.5,0.5));if(a>0.5){discard;}float b=1.;b=1.-smoothstep(0.49,0.5,a);_.a*=b;}if(u_use_texture){vec4 a=a;float b=a.x;float c=a.z-a.x;float d=a.y;float e=a.w-a.y;_=texture2D(u_Sampler,vec2(b+gl_PointCoord.x*c,d+e*(1.-gl_PointCoord.y)));}gl_FragColor=_;}",""].join("\\n")],groundoverlay:[["precision highp float;attribute vec3 a_pos;attribute vec4 a_texture_coord;varying vec4 _;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;void main(){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,0.,1.);_=a_texture_coord;}",""].join("\\n"),["precision highp float;varying vec4 _;uniform sampler2D u_Sampler;uniform float u_opacity;void main(){vec4 _=texture2D(u_Sampler,vec2(_.s,_.t));_.a*=u_opacity;gl_FragColor=_;}",""].join("\\n")],groundpixeloverlay:[["precision highp float;attribute vec3 a_pos;attribute vec4 a_texture_coord;attribute vec4 a_mask_coord;varying vec4 _;varying vec4 a;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;void main(){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,0.,1.);_=a_texture_coord;a=a_mask_coord;}",""].join("\\n"),["precision highp float;varying vec4 _;varying vec4 a;uniform sampler2D u_Sampler;uniform sampler2D u_ColorMap;uniform sampler2D u_Mask;uniform float u_noData;uniform float u_opacity;uniform float u_maskData;uniform vec2 u_domain;uniform vec2 u_clamp;uniform bool u_maskLoaded;void main(){vec4 _=texture2D(u_Sampler,vec2(_.s,_.t));vec4 a=a;vec4 b=texture2D(u_Mask,vec2(a.s,a.t));float c=generateValue(_);if(c!=u_noData&&c>=u_clamp.s&&c<=u_clamp.t){c=(c-u_domain.s)/(u_domain.t-u_domain.s);vec4 d=texture2D(u_ColorMap,vec2(c,0));d.a*=_.a*u_opacity;_=d;}else{_=vec4(0,0,0,0);}if(u_maskLoaded){if(a.s<0.||a.s>1.||a.t<0.||a.t>1.){b.a=0.;}_.a*=b.a;if(u_maskData>0.){float d=b.r*255.;_.a*=(step(u_maskData,d)-step(u_maskData+1.,d));}}gl_FragColor=_;}",""].join("\\n")]};function aB(i,e){this.gl=i;this.map=e;this.cache={};this.bind()}aB.prototype.bind=function(){var e=this;this.map.on("update",function(T){var je=T.changedStatus;if(je&&je.onsize_changed){for(var i in e.cache){e.cache[i].lastState.projMatrix=false}}})};aB.prototype._createProgram=function(e,jg){var jm=this.gl;var jl=jm.createProgram();var jh=a9[e];var js=jh[1];if(jg&&jg.fShader){js=js.replace("void main()",jg.fShader+" void main()")}var ji=jm.createShader(jm.FRAGMENT_SHADER);jm.shaderSource(ji,js);jm.compileShader(ji);jm.attachShader(jl,ji);var jo=jh[0];if(jg&&jg.vShader){jo=jo.replace("void main()",jg.vShader+" void main()")}var jr=jm.createShader(jm.VERTEX_SHADER);jm.shaderSource(jr,jo);jm.compileShader(jr);jm.attachShader(jl,jr);jm.linkProgram(jl);var jj={};var jp=jm.getProgramParameter(jl,jm.ACTIVE_ATTRIBUTES);for(var jk=0;jk<jp;jk++){var jf=jm.getActiveAttrib(jl,jk);jj[jf.name]=jm.getAttribLocation(jl,jf.name)}var jq={};var je=jm.getProgramParameter(jl,jm.ACTIVE_UNIFORMS);for(var jn=0;jn<je;jn++){var T=jm.getActiveUniform(jl,jn);jq[T.name]=jm.getUniformLocation(jl,T.name)}return{program:jl,attributes:jj,numAttributes:jp,uniforms:jq,lastState:{}}};aB.prototype._createProgramCached=function(i,e){if(!this.cache[i]){this.cache[i]=this._createProgram(i,e)}return this.cache[i]};aB.prototype.removeProgram=function(e){if(this.cache[e]){delete this.cache[e]}};aB.prototype.useProgram=function(jf,e){var je=this.gl;var T=this._createProgramCached(jf,e);var i=this.currentProgram;if(i!==T){je.useProgram(T.program);this.currentProgram=T}return T};var en={};en.symbol=[{name:"aPosition",components:4,offset:0,type:"Float32"},{name:"aZLevel",components:1,offset:16,type:"Float32"},{name:"aExtend",components:2,offset:20,type:"Float32"},{name:"aLoopOffset",components:2,offset:28,type:"Float32"},{name:"aVertexTextureCoord",components:2,offset:36,type:"Float32"}];en.symbolline=[{name:"aPosition",components:2,offset:0,type:"Float32"},{name:"aZLevel",components:1,offset:8,type:"Float32"},{name:"aExtend",components:2,offset:12,type:"Float32"},{name:"aRotationCenter",components:2,offset:20,type:"Float32"},{name:"aRotationAngle",components:1,offset:28,type:"Float32"},{name:"aVertexTextureCoord",components:2,offset:32,type:"Float32"}];en.arrowComponentsCount=10;en.arrow=[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_diff",components:2,offset:12,type:"Float32"},{name:"a_normal",components:2,offset:20,type:"Float32"},{name:"a_tex",components:2,offset:28,type:"Float32"},{name:"a_layer_index",components:1,offset:36,type:"Float32"}];en.fillComponentsCount=8;en.fill=[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_color",components:4,offset:12,type:"Uint8"},{name:"a_layer_index",components:1,offset:16,type:"Float32"}];en.overlayLineComponentsCount=12;en.overlayLine=[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_normal",components:2,offset:8,type:"Float32"},{name:"a_color",components:4,offset:16,type:"Uint8",normalize:true},{name:"a_data",components:4,offset:20,type:"Float32"}];en.lineComponentsCount=12;en.line=[{name:"a_pos",components:2,offset:0,type:"Int16"},{name:"a_normal",components:2,offset:4,type:"Int16"},{name:"a_color",components:4,offset:8,type:"Uint8",normalize:true},{name:"a_data",components:4,offset:12,type:"Int16"}];var g2=[0,0,0,256,512,512,512,512,512,512,256,512,512,512,512,512,1024,1024,1024,1024,1024,1024];var hs={grid:X,line:eX,fill:A,block:bX,shadow:ee,debug:fz,arrow:cs,symbol:iD,symbolline:h2,raster:gX,overlayBlock:cU,marker3d:i4,groundoverlay:eA};var eN={3:{start:3},4:{start:4},5:{start:4},6:{start:6},7:{start:6},8:{start:8},9:{start:8},10:{start:10},11:{start:11},12:{start:11},13:{start:11},14:{start:14},15:{start:14},16:{start:16},17:{start:16},18:{start:18},19:{start:18},20:{start:18},21:{start:18},22:{start:18},23:{start:18},24:{start:18},25:{start:18}};var dk=[245,245,245,255];var bI=127;var bF=128;var bD=11;var d5=bD*6;var gh=15;var et=6;var d=10;var iw=d*6;var eI=50;var ft=41;var aQ=0;var eo=1;var d8=2;function cA(i){i.preventDefault();setTimeout(function(){window.location.reload()},200)}function b6(je,i){var T=this;this._map=je;this._textRenderType=je.config.textRenderType;this._gridBufferCache={};this._debugBufferCache={};this._shadowPosVec3=vec3.fromValues(2,1,1);this._sideLightDirVec3=vec3.fromValues(0,1,2);this._camera=i;this._canvas=this._initCanvas();this._useSMAA=!bK()&&!ev.Browser.ie&&je.config.smaa!==false;this._currentTextureIsFull=false;var jf=this.gl=this._getWebGLContext();this._float32ArrayForPolyline=new Float32Array(65535);this._uint16ArrayForPolyline=new Uint16Array(65535);this._textureCache=new at((bK()||ev.Browser.ie)?64:128,{clearCallback:function(jg){if(jg){jf.deleteTexture(jg)}}});this._labelTextureAtlasOffset={};var e=cK.params.maxTextureSize;if(fD()>1&&this._textRenderType==="image"){this._labelTextTextureSize=[4096,Math.min(4096+1024,e)]}else{this._labelTextTextureSize=[4096,4096]}if(this._textRenderType==="canvas"){this._renderPng8Text=false}else{this._renderPng8Text=true}this._lineLabelBuffer=null;this._fixedLabelBuffer=null;this._iconLabelBuffer=null;this._highlightLabelBuffer=null;this._marker3dVertexBuffer=null;this._markerVertexBuffer=null;this._polylineBufferArray=[{vertex:null,element1:null,vao1:null}];this._polygonBuffer=new Array(20);this._groundBuffer=new Array(20);this._groundoverlayBuffer=new Array(20);this._textTextureManager=new dt.TextTextureManager(jf,{width:this._labelTextTextureSize[0],height:this._labelTextTextureSize[1],unpackAlpha:true});this._iconTextureManager=new dt.TextTextureManager(jf,{width:1024,height:1024,unpackAlpha:true});this._iconTextureAtlas=this._iconTextureManager.getEmptyTexture();this._iconTextureAtlasOffset={};this._iconTextureAtlasCoords={};this._textureAddToJob={};this._isIdle=false;this._identityMatrix=mat4.create();this._initialize();this._handleContextStatus();this._stencilMask=null;this.draw()}ev.extend(b6.prototype,{draw:function(je){var jx=this.gl;var jH=this;var jF=jH._map;var jv=this.mapZoom=jF.getZoom();if(!this.stepZoom){this.stepZoom=jv}jF.beforeRender&&jF.beforeRender();this.createGridBuffer(Math.floor(jv));this._isIdle=je?je.idle:false;if(this._isIdle&&this._useSMAA){bc.loadTexture(this,jx);if(this._frameBufferSizeInvalid===true){this.clearPreviousSMAAFramebuffer();this.initSMAAFrameBuffers();this._frameBufferSizeInvalid=false}}else{this._frameBufferSizeInvalid=true}this.projMatrix=this._camera.getProjectionMatrix3D();this.projMatrix2D=this._camera.getProjectionMatrix();this.cameraPosition=this._camera.getPosition();var jI=jF._featureMgr.getResult();var jf=jI.bkData;var jh=jI.eleData;this._stencilMask=jh[9];var ji=jF.getSize();var ju=ji.width;var js=ji.height;this.mapHalfSize=[ju/2,js/2];this.polyZoomRatio=Math.pow(2,18-jv);this.gridTextureScale=i9.mapZoomTileSize[Math.floor(jv)]/128;var jD=jF._displayOptions;this.isFlat=jD.isFlat;if(this._isIdle&&this._smaaInfo.glDrawSMAAReady===true){jx.bindFramebuffer(jx.FRAMEBUFFER,this._smaaPasses[0].framebuffer)}this.tileClippintRefer=0;this.showIndoorContour=false;this.currentIndoorUid=null;if(jF._indoorMgr){this.currentIndoorUid=jF._indoorMgr.currentUid}if(this.currentIndoorUid&&jv>=17){this.showIndoorContour=true}jH.clearGLStatus({stencil:true,color:true,depth:true});this._state.enableCap("depthTest");this._state.blendFunc(jx.SRC_ALPHA,jx.ONE_MINUS_SRC_ALPHA,jx.ONE,jx.ONE_MINUS_SRC_ALPHA);this.calShadowPos();jH.clearGLStatus({depth:true});var jk=0;for(var jl=0;jl<jf.length;jl++){if(!jf[jl]){continue}var jG=jf[jl];if(jl>0&&jD.layer===false){continue}if(jG.dataType===2){var jE=[0,0,0];for(var jy=0;jy<jG.length;jy++){var jt=undefined;for(var jw=0;jw<jG[jy].length;jw++){var T=jG[jy][jw];var e=T.tileInfo.useZoom;if(e!==jt){jE[jy]++;jt=e}}}for(var jy=0;jy<jG.length;jy++){var jB=1;if(jy===1){jB+=jE[0]+jE[2]}else{if(jy===2){jB+=jE[0]}}var jr=jB+jk;jr=this.drawBase(jG[jy],jr,jv,jl,jy===2);var jg=false;for(var jw=0;jw<jG[jy].length;jw++){var T=jG[jy][jw];if(T.dataType===2||!T.dataType){if(T.renderData&&T.renderData.base3d){jg=true;this.drawTileBase3D(T,jv,jr,eo)}}}if(jD.indoor){for(var jw=0;jw<jG[jy].length;jw++){var T=jG[jy][jw];if(T.dataType===2||!T.dataType){if(T.renderData&&T.renderData.indoorBase){this.drawIndoorBase(T,jv)}}}}if(jg&&!this.isFlat){this.gl.stencilFunc(this.gl.ALWAYS,1<<7,bF);for(var jw=0;jw<jG[jy].length;jw++){var T=jG[jy][jw];if(T.dataType===2||!T.dataType){if(T.renderData&&T.renderData.base3d){this.drawTileBase3D(T,jv,jr,d8)}}}this.gl.stencilFunc(this.gl.ALWAYS,0,255)}for(var jw=0;jw<jG[jy].length;jw++){var T=jG[jy][jw];if(T.dataType===2||!T.dataType){if(T.renderData&&T.renderData.virtual){this.drawTileVirtual(T,jv)}}}}jk+=jE[0]+jE[1]+jE[2]}else{this._state.disableCap("depthTest");if(jG.boundary){this.enableTileLayerClippingMask(jG.boundary)}if(jG.png8){this._state.blendFunc(jx.ONE,jx.ONE_MINUS_SRC_ALPHA)}else{this._state.blendFunc(jx.SRC_ALPHA,jx.ONE_MINUS_SRC_ALPHA,jx.ZERO,jx.ONE)}var jz=jG.ontology;var jK=null;if(jz&&jz.isPixelMap&&jz.pHashcode){var jJ=jz.src;jK=this._textureCache.getData(jJ);if(!jK||(jz.pHashcode!==jz.pHashcodeOld)){var jx=this.gl;jz.pHashcodeOld=jz.pHashcode;jK=dt.utils.createTexture(jx,jz.pixelColorMap.canvas);this._textureCache.setData(jJ,jK)}if(jz.maskPng&&jz.hasMaskPng){var jp=this._textureCache.getData(jz.maskPng);if(!jp){var jx=this.gl;jp=dt.utils.createTexture(jx,jz.maskTextureSource);this._textureCache.setData(jz.maskPng,jp)}jz.textureMask=jp}}var jC=this.getZoomState()===1?0:1;for(var jy=0;jy<jG[jC].length;jy++){if(!jG[jC][jy]){continue}this.drawRasterTile(jG[jC][jy],jK,jz)}for(var jy=0;jy<jG[2].length;jy++){if(!jG[2][jy]){continue}this.drawRasterTile(jG[2][jy],jK,jz)}this._state.enableCap("depthTest");if(jG.png8){this._state.blendFunc(jx.SRC_ALPHA,jx.ONE_MINUS_SRC_ALPHA,jx.ZERO,jx.ONE)}if(jG.boundary){this.disableTileLayerClippingMask()}}}if(jD.overlay){if(jh[0].length>0){this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolygon(jh[0]);this._state.enableCap("depthTest")}if(jh[5].length>0){this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawGroundOverlay(jh[5]);this._state.enableCap("depthTest")}if(jh[1].length>0){this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolyline(jh[1]);this._state.enableCap("depthTest")}if(jh[6].length>0){this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPrism(jh[6]);this._state.enableCap("depthTest")}}this._map.drawOverlay&&this._map.drawOverlay(jx);this.draw3D(jf);if(jF.getTilt()>10){var jA=jF.pointToPixelIn(jF.getBoundsIn().pointTopLeft).y+100;if(jA>0&&jF.config.showSky!==false){it(this,this._identityMatrix,jA,jF.height,this._skyColor)}}jF.insertRender&&jF.insertRender();if(this._useSMAA&&this._isIdle&&this._smaaInfo.glDrawSMAAReady===true){this.drawSMAA()}this._state.disableCap("depthTest");this.mvMatrixMarker=this._camera.getMCPlaneMVMatrix();this.mvMatrixMarker[12]=this.mvMatrixMarker[13]=this.mvMatrixMarker[14]=0;this._checkTextureAtlasUsage();var jo=hT(this.cameraPosition[0]);var jn=hT(this.cameraPosition[1]);var jm=hT(this.cameraPosition[2]);this.cameraPosHigh=[jo[0],jn[0],jm[0]];this.cameraPosLow=[jo[1],jn[1],jm[1]];if(jD.poi){this._state.blendFunc(jx.ONE,jx.ONE_MINUS_SRC_ALPHA);if(jD.poiText&&jh[2].length>0){for(var jy=0;jy<jh[2].length;jy++){var jq=jh[2][jy];if(jq.lineLabels.length===0){continue}this.drawLineLabelSymbol(jq.lineLabels,this._camera.getModelViewMatrixForLineLabel(jq.tileInfo))}}if(jh[3].length>0){this.drawFixedLabelSymbol(jh[3])}if(jD.poiText&&jh[4].length>0){this.drawHighlightFixedLabelSymbol(jh[4])}}if(jD.overlay){this._state.blendFunc(jx.ONE,jx.ONE_MINUS_SRC_ALPHA);var jj=false;if(jv<12){jj=true}if(jh[8].length>0){this.drawSymbol(jh[8],{fixPosition:jj})}if(jh[7].length>0){this.drawMarker3D(jh[7])}}jF.afterRender&&jF.afterRender();this._map.dispatchEvent(new fa("ondraw"))},switchStencilMask:function(e,je,i){var T=this._stencilMask;if(T.length>0&&T[0].isStencilMask){if(e==="on"){if(this._map.stencil.showRegion==="inside"){this.enableStencilMask(T,je,i)}else{if(this._map.stencil.showRegion==="outside"){this.enableStencilMaskOut(T,i,i)}}}else{if(e==="off"){this.disableStencilMask()}}}},enableStencilMask:function(je,i,e){var T=this.gl;if(!e){T.clear(T.STENCIL_BUFFER_BIT)}if(!i){T.disable(T.DEPTH_TEST)}T.stencilFunc(T.ALWAYS,1,255);this._state.stencilOp(T.KEEP,T.KEEP,T.REPLACE);T.stencilMask(255);this._state.colorMask(0,0,0,0);this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolygon(je);this._state.colorMask(1,1,1,1);T.stencilFunc(T.EQUAL,1,255);T.stencilMask(0)},enableStencilMaskOut:function(je,i,e){var T=this.gl;if(!e){T.clear(T.STENCIL_BUFFER_BIT)}if(!i){T.disable(T.DEPTH_TEST)}T.stencilFunc(T.ALWAYS,1,255);this._state.stencilOp(T.KEEP,T.KEEP,T.REPLACE);T.stencilMask(255);this._state.colorMask(0,0,0,0);this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolygon(je);this._state.colorMask(1,1,1,1);T.stencilFunc(T.NOTEQUAL,1,255);T.stencilMask(0)},disableStencilMask:function(){var e=this.gl;e.clear(e.STENCIL_BUFFER_BIT);e.stencilMask(255);e.stencilFunc(e.ALWAYS,1,255);e.enable(e.DEPTH_TEST)},enableTileLayerClippingMask:function(i){var e=this.gl;e.stencilFunc(e.ALWAYS,1,255);this._state.stencilOp(e.KEEP,e.KEEP,e.REPLACE);e.stencilMask(255);e.clear(e.STENCIL_BUFFER_BIT);this._state.colorMask(0,0,0,0);this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.overlayToPolygonGl(i);e.stencilFunc(e.EQUAL,1,255);e.stencilMask(0);this._state.colorMask(1,1,1,1)},disableTileLayerClippingMask:function(){var e=this.gl;e.clear(e.STENCIL_BUFFER_BIT);e.stencilMask(255);e.stencilFunc(e.ALWAYS,1,255)},overlayToPolygonGl:function(ji){var e=[];for(var jg=0;jg<ji.length;jg++){var jf=ji[jg];var T=jf.getFillStyleForGL();var jh=jf.buildFillVertex(gS);var je=[T,jh[0],jh[1]];je.hashCode=jf.hashCode;je.hasMultipleParts=jf.hasMultipleParts;e.push(je)}this.drawPolygon(e)},getZoomState:function(){var T=this._map;var i=T.getZoom();var e=i-this.lastZoom;if(e>0){this.zoomState=1}else{if(e<0){this.zoomState=-1}}this.lastZoom=i;return this.zoomState},calShadowPos:function(){this.isDrawShadow=false;var i=this._map;var e=!(typeof i.config.style==="string");if(e||this.mapZoom<18){return}var T=i.getSolarInfo();if(eG(T.solarAltitude)>1){this.isDrawShadow=true;this._shadowPosVec3[0]=Math.sin(T.solarAzimuth);this._shadowPosVec3[1]=Math.cos(T.solarAzimuth);if(T.centerPosition==="south"){this._shadowPosVec3[1]=-this._shadowPosVec3[1]}this._shadowPosVec3[2]=Math.tan(T.solarAltitude)*0.5+1.5;this._sideLightDirVec3[0]=this._shadowPosVec3[0];this._sideLightDirVec3[1]=this._shadowPosVec3[1];this._sideLightDirVec3[2]=-this._shadowPosVec3[2]}},clearPreviousSMAAFramebuffer:function(){var je=this.gl;for(var e=0;e<this._smaaPasses.length;e++){je.deleteFramebuffer(this._smaaPasses[e].framebuffer);je.deleteTexture(this._smaaPasses[e].texture);je.deleteRenderbuffer(this._smaaPasses[e].renderbuffer)}this._smaaPasses=[];if(this._smaaBuffer){var T=this._smaaBuffer;T.vao1&&T.vao1.destroy(je);T.vao2&&T.vao2.destroy(je);T.vao3&&T.vao3.destroy(je);T.vertex&&T.vertex.destroy(je);this._smaaBuffer=null}},initSMAAFrameBuffers:function(){this._smaaPasses=[];for(var e=0;e<3;e++){var T=this.createFramebuffer();this._smaaPasses.push({framebuffer:T[0],texture:T[1],renderbuffer:T[2]})}},createFramebuffer:function(){var je=this.gl;var T=je.createFramebuffer();je.bindFramebuffer(je.FRAMEBUFFER,T);T.width=je.drawingBufferWidth;T.height=je.drawingBufferHeight;var i=je.createTexture();je.bindTexture(je.TEXTURE_2D,i);je.texParameteri(je.TEXTURE_2D,je.TEXTURE_MAG_FILTER,je.LINEAR);je.texParameteri(je.TEXTURE_2D,je.TEXTURE_MIN_FILTER,je.LINEAR);je.texParameteri(je.TEXTURE_2D,je.TEXTURE_WRAP_S,je.CLAMP_TO_EDGE);je.texParameteri(je.TEXTURE_2D,je.TEXTURE_WRAP_T,je.CLAMP_TO_EDGE);je.texImage2D(je.TEXTURE_2D,0,je.RGBA,T.width,T.height,0,je.RGBA,je.UNSIGNED_BYTE,null);je.framebufferTexture2D(je.FRAMEBUFFER,je.COLOR_ATTACHMENT0,je.TEXTURE_2D,i,0);var e=je.createRenderbuffer();je.bindRenderbuffer(je.RENDERBUFFER,e);je.renderbufferStorage(je.RENDERBUFFER,je.DEPTH_STENCIL,T.width,T.height);je.framebufferRenderbuffer(je.FRAMEBUFFER,je.DEPTH_STENCIL_ATTACHMENT,je.RENDERBUFFER,e);je.bindTexture(je.TEXTURE_2D,null);je.bindRenderbuffer(je.RENDERBUFFER,null);je.bindFramebuffer(je.FRAMEBUFFER,null);return[T,i,e]},drawSMAA:function(){if(!this._smaaBuffer){var i=this._width;var T=this._height;var e=new Float32Array([0,0,-900,0,0,i,0,-900,1,0,i,T,-900,1,1,0,0,-900,0,0,i,T,-900,1,1,0,T,-900,0,1]);this._smaaBuffer={vertex:new v(e,{components:5,members:[{name:"position",components:3,offset:0,type:"Float32"},{name:"uv",components:2,offset:12,type:"Float32"}]},v.BufferType.VERTEX),vao1:new dp(),vao2:new dp(),vao3:new dp()}}bc.draw(this,this._smaaBuffer,this._identityMatrix,this._smaaPasses,this._width,this._height)},createBlockData:function(i){var e=new v(i.vertex,{components:7,members:[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_normal",components:3,offset:12,type:"Float32"},{name:"a_color",components:4,offset:24,type:"Uint8",normalize:true}]},v.BufferType.VERTEX);return{vao1:new dp(),vertex:e,element1:new v(i.index,{components:1},v.BufferType.ELEMENT)}},createOverlayBlockData:function(T,i){var e=new v(T.vertex,{components:7,members:[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_normal",components:3,offset:12,type:"Float32"},{name:"a_color",components:4,offset:24,type:"Uint8",normalize:true}]},v.BufferType.VERTEX);return{vao1:new dp(),vertex:e,element1:new v(T.index,{components:1},v.BufferType.ELEMENT)}},createArrowData:function(e){return{vao1:new dp(),element1:new v(e[1],{components:1},v.BufferType.ELEMENT),vertex:new v(e[0],{components:en.arrowComponentsCount,members:en.arrow},v.BufferType.VERTEX)}},createGroundOverlayData:function(ji,jj){if(!ji){return null}var jk=[0,0,1,0,1,1,0,1];var jh=ji.vertex;var e=[];var T={};var je=ji.overlay;if(je.isPixelMap&&je.pHashcode){if(!je.maskUV){je.maskUV=je.buildFillMaskVertex()}var jl=je.maskUV;for(var jf=0;jf<jh.length;jf+=2){e.push(jh[jf]);e.push(jh[jf+1]);e.push(jk[jf]);e.push(jk[jf+1]);e.push(jl[jf]);e.push(jl[jf+1])}ji.finnalVertex=new Float32Array(e);T={components:6,members:[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_texture_coord",components:2,offset:8,type:"Float32"},{name:"a_mask_coord",components:2,offset:16,type:"Float32"}]}}else{for(var jf=0;jf<jh.length;jf+=2){e.push(jh[jf]);e.push(jh[jf+1]);e.push(jk[jf]);e.push(jk[jf+1])}ji.finnalVertex=new Float32Array(e);T={components:4,members:[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_texture_coord",components:2,offset:8,type:"Float32"}]}}var jg=this._groundoverlayBuffer;this._groundoverlayBuffer=jg.vertex=new v(ji.finnalVertex,T,v.BufferType.VERTEX);jg.vao1=new dp();jg.textureType=ji.textureSource;jg.element1=new v(ji.index,{components:1},v.BufferType.ELEMENT);return jg},createOverlayFillData:function(T,e,i){var je=this._polygonBuffer[i];if(!je){je={};je.vertex=new v(T[1],{components:2,members:[{name:"a_pos",components:2,offset:0,type:e}]},v.BufferType.VERTEX);je.vao1=new dp();je.element1=new v(T[2],{components:1},v.BufferType.ELEMENT)}else{je.vao1.update(this.gl,je.vertex,T[1],T[1].length,je.element1,T[2],T[2].length)}return je},createFillData:function(jf){if(!jf[0]){return null}var T=new v(jf[0],{components:en.fillComponentsCount,members:en.fill},v.BufferType.VERTEX);var e={vao1:new dp(),vertex:T,element1:new v(jf[1],{components:1},v.BufferType.ELEMENT)};if(jf[2]){e.border=[];for(var je=0;je<jf[2].length;je++){e.border.push({element1:new v(jf[2][je].styleData[1],{components:1},v.BufferType.ELEMENT),vao1:new dp(),vertex:this.createLineBuffer(null,jf[2][je].styleData[0],false)})}}return e},createLineBuffer:function(e,T,i){if(T){if(e){if(e.length>T.length){T=new Float32Array(e.length)}T.set(e)}}if(i){return new v(T,{components:en.overlayLineComponentsCount,members:en.overlayLine},v.BufferType.VERTEX)}else{return new v(T,{components:en.lineComponentsCount,members:en.line},v.BufferType.VERTEX)}},createLineData:function(i){var e={};e.vertex=this.createLineBuffer(null,i[0],false);e.element1=new v(i[1],{components:1},v.BufferType.ELEMENT);e.vao1=new dp();return e},createPolylineData:function(je){var ji=[];for(var T=0;T<je.length;T++){var jf=je[T].styleData[0];var e=je[T].styleData[1];if(jf.length===0){continue}var jh={};if(!this._polylineBufferArray[T]){this._polylineBufferArray[T]={vertex:null,element1:null,vao1:null}}var jg=this._polylineBufferArray[T];if(!jg.vertex){jg.vertex=this.createLineBuffer(jf,this._float32ArrayForPolyline,true)}if(e.length>this._uint16ArrayForPolyline.length){this._uint16ArrayForPolyline=new Uint16Array(e.length)}this._uint16ArrayForPolyline.set(e);if(!jg.element1){jg.element1=new v(this._uint16ArrayForPolyline,{components:1},v.BufferType.ELEMENT,e.length)}if(!jg.vao1){jg.vao1=new dp()}else{if(jf.length>this._float32ArrayForPolyline.length){this._float32ArrayForPolyline=new Float32Array(jf)}else{this._float32ArrayForPolyline.set(jf)}jg.vao1.update(this.gl,jg.vertex,this._float32ArrayForPolyline,jf.length,jg.element1,this._uint16ArrayForPolyline,e.length)}ji.push(jg)}if(ji.length===0){return null}return ji},createLabelData:function(jh,jv,ju,jg){if(jh.length===0){return}var jF=this._labelTextTextureSize;var jo=0;var je=0;var jA=jh.length;var jy=this.gl;var jD=this[ju];var jp=0;var jG=d5;var jB=bD;if(jg){jG=iw;jB=d}for(var jz=0;jz<jA;jz++){var jq=jh[jz];if(!jq||!jq.renderData){continue}var jf=jq.textureSource;if(!jf){continue}var T=jq.renderData.vertex;jp+=T.length/jG}var jn=jp*jG;if(jn>this._labelVertexBuffer.length){this._labelVertexBuffer=new Float32Array(jn);if(jD){jD.vao.destroy(jy);jD.destroy(jy);jD=this[ju]=null}}var jk=this._iconLabelBuffer;if(jn>this._labelIconVertexBuffer.length){this._labelIconVertexBuffer=new Float32Array(jn);if(jk){jk.vao.destroy(jy);jk.destroy(jy);jk=this._iconLabelBuffer=null}}for(var jz=0;jz<jA;jz++){var jq=jh[jz];if(!jq){continue}if(!jq.renderData&&jq.iconRenderData){if(je+jG<this._labelIconVertexBuffer.length){this._labelIconVertexBuffer.set(jq.iconRenderData.vertex,je);je+=jG}continue}var T=jq.renderData.vertex;var jr=jq.renderData.textureCoord;var jf=jq.textureSource;if(!jf){continue}var e=jf.width;var jt=jq.textureHeight||jf.height;var jm=this._labelTextureAtlasOffset[jf.id];if(!jm&&!this._textureAddToJob[jf.id]&&this._currentTextureIsFull===false){if(!this._labelTextTextureAtlas){this._labelTextTextureAtlas=this._textTextureManager.getEmptyTexture()}jm=this._labelTextTextureAtlas.addTexture(jf,jt);this._labelTextureAtlasOffset[jf.id]=jm}if(jm){var js=jB/2;var jj=9;if(jg){jj=8}for(var jx=0,jw=T.length;jx<jw;jx+=jB){T[jx+jj]=jr[jx/js]*e/jF[0]+jm.width;T[jx+jj+1]=jr[jx/js+1]*jt/jF[1]+jm.height}this._labelVertexBuffer.set(T,jo);jo+=T.length;if(jq.iconRenderData){if(je+jG<this._labelIconVertexBuffer.length){this._labelIconVertexBuffer.set(jq.iconRenderData.vertex,je);je+=jG}}}}if(jo===0&&je===0){return}var jC=null;if(jo>0){if(!jD){var ji=en.symbol;if(jg){ji=en.symbolline}jD=this[ju]=new v(this._labelVertexBuffer,{components:jB,members:ji},v.BufferType.VERTEX,jo/jB);this[ju].vao=new dp()}else{this[ju].vao.update(this.gl,jD,this._labelVertexBuffer,jo/jB)}}var jl=null;if(je>0){jl=new dp();if(!jk){jk=this._iconLabelBuffer=new v(this._labelIconVertexBuffer,{components:bD,members:en.symbol},v.BufferType.VERTEX,je/bD);jk.vao=new dp()}else{jk.vao.update(this.gl,jk,this._labelIconVertexBuffer,je/bD)}}var jE=null;if(this._labelTextTextureAtlas){jE=this._labelTextTextureAtlas.getTexture()}return{vao:this[ju]?this[ju].vao:null,vaoIcon:this._iconLabelBuffer?this._iconLabelBuffer.vao:null,vertex:jo>0?jD:null,texture:jE,iconVertex:je>0?jk:null,iconTexture:this._iconTextureAtlas.getTexture()}},_addToAsyncJob:function(e){if(this._textureAddToJob[e.id]){return}var T=this;var i=(function(je){return function(){delete T._textureAddToJob[je.id];if(T._currentTextureIsFull){return}if(!T._labelTextTextureAtlas){T._labelTextTextureAtlas=T._textTextureManager.getEmptyTexture()}var jf=je.height;var jg=T._labelTextTextureAtlas.addTexture(je,jf);T._labelTextureAtlasOffset[je.id]=jg;T._map.dispatchEvent(new fa("onrefresh"))}})(e);this._textureJobScheduler.addJob(i);this._textureAddToJob[e.id]=true},createMarker3dData:function(e){if(e.length===0){return null}var jf=e.length*gh;if(jf>this._labelVertexBuffer3D.length){this._labelVertexBuffer3D=new Float32Array(jf);if(this._marker3dVertexBuffer){this._marker3dVertexBuffer.vao.destroy(this.gl);this._marker3dVertexBuffer.destroy(this.gl);this._marker3dVertexBuffer=null}}var jt=0;for(var jp=0,jl=e.length;jp<jl;jp++){var jk=e[jp].renderData;var je=e[jp].textureSource;var jh=[0,0,0,0];var jj=e[jp].overlay;if(jk.finalVertexData){this._labelVertexBuffer3D.set(jk.finalVertexData,jt);jt+=gh;continue}jk.finalVertexData=[];var jg=jk.vertex;if(!jg){continue}if(je){var jr=jj._config.icon;var jq=jr.imageUrl;if(jr.ratio>1&&jr.srcSetObject["2x"]){jq=jr.srcSetObject["2x"]}if(!jq&&jr.imageDom){jq=jr.imageDom.id}var T=jj.textureCoordGLMap;if(!T){var jm=this._imageMergedOffset[jq];if(!jm){je.id=jq;jm=this.textureAtlasMarker.addTexture(je);this._imageMergedOffset[jq]=jm}var ji=new h8(je.width,je.height);if(jr.imageSize){jr.ratio=je.width/jr.imageSize.width}T=this._calcTextureCoords(ji,jr.size,jr.imageOffset,jm,jr.ratio);jj.textureCoordGLMap=T}jh=[T[0],T[1],T[4],T[5]]}for(var jo=0;jo<jg.length;jo++){for(var jn=0;jn<gh-4;jn++){jk.finalVertexData.push(jg[jo][jn])}jk.finalVertexData.push(jh[0],jh[1],jh[2],jh[3])}this._labelVertexBuffer3D.set(jk.finalVertexData,jt);jt+=gh}var js=this._marker3dVertexBuffer;if(!js){this._marker3dVertexBuffer=js=new v(this._labelVertexBuffer3D,{components:15,members:[{name:"a_pos",components:4,offset:0,type:"Float32"},{name:"a_height",components:1,offset:16,type:"Float32"},{name:"a_color",components:4,offset:20,type:"Float32"},{name:"a_size",components:1,offset:36,type:"Float32"},{name:"a_shape",components:1,offset:40,type:"Float32"},{name:"a_texture_coord",components:4,offset:44,type:"Float32"}]},v.BufferType.VERTEX,jt/gh);this._marker3dVertexBuffer.vao=new dp()}else{this._marker3dVertexBuffer.vao.update(this.gl,js,this._labelVertexBuffer3D,jt/gh)}return{vao:this._marker3dVertexBuffer.vao,vertex:js,texture:je?this.textureAtlasMarker.getTexture():null}},createMarkerData:function(e){if(e.length===0){return null}var jl=e.length*d5;if(jl>this._labelVertexBuffer.length){this._labelVertexBuffer=new Float32Array(jl);if(this._markerVertexBuffer){this._markerVertexBuffer.vao.destroy(this.gl);this._markerVertexBuffer.destroy(this.gl);this._markerVertexBuffer=null}}var jn=0;for(var jh=0,je=e.length;jh<je;jh++){var ji=e[jh].overlay;if(ji._visible===false){continue}var jq=e[jh].renderData;if(jq.finalVertexData){this._labelVertexBuffer.set(jq.finalVertexData,jn);jn+=d5;continue}jq.finalVertexData=[];var jp=jq.vertex;if(!jp){continue}var jo=ji._config.icon;var T=e[jh].textureSource;var jg=jo.imageUrl;if(jo.ratio>1&&jo.srcSetObject["2x"]){jg=jo.srcSetObject["2x"]}if(!jg&&jo.imageDom){jg=jo.imageDom.id}var jr=ji.textureCoordGLMap;if(!jr){var jj=this._imageMergedOffset[jg];if(!jj){T.id=jg;jj=this.textureAtlasMarker.addTexture(T);this._imageMergedOffset[jg]=jj}var jm=new h8(T.width,T.height);if(jo.imageSize){jo.ratio=T.width/jo.imageSize.width}jr=this._calcTextureCoords(jm,jo.size,jo.imageOffset,jj,jo.ratio);ji.textureCoordGLMap=jr}for(var jf=0;jf<jp.length;jf++){jq.finalVertexData.push(jp[jf][0],jp[jf][1],jp[jf][2],jp[jf][3],0,jp[jf][4],jp[jf][5],0,0,jr[jf*2],jr[jf*2+1])}this._labelVertexBuffer.set(jq.finalVertexData,jn);jn+=d5}var jk=this._markerVertexBuffer;if(!jk){this._markerVertexBuffer=jk=new v(this._labelVertexBuffer,{components:bD,members:en.symbol},v.BufferType.VERTEX,jn/bD);this._markerVertexBuffer.vao=new dp()}else{this._markerVertexBuffer.vao.update(this.gl,jk,this._labelVertexBuffer,jn/bD)}return{vao:this._markerVertexBuffer.vao,vertex:jk,texture:this.textureAtlasMarker.getTexture()}},_calcTextureCoords:function(ji,jl,jq,jk,i){if(!ji||!jl||!jq||!jk){}i=i||1;var T=this.textureAtlasMarker.getSize();var jj=-jq.width*i;var e=-jq.height*i;var jp=-jj/T.width+jk.width;var jh=(ji.height+e-jl.height*i)/T.height+jk.height;var jo=(-jj+jl.width*i)/T.width+jk.width;var jg=jh;var jn=jo;var jf=(ji.height+e)/T.height+jk.height;var jm=jp;var je=jf;return[jp,jh,jo,jg,jn,jf,jp,jh,jn,jf,jm,je]},createData:function(jg){var ji={};var jh=jg.renderData;var e=jg.tileInfo;if(jh.base){ji.base=[];for(var T=0;T<jh.base.length;T++){var jf=jh.base[T];var je=jf.type;if(je==="fill"){ji.base.push(this.createFillData(jf.data,e));aO.addDrawIntoAreaSpots(e,jf)}else{if(je==="line"){ji.base.push(this.createLineData(jf.data))}}}}if(jh.base3d){ji.base3d=[];for(var T=0;T<jh.base3d.length;T++){var jf=jh.base3d[T];var je=jf.type;if(je==="fill"){aO.addDrawIntoAreaSpots(e,jf);ji.base3d.push(this.createFillData(jf.data))}else{if(je==="line"){ji.base3d.push(this.createLineData(jf.data))}else{if(je==="arrow"){ji.base3d.push(this.createArrowData(jf.data))}else{if(je==="block"){ji.base3d.push(this.createBlockData(jf.data))}}}}}}if(jh.virtual){ji.virtual=[];for(var T=0;T<jh.virtual.length;T++){var jf=jh.virtual[T];var je=jf.type;if(je==="fill"){ji.virtual.push(this.createFillData(jf.data))}else{if(je==="line"){ji.virtual.push(this.createLineData(jf.data))}}}}if(jh.building3d){aO.addDrawIntoAreaSpots(e,jh.building3d);ji.building3d=this.createBlockData(jh.building3d)}if(jh.building3dMesh){ji.building3dMesh=this.createBlockData(jh.building3dMesh)}if(jh.indoorBase){ji.indoorBase=[];for(var T=0;T<jh.indoorBase.length;T++){var jf=jh.indoorBase[T];var je=jf.type;if(je==="fill"){ji.indoorBase.push(this.createFillData(jf.data))}else{if(je==="line"){ji.indoorBase.push(this.createLineData(jf.data))}}}}if(jh.indoorBaseContour){ji.indoorBaseContour=[];for(var T=0;T<jh.indoorBaseContour.length;T++){var jf=jh.indoorBaseContour[T];ji.indoorBaseContour.push(this.createLineData(jf.data))}}if(jh.indoorArea3D){ji.indoorArea3D=[];for(var T=0;T<jh.indoorArea3D.length;T++){ji.indoorArea3D.push(this.createBlockData(jh.indoorArea3D[T]))}}if(jh.indoorBorder3D){ji.indoorBorder3D=[];for(var T=0;T<jh.indoorBorder3D.length;T++){ji.indoorBorder3D.push(this.createLineData(jh.indoorBorder3D[T].data))}}return ji},destroyData:function(e){if(!e){return}var i=this.gl;e.vao1&&e.vao1.destroy(i);e.vertex&&e.vertex.destroy(i);e.element1&&e.element1.destroy(i)},destroyCache:function(jf){if(!jf){return}for(var T in jf){if(T!=="_key_"&&jf.hasOwnProperty(T)){if(T==="building3d"){this.destroyData(jf[T])}else{var je=jf[T].length;for(var e=0;e<je;e++){this.destroyData(jf[T][e])}}}}},createDataFromCache:function(i){var e=this.calcBufferKey(i);if(!this._cache.getData(e)){this._cache.setData(e,this.createData(i))}return this._cache.getData(e)},calcBufferKey:function(jf){var e=jf.tileInfo;var je=jf.mapType+"_"+e.style+"_"+e.col+"_"+e.row+"_"+e.useZoom;if(jf.renderData&&jf.renderData.indoorData){var jg=jf.renderData.indoorData;var i=[];for(var T in jg){i.push(jg[T].currentFloor)}je=je+"_"+i.join("_")}return je},draw3D:function(e){this.setLayerDepth(ft);var i=this._map._displayOptions;if(this._map.getTilt()>0&&i.indoor){this.drawArea3D(e);this.drawArea3DBorder(e)}this.drawBuildings(e)},drawBuildings:function(T){var ji=this._map;if(ji._displayOptions.building===false){return}if(!T[0]){return}var e=false;var jg=T[0].length;for(var jf=0;jf<jg;jf++){for(var je=0;je<T[0][jf].length;je++){if(T[0][jf][je]&&T[0][jf][je].renderData&&(T[0][jf][je].renderData.building3d||T[0][jf][je].renderData.building3dMesh)){e=true;break}}}if(!e){return}var jh=this._stencilMask;if(this._map.stencil&&this._map.stencil.isBuildingMask){if(jh.length>0&&jh[0].isStencilMask&&this._map.stencil.showRegion==="inside"){this.enableStencilMask(jh,true);this._state.colorMask(false,false,false,false);iV(this,this._sideLightDirVec3,true);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3d",false);this.drawBuildingsTile(T[0][jf],"building3dMesh",false)}this._state.colorMask(true,true,true,true);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3d",true)}iV(this,this._sideLightDirVec3,false);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3dMesh",true)}this.disableStencilMask();if(this.isDrawShadow===true){this.gl.clear(this.gl.STENCIL_BUFFER_BIT);this.gl.stencilFunc(this.gl.ALWAYS,1,255);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE);this._state.colorMask(false,false,false,false);this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolygon(jh);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.DECR);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3d",true)}iV(this,this._sideLightDirVec3,false);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3dMesh",true)}this._state.colorMask(true,true,true,true);this.gl.stencilFunc(this.gl.NOTEQUAL,0,255);this.setLayerDepth(ft);this._state.disableCap("depthTest");eC(this,this._shadowPosVec3);for(var jf=0;jf<T[0].length;jf++){this.drawShadow(T[0][jf])}this._state.enableCap("depthTest")}}else{if(jh.length>0&&jh[0].isStencilMask&&this._map.stencil.showRegion==="outside"){this.enableStencilMaskOut(jh,true);this._state.colorMask(false,false,false,false);iV(this,this._sideLightDirVec3,true);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3d",false);this.drawBuildingsTile(T[0][jf],"building3dMesh",false)}this._state.colorMask(true,true,true,true);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3d",true)}iV(this,this._sideLightDirVec3,false);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3dMesh",true)}this.disableStencilMask();if(this.isDrawShadow===true){this.gl.clear(this.gl.STENCIL_BUFFER_BIT);this.gl.stencilFunc(this.gl.ALWAYS,1,255);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE);this._state.colorMask(false,false,false,false);this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolygon(jh);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3d",true)}iV(this,this._sideLightDirVec3,false);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3dMesh",true)}this._state.colorMask(true,true,true,true);this.gl.stencilFunc(this.gl.NOTEQUAL,1,255);this.setLayerDepth(ft);this._state.disableCap("depthTest");eC(this,this._shadowPosVec3);for(var jf=0;jf<T[0].length;jf++){this.drawShadow(T[0][jf])}this._state.enableCap("depthTest")}}}}else{this._state.colorMask(false,false,false,false);iV(this,this._sideLightDirVec3,true);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3d",false);this.drawBuildingsTile(T[0][jf],"building3dMesh",false)}this._state.colorMask(true,true,true,true);this.gl.stencilFunc(this.gl.ALWAYS,1<<7,bF);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3d",true)}iV(this,this._sideLightDirVec3,false);for(var jf=0;jf<T[0].length;jf++){this.drawBuildingsTile(T[0][jf],"building3dMesh",true)}if(this.isDrawShadow===true){this.gl.stencilFunc(this.gl.NOTEQUAL,1<<7,bF);this.setLayerDepth(ft);this._state.disableCap("depthTest");eC(this,this._shadowPosVec3);for(var jf=0;jf<T[0].length;jf++){this.drawShadow(T[0][jf])}this._state.enableCap("depthTest")}}this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP);this.gl.stencilFunc(this.gl.ALWAYS,0,255)},drawBuildingsTile:function(jh,je,T){for(var jg=0;jg<jh.length;jg++){var jf=jh[jg];if(jf.status!=="ready"){continue}var e=this.createDataFromCache(jf);if(e[je]){jf.mvMatrix=this._camera.getModelViewMatrix3D(jf.tileInfo);hs.block(this,jf,e[je],T)}}},drawArea3D:function(T){var jh=this._map;if(!T[0]){return}var e=false;var jg=T[0].length;for(var jf=0;jf<jg;jf++){for(var je=0;je<T[0][jf].length;je++){if(T[0][jf][je]&&T[0][jf][je].renderData&&T[0][jf][je].renderData.indoorArea3D){e=true;break}}}if(!e){return}iV(this,this._sideLightDirVec3,true);for(var jf=0;jf<T[0].length;jf++){this.drawArea3DTile(T[0][jf],true)}},drawArea3DTile:function(jh,je){if(this._map.stencil&&this._map.stencil.isBuildingMask){this.switchStencilMask("on")}for(var jg=0;jg<jh.length;jg++){var jf=jh[jg];if(jf.status!=="ready"){continue}var e=this.createDataFromCache(jf);if(!e.indoorArea3D){continue}jf.mvMatrix=this._camera.getModelViewMatrix3D(jf.tileInfo);for(var T=0;T<e.indoorArea3D.length;T++){hs.block(this,jf,e.indoorArea3D[T],je)}}if(this._map.stencil&&this._map.stencil.isBuildingMask){this.switchStencilMask("off")}},drawArea3DBorder:function(jj,jl){var e=this._map;if(!jj[0]){return}var T=false;var jm=jj[0].length;for(var jh=0;jh<jm;jh++){for(var jg=0;jg<jj[0][jh].length;jg++){if(jj[0][jh][jg]&&jj[0][jh][jg].renderData&&jj[0][jh][jg].renderData.indoorBorder3D){T=true;break}}}if(!T){return}for(var je=0;je<jj[0].length;je++){var jk=jj[0][je];for(var jh=0;jh<jk.length;jh++){var ji=jk[jh];if(ji.status!=="ready"){continue}var jf=this.createDataFromCache(ji);if(!jf.indoorBorder3D){continue}ji.mvMatrix=this._camera.getModelViewMatrix3D(ji.tileInfo);this.tileScale=Math.pow(2,ji.tileInfo.zoom-this.mapZoom);for(var jg=0;jg<ji.renderData.indoorBorder3D.length;jg++){if(jf.indoorBorder3D[jg]&&jf.indoorBorder3D[jg]){this.drawTileLayer(ji,ji.renderData.indoorBorder3D[jg],jf.indoorBorder3D[jg],"line",{force3D:true})}}}}},drawShadow:function(jf){for(var je=0;je<jf.length;je++){var T=jf[je];if(T.status!=="ready"){continue}var e=this.createDataFromCache(T);var jg=T.renderData;if(jg&&(jg.base3d||jg.building3d||jg.building3dMesh)){T.mvMatrix=this._camera.getModelViewMatrix3D(T.tileInfo);if(jg.building3d){hs.shadow(this,T,e.building3d)}if(jg.building3dMesh){hs.shadow(this,T,e.building3dMesh)}if(!this.isFlat&&jg.base3d){hs.shadow(this,T,e.base3d,jg.base3d)}}}},drawHighlightFixedLabelSymbol:function(i){var e=this.createLabelData(i,true,"_highlightLabelBuffer");if(e&&e.vertex&&e.texture){hs.symbol(this,e.vertex,e.vao,this.mvMatrixMarker,e.texture,this._renderPng8Text,this.projMatrix,true,this._map._labelProcessor._useRound,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,1)}},drawFixedLabelSymbol:function(T){var i=this.createLabelData(T,true,"_fixedLabelBuffer");var e=this._map._displayOptions;if(e.poiText&&i&&i.vertex&&i.texture&&i.vao){hs.symbol(this,i.vertex,i.vao,this.mvMatrixMarker,i.texture,this._renderPng8Text,this.projMatrix,false,this._map._labelProcessor._useRound,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,1)}if(e.poiIcon&&i&&i.iconVertex&&i.iconTexture&&i.vaoIcon){hs.symbol(this,i.iconVertex,i.vaoIcon,this.mvMatrixMarker,i.iconTexture,false,this.projMatrix,false,this._map._labelProcessor._useRound,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,2)}},drawLineLabelSymbol:function(je,T){if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on")}var e=false;var i=this.createLabelData(je,e,"_lineLabelBuffer",true);if(i&&i.vertex&&i.texture&&i.vao){hs.symbolline(this,i.vertex,i.vao,T,i.texture,this._renderPng8Text,this.projMatrix,this._map._labelProcessor._useRound,this.mapHalfSize,this.mapZoom,this.cameraPosition,1)}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}},drawSymbol:function(je,T){var i=this.createMarkerData(je);if(!i){return}T=T||{};var e=T.fixPosition||false;hs.symbol(this,i.vertex,i.vao,this.mvMatrixMarker,i.texture,false,this.projMatrix,false,this._map._overlayMgrGL._useRound,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,null,e)},drawMarker3D:function(T){var e=this.createMarker3dData(T);if(!e){return}var i=T[0].overlay._config;hs.marker3d(this,{mvMatrix:this.mvMatrixMarker},this.cameraPosHigh,this.cameraPosLow,e,i)},drawPolyline:function(i){var e=this.createPolylineData(i);if(!e){return}hs.line(this,{mvMatrix:this.mvMatrixPoly},i,e,true)},drawPolygon:function(T){var e;for(var je=0;je<T.length;je++){e=this.createOverlayFillData(T[je],"Float32",je);if(T[je].hasMultipleParts){hs.fill(this,{mvMatrix:this.mvMatrixPoly},T[je],e,true,{usePolygonStencil:true,drawPolygonPass:1});hs.fill(this,{mvMatrix:this.mvMatrixPoly},T[je],e,true,{usePolygonStencil:true,drawPolygonPass:2})}else{hs.fill(this,{mvMatrix:this.mvMatrixPoly},T[je],e,true)}}},drawGroundOverlay:function(jj){var je;for(var jf=0;jf<jj.length;jf++){je=this.createGroundOverlayData(jj[jf],jf);var ji=this._textureCache.getData(jj[jf].src);if(!ji){var jg=this.gl;ji=dt.utils.createTexture(jg,jj[jf].textureSource);if(je.textureType.localName!=="video"){this._textureCache.setData(jj[jf].src,ji)}}var T=jj[jf].overlay;var jh=null;if(T.isPixelMap&&T.pHashcode){var jk=T.src+"_pixelmap";jh=this._textureCache.getData(jk);if(!jh||(T.pHashcode!==T.pHashcodeOld)){var jg=this.gl;T.pHashcodeOld=T.pHashcode;jh=dt.utils.createTexture(jg,T.pixelColorMap.canvas);this._textureCache.setData(jk,jh);T.setImageObject(jj[jf].textureSource)}var e=null;if(jj[jf].maskTextureSource){e=this._textureCache.getData(jj[jf].masksrc);if(!e){var jg=this.gl;e=dt.utils.createTexture(jg,jj[jf].maskTextureSource);this._textureCache.setData(jj[jf].masksrc,e);T.setMaskImageObject(jj[jf].maskTextureSource)}}}hs.groundoverlay(this,{mvMatrix:this.mvMatrixPoly},jj[jf],je,ji,jh,e)}},drawPrism:function(e){var T;for(var je=0;je<e.length;je++){T=this.createOverlayBlockData(e[je],je);hs.overlayBlock(this,{mvMatrix:this.mvMatrixPoly},T)}},drawBase:function(jo,jf,jh,jk,ji){var jn=undefined;var T=0;if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on")}for(var je=0;je<jo.length;je++){var jj=jo[je];if(jj.dataType===2||!jj.dataType){var jr=jj.tileInfo.useZoom;if(jr!==jn){jf++;jn=jr}jj.baseLayerHeight=jf;if(ji&&jk===0&&jj.status!=="ready"){jj.mvMatrix=this._camera.getModelViewMatrix3D(jj.tileInfo);if(!this._map.stencil){this.renderGrid(jj)}}if(jj.status==="ready"){T=Math.max(T,jj.renderData.base.length)}}}for(var e=0;e<T;e++){for(var je=0;je<jo.length;je++){var jj=jo[je];if(jj.dataType===2||!jj.dataType){if(jj.status!=="ready"){continue}if(!jj.renderData.base[e]){continue}jj.mvMatrix=this._camera.getModelViewMatrix3D(jj.tileInfo);var jg=Math.floor(jh);var i=this.createDataFromCache(jj);this.tileScale=Math.pow(2,jj.tileInfo.zoom-jh);this.tileScaleFromStart=Math.pow(2,jj.tileInfo.useZoom-eN[jj.tileInfo.zoom].start);this.setLayerDepth(jj.baseLayerHeight);var jq=jj.renderData.base[e];var jl=jq.type;var jm=i.base[e];var jp=false;if(this._map.stencil&&this._map.stencil.isMapMask){jp=true}this.drawTileLayer(jj,jq,jm,jl,{withStencil:jl==="line"&&jj.tileInfo.zoom<10&&ji&&!jp})}}}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}return ++jf},drawTileBase3D:function(jg,jk,T,jj){jg.mvMatrix=this._camera.getModelViewMatrix3D(jg.tileInfo);if(jg.status!=="ready"){return}var jf=Math.floor(jk);var e=this.createDataFromCache(jg);this.tileScale=Math.pow(2,jg.tileInfo.zoom-jk);this.tileScaleFromStart=Math.pow(2,jg.tileInfo.useZoom-eN[jg.tileInfo.zoom].start);if(!this.isFlat){var jl=this._stencilMask;if(jl.length>0&&jl[0].isStencilMask){this.setLayerDepth(40)}else{this.setLayerDepth(ft)}}else{this.setLayerDepth(T)}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on",true,true)}for(var je=0;je<jg.renderData.base3d.length;je++){var jm=jg.renderData.base3d[je];var jh=jm.type;var ji=e.base3d[je];if(jh!=="block"){if(!this.isFlat){if(jj===d8&&!jm.has3D){continue}else{if(jj===eo&&!jm.has2D){continue}}}if(jh==="fill"&&jj===d8){this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE)}this.drawTileLayer(jg,jm,ji,jh,{drawPart:jj});if(jh==="fill"&&jj===d8){this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP)}}else{if(!this.isFlat&&jj===d8){this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE);hs.block(this,jg,ji,true);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP)}}}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}},drawIndoorBase:function(jj,jg){if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on")}if(jj.status!=="ready"){return}jj.mvMatrix=this._camera.getModelViewMatrix3D(jj.tileInfo);var je=Math.floor(jg);var T=this.createDataFromCache(jj);this.tileScale=Math.pow(2,jj.tileInfo.zoom-jg);this.tileScaleFromStart=Math.pow(2,jj.tileInfo.useZoom-eN[jj.tileInfo.zoom].start);if(jj.renderData.indoorBaseContour&&this.showIndoorContour){for(var jf=0;jf<jj.renderData.indoorBaseContour.length;jf++){var ji=jj.renderData.indoorBaseContour[jf];if(ji.uid!==this.currentIndoorUid){continue}var jh=ji.type;var e=T.indoorBaseContour[jf];this.drawTileLayer(jj,ji,e,jh)}}if(jj.renderData.indoorBase){for(var jf=0;jf<jj.renderData.indoorBase.length;jf++){var ji=jj.renderData.indoorBase[jf];var jh=ji.type;var e=T.indoorBase[jf];this.drawTileLayer(jj,ji,e,jh)}}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}},drawTileVirtual:function(jj,jg){if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on")}jj.mvMatrix=this._camera.getModelViewMatrix3D(jj.tileInfo);if(jj.status!=="ready"){return}var je=Math.floor(jg);var T=this.createDataFromCache(jj);this.tileScale=Math.pow(2,jj.tileInfo.zoom-jg);this.tileScaleFromStart=Math.pow(2,jj.tileInfo.useZoom-eN[jj.tileInfo.zoom].start);this.setLayerDepth(0);this._state.disableCap("depthTest");for(var jf=0;jf<jj.renderData.virtual.length;jf++){var ji=jj.renderData.virtual[jf];var jh=ji.type;var e=T.virtual[jf];this.drawTileLayer(jj,ji,e,jh)}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}this._state.enableCap("depthTest")},drawRasterTile:function(jn,jl,jm){var jp={};if(jm&&jm.isPixelMap){var jq=jn.tileInfo;var T=jm.buildFillMaskVertex(jq.col,jq.row,jq.zoom);var jk=jn.renderData.vertexAll.slice(0);var e=[];for(var ji=0;ji<jk.length;ji+=5){var jh=(ji/5)*2;var je=(ji/5)*7;e[je]=jk[ji];e[je+1]=jk[ji+1];e[je+2]=jk[ji+2];e[je+3]=jk[ji+3];e[je+4]=jk[ji+4];e[je+5]=T[jh];e[je+6]=T[jh+1]}jp=new v(new Float32Array(e),{components:7,members:[{name:"aVertexPosition",components:3,offset:0,type:"Float32"},{name:"aVertexTextureCoord",components:2,offset:12,type:"Float32"},{name:"aVertexMaskCoord",components:2,offset:20,type:"Float32"}]},v.BufferType.VERTEX)}else{jp=new v(new Float32Array(jn.renderData.vertexAll),{components:5,members:[{name:"aVertexPosition",components:3,offset:0,type:"Float32"},{name:"aVertexTextureCoord",components:2,offset:12,type:"Float32"}]},v.BufferType.VERTEX)}var jg={vao:new dp(),vertex:jp};var jo=this._textureCache.getData(jn.textureSource.src);if(!jo){var jj=this.gl;jo=dt.utils.createTexture(jj,jn.textureSource);this._textureCache.setData(jn.textureSource.src,jo)}if(jn.tileInfo.tileTypeName==="xyz"){jn.mvMatrix=this._camera.getXYZCustomModelViewMatrix3D(jn.tileInfo)}else{jn.mvMatrix=this._camera.getModelViewMatrix3D(jn.tileInfo)}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on")}var jf={texture:jo,_texture:jl,attach:jm};hs.raster(this,jg.vertex,jg.vao,jn.mvMatrix,this.projMatrix,jf);if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}},drawTileLayer:function(je,jf,e,T,i){if(i&&i.withStencil){this.renderTileClippingMask(je);this.enableTileClippingMask(je)}hs[T](this,je,jf,e,false,i);if(i&&i.withStencil){this.disableTileClippingMask()}},enableTileClippingMask:function(i,e){var T=this.gl;T.stencilFunc(T.EQUAL,i.clippingTileRefer,bI)},disableTileClippingMask:function(){var e=this.gl;e.stencilFunc(e.ALWAYS,0,255)},renderTileClippingMask:function(e){var i=this.gl;e.clippingTileRefer=++this.tileClippintRefer;this._state.stencilOp(i.KEEP,i.REPLACE,i.REPLACE);i.stencilFunc(i.ALWAYS,e.clippingTileRefer,bI);this._state.colorMask(false,false,false,false);hs.grid(this,e.mvMatrix,this.gridTextureScale);this._state.colorMask(true,true,true,true);this._state.stencilOp(i.KEEP,i.KEEP,i.KEEP)},clearGLStatus:function(e){var T=this.gl;var i=0;if(e.color){i|=T.COLOR_BUFFER_BIT}if(e.stencil){i|=T.STENCIL_BUFFER_BIT}if(e.depth){i|=T.DEPTH_BUFFER_BIT}T.clear(i)},renderGrid:function(e){this.setLayerDepth(aQ);hs.grid(this,e.mvMatrix,this.gridTextureScale)},setLayerDepth:function(e){if(this._preCurrentLayer===e){return}var i=1-e*this._depthEpsilon;var T=i-this._depthRange;this._preCurrentLayer=e;this.gl.depthRange(T,i)},_initCanvas:function(){var jh=this._map;var jf=jh.getSize();var je=jf.width;var e=jf.height;var i=jh.container;var ji=bL("canvas");var jg=ji.style;var T=jh.config.ratio;this._width=je;this._height=e;jg.cssText="position: absolute;left:0;top:0;width:"+je+"px;height:"+e+"px;z-index:0;";ji.width=Math.round(je*T);ji.height=Math.round(e*T);i.appendChild(ji);return ji},_getWebGLContext:function(){var i={alpha:true,premultipliedAlpha:false,antialias:!this._useSMAA,failIfMajorPerformanceCaveat:false,preserveDrawingBuffer:this._map.config.preserveDrawingBuffer,stencil:true};if(ev.Browser.safari){i.alpha=true}var T=this._map;var e=T.config.webgl2;return this._canvas.getContext(e?"webgl2":"webgl",i)||this._canvas.getContext("experimental-webgl",i)},_checkTextureAtlasUsage:function(){if(this._labelTextTextureAtlas){var e=this._labelTextTextureAtlas.getUsage();if(e>0.85){this._currentTextureIsFull=true}}},_initialize:function(){var jj=this.gl;var jf=this;this._map.addEventListener("update",function(i){if(i.changedStatus&&i.changedStatus.onsize_changed){jf._resizeHandler()}});var ji=this._map;ji.addEventListener("layer_clear",function(jk){jf._cache&&jf._cache.clear();jf._currentTextureIsFull=true;jh&&jh();jf._iconTextureAtlasOffset={};jf._iconTextureAtlasCoords={};var i=new fa("onupdate");ji.fire(i)});this.tileScale=1;this.stepZoom=ji.getZoom();this.polyZoomRatio=1;this.normalMatrix=mat4.create();this.background=ji.config.backgroundColor||dk;var jf=this;jf.updateBackground=function(){var i=ji.config.mapStyleId;if(typeof ji.config.style==="string"){jf.background=ji.config.backgroundColor||dk}else{if(bp["customStyleInfo_"+i]){var jk=bp["customStyleInfo_"+i]["bmapLandColor"];if(jk){jf.background=gR.parseHexToRgbaArray(jk)}else{jf.background=dk}}}jf._state.clearColor(jf.background)};ji.addEventListener("style_loaded",function(){jf.updateBackground()});this._state=dt.WebGLState.get(jj,bp.getGUID("glmap_"));this._state.clearColor(this.background);this._state.enableCap("stencilTest");this._state.enableCap("depthTest");this._state.enableCap("cullFace");this._state.depthFunc(jj.LEQUAL);this._state.enableCap("blend");this._state.blendFunc(jj.SRC_ALPHA,jj.ONE_MINUS_SRC_ALPHA,jj.ONE,jj.ONE_MINUS_SRC_ALPHA);this._state.depthMask(true);this._needToDestroy=[];bc.init(this);if(this._useSMAA){this.initSMAAFrameBuffers()}this._cache=new at(ev.Browser.ie?64:128,{clearCallback:function(i){jf._needToDestroy.push(i)}});this._map.on("zoom_changed",function(jk){var i=jk.target.getZoom();jf.stepZoom=Math.floor(i/0.25)*0.25});function jh(){for(var jl=0,jk=jf._needToDestroy.length;jl<jk;jl++){jf.destroyCache(jf._needToDestroy[jl])}jf._needToDestroy.length=0;if(jf._currentTextureIsFull===true){jf._labelTextTextureAtlas&&jf._textTextureManager.free(jf._labelTextTextureAtlas);jf._labelTextureAtlasOffset={};jf._currentTextureIsFull=false;jf._textureAddToJob={};jf._labelTextTextureAtlas=jf._textTextureManager.getEmptyTexture();jf._map.fire(new fa("onrefresh"))}}this._map.on("mapglidle",jh);this._map.on("destroy",function(){jf._canvas.removeEventListener("webglcontextlost",cA,false);var i=jf.gl.getExtension("WEBGL_lose_context");if(i){i.loseContext()}});this._textureJobScheduler=this._map.jobScheduler;this._depthEpsilon=8/Math.pow(2,16);this._depthRange=1-this._depthEpsilon*eI;this.programMgr=new aB(jj,this._map);this._skyColor=this._getSkyColor();ji.addEventListener("displayoptions_changed",function(){jf._skyColor=jf._getSkyColor()});var e=this._map.height/2;var jg=ji.config.skyColorStop||[0,0.1,0.7,1];for(var je=0;je<jg.length;je++){jg[je]*=e}var T=new Float32Array([0,jg[0],0,10000,jg[0],0,10000,jg[1],0,0,jg[0],0,10000,jg[1],0,0,jg[1],0,0,jg[1],0,10000,jg[1],0,10000,jg[2],1,0,jg[1],0,10000,jg[2],1,0,jg[2],1,0,jg[2],1,10000,jg[2],1,10000,jg[3],1,0,jg[2],1,10000,jg[3],1,0,jg[3],1]);this.skyVAO=new dp();this.skyBuffer=new v(T,{components:3,members:[{name:"aPos",components:3,offset:0,type:"Float32"}]},v.BufferType.VERTEX);this.textureAtlasMarker=new dt.TextureAtlas(this.gl,{width:2048,height:2048,unpackAlpha:true});this._imageMergedOffset={};this._labelGroundVertexBuffer=new Float32Array(10000);this._labelVertexBuffer=new Float32Array(65000);this._labelVertexBuffer3D=new Float32Array(65000);this._labelIconVertexBuffer=new Float32Array(65000);this._map.on("style_willchange",function(){jf._textRenderType=this.config.textRenderType;if(jf._textRenderType==="canvas"){jf._renderPng8Text=false}else{jf._renderPng8Text=true}jf._iconTextureManager=new dt.TextTextureManager(jj,{width:1024,height:1024,unpackAlpha:true});jf._iconTextureAtlas=jf._iconTextureManager.getEmptyTexture()})},_getSkyColor:function(){var e=this._map._displayOptions.skyColors;var je=[];for(var T=0;T<e.length;T++){var jg=gR.parseCSSColor(e[T]);je.push([jg[0]/255,jg[1]/255,jg[2]/255,jg[3]/255])}var jf=this._map.config.skyColor;if(jf){je=jf}return je},_resizeHandler:function(ji){var jk=this;var i=jk._map;var jh=i.getSize();var T=jh.width;var jl=jh.height;var jj=i.config.ratio;var je=this._canvas;var jf=je.style;jf.width=T+"px";jf.height=jl+"px";je.width=Math.round(T*jj);je.height=Math.round(jl*jj);jk._width=T;jk._height=jl;var jg=this.gl;jg.viewport(0,0,jg.drawingBufferWidth,jg.drawingBufferHeight);this._frameBufferSizeInvalid=true},createDebugBuffer:function(T){var i=g2[T];if(!this._debugBufferCache[i]){var e=[0,0,i,0,i,i,0,i];this._debugBufferCache[i]={vao:new dp(),buffer:new v(new Uint16Array(e),{components:2,members:[{name:"a_pos",components:2,offset:0,type:"Uint16"}]},v.BufferType.VERTEX)}}this.debugVAO=this._debugBufferCache[i].vao;this.debugBuffer=this._debugBufferCache[i].buffer},createGridBuffer:function(T){var i=g2[T];if(!this._gridBufferCache[i]){var e=new Float32Array([0,0,0,0,i,0,1,0,0,i,0,1,i,i,1,1]);this._gridBufferCache[i]={vao:new dp(),buffer:new v(e,{components:4,members:[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_tex",components:2,offset:8,type:"Float32"}]},v.BufferType.VERTEX)}}this.gridVAO=this._gridBufferCache[i].vao;this.gridBuffer=this._gridBufferCache[i].buffer},_handleContextStatus:function(){var e=this._canvas;e.addEventListener("webglcontextlost",cA,false)}});function be(e){this._map=e;this._overlays=[[],[],[],[],[],[],[]];this._overlayToBoundary=false;this._renderData=[[],[],[],[],[],[{styleData:[[],[]],texture:null,textureSize:null,zoomWithMap:null,overlay:null}],[]];this._polylineRenderData={};this._iconImage={};this._needRAF=0;this._customOverlays=[];this._useRound=true;this._ratio=1;if(fD()>1){this._ratio=2}e._overlayMgrGL=this;this._init()}ev.extend(be.prototype,{_init:function(){this._bind()},_bind:function(){var i=this;var je=this._map;function jg(jk){var ji=jk.overlay||this;var jj=jk.action||"";var jh=true;i._updateGraph(ji,jj,false,jh);if(jj==="remove"){i._removeOverlay(ji,jg)}}function T(jk){var jh=jk.overlay||this;var jj=jk.action||"";var ji=jk.imageUrlChanged||false;i._updateMarker(jh,jj,ji);if(jj==="remove"){i._removeOverlay(jh,T)}}je.on("beforeaddoverlay",function(ji){if(!(ji.overlay instanceof hL)){return}var jh=ji.overlay;i._initPolyOverLayBasePoint(jh,ji)});je.on("removeLayerMask",function(jh){if(!jh.hasLayerBoundary){i._overlayToBoundary=false;i._clearOverlayBasePoint()}});je.on("addoverlay",function jf(jk){if(!(jk.overlay instanceof hL)&&!(jk.overlay instanceof iU)&&!(jk.overlay instanceof dN)){return}var ji=jk.overlay;var jh=0;if(jk.overlay instanceof fl){jh=5}else{if(jk.overlay instanceof iU){jh=2}else{if(jk.overlay instanceof i5){jh=3}else{if(jk.overlay instanceof dN){jh=4}else{if(jk.overlay instanceof bM){jh=1}else{if(jk.overlay instanceof b3){jh=6}}}}}}for(var jj=0;jj<i._overlays[jh].length;jj++){if(i._overlays[jh][jj].hashCode===ji.hashCode){return}}if(jh!==2&&jh!==4){i._initPolyOverLayBasePoint(ji,jk)}i._overlays[jh].push(ji);if(jh!==2&&jh!==4){ji.on("lineupdate",jg);i._updateGraph(ji,"add",false,true)}else{if(jh===2){ji.on("status_change",T);i._updateMarker(ji,"add")}else{if(jh===4){ji.on("status_change",T);ji.on("lineupdate",T);i._updateMarker(ji,"add")}}}});je.on("update",function e(jk){var ji=false;for(var jj=0;jj<i._overlays[0].length;jj++){if(i._updateGraph(i._overlays[0][jj],"",true,false)===true){ji=true}}for(jj=0;jj<i._overlays[1].length;jj++){if(i._updateGraph(i._overlays[1][jj],"",true,false)===true){ji=true}}for(jj=0;jj<i._overlays[3].length;jj++){if(i._updateGraph(i._overlays[3][jj],"",true,false)===true){ji=true}}for(jj=0;jj<i._overlays[5].length;jj++){if(i._updateGraph(i._overlays[5][jj],"",true,false)===true){ji=true}}if(ji){i._mergePolylineGraphData();i._map._featureMgr.setOverlayData(i._renderData[5],1)}var jh=new fa("onrefresh");jh.source="webgloverlaymgr";this.fire(jh)});je.addEventListener("movestart",function(){if(this.getMapType()!=="B_NORMAL_MAP"){return}i._useRound=false});je.addEventListener("moveend",function(jj){if(this.getMapType()!=="B_NORMAL_MAP"){return}if(jj.userData&&jj.userData.readyToMove===true){return}i._useRound=true;var jh=false;for(var ji=0;ji<i._overlays[0].length;ji++){if(i._updateGraph(i._overlays[0][ji],"",true,true)===true){jh=true}}for(ji=0;ji<i._overlays[1].length;ji++){if(i._updateGraph(i._overlays[1][ji],"",true,true)===true){jh=true}}for(ji=0;ji<i._overlays[3].length;ji++){if(i._updateGraph(i._overlays[3][ji],"",true,true)===true){jh=true}}for(var ji=0;ji<i._overlays[5].length;ji++){if(i._updateGraph(i._overlays[5][ji],"",true,true)===true){jh=true}}if(jh){i._mergePolylineGraphData();i._map._featureMgr.setOverlayData(i._renderData[5],1)}});je.addEventListener("zoomstart",function(){if(this.getMapType()!=="B_NORMAL_MAP"){return}i._useRound=false});je.addEventListener("zoomend",function(){if(this.getMapType()!=="B_NORMAL_MAP"){return}i._useRound=true;var jh=false;for(var ji=0;ji<i._overlays[0].length;ji++){if(i._updateGraph(i._overlays[0][ji],"",true,true)===true){jh=true}}for(ji=0;ji<i._overlays[1].length;ji++){if(i._updateGraph(i._overlays[1][ji],"",true,true)===true){jh=true}}for(ji=0;ji<i._overlays[3].length;ji++){if(i._updateGraph(i._overlays[3][ji],"",true,true)===true){jh=true}}for(ji=0;ji<i._overlays[5].length;ji++){if(i._updateGraph(i._overlays[5][ji],"",true,true)===true){jh=true}}if(jh){i._mergePolylineGraphData();i._map._featureMgr.setOverlayData(i._renderData[5],1)}});if(je.temp.originMapType===BMAP_EARTH_MAP){return}this._syncOverlayFromMap(jg,T)},_initPolyOverLayBasePoint:function(i,je){var T=this;if(T._map._polyOverlayBasePoint&&je&&je.isLayerMask){T._overlayToBoundary=true}if(T._overlays[0].length===0&&T._overlays[1].length===0&&T._overlays[3].length===0&&T._overlays[5].length===0&&!T._overlayToBoundary){if(je&&je.isLayerMask){T._overlayToBoundary=true}T._map._polyOverlayBasePoint=i.getBoundsIn().getCenter();T._map.fire(new fa("onupdateoverlaymatrix"))}},_clearOverlayBasePoint:function(){if(this._map._polyOverlayBasePoint&&this._overlays[0].length===0&&this._overlays[1].length===0&&this._overlays[3].length===0&&this._overlays[5].length===0&&!this._overlayToBoundary){this._map._polyOverlayBasePoint=null}},_removeOverlay:function(T,jf){if(!(T instanceof hL)&&!(T instanceof iU)){return}var e=0;if(T instanceof fl){e=5}else{if(T instanceof iU){e=2}else{if(T instanceof i5){e=3}else{if(T instanceof dN){e=4}else{if(T instanceof bM){e=1}else{if(T instanceof b3){e=6}}}}}}for(var je=0;je<this._overlays[e].length;je++){if(this._overlays[e][je].hashCode===T.hashCode){this._overlays[e].splice(je,1);break}}this._clearOverlayBasePoint();T.off("lineupdate",jf)},_syncOverlayFromMap:function(ji,jh){var e=this._map._overlayArray;var jf=false;for(var jg=0;jg<e.length;jg++){var je=e[jg];if(je instanceof fl===true||je instanceof dT===true){this._initPolyOverLayBasePoint(je,null);this._overlays[5].push(je);je.on("lineupdate",ji);if(this._updateGraph(je,"add",true)===true){jf=true}}else{if(je instanceof gB===true){this._initPolyOverLayBasePoint(je,null);this._overlays[0].push(je);je.on("lineupdate",ji);if(this._updateGraph(je,"add",true)===true){jf=true}}else{if(je instanceof bM){this._initPolyOverLayBasePoint(je,null);this._overlays[1].push(je);je.on("lineupdate",ji);if(this._updateGraph(je,"add",true)===true){jf=true}}else{if(je instanceof i5===true){this._initPolyOverLayBasePoint(je,null);this._overlays[3].push(je);je.on("lineupdate",ji);if(this._updateGraph(je,"add",true)===true){jf=true}}else{if(je instanceof iU){this._overlays[2].push(je);je.on("status_change",jh);this._updateMarker(je,"add")}else{if(je instanceof dN){this._overlays[4].push(je);je.on("status_change",jh);je.on("lineupdate",jh);this._updateMarker(je,"add")}else{if(je instanceof b3){this._initPolyOverLayBasePoint(je,null);this._overlays[6].push(je);je.on("lineupdate",ji);if(this._updateGraph(je,"add",true)===true){jf=true}}}}}}}}}if(jf){this._mergePolylineGraphData();this._map._featureMgr.setOverlayData(this._renderData[5],1)}var T=new fa("onrefresh");T.source="webgloverlaymgr";this._map.fire(T)},_updateMarkerRenderData:function(jh,jg,jl){if(!this._renderData[jh.hashCode]){return false}var jm=false;var T=jh instanceof dN;var jk=T?4:2;var e=T?7:8;if(jg==="zIndex"){this._renderData[jk].sort(function(jq,i){return jq.overlay._zIndex-i.overlay._zIndex});this._map._featureMgr.setOverlayData(this._renderData[jk],e);return true}for(var jj=0;jj<this._renderData[jk].length;jj++){var jf=this._renderData[jk][jj];if(jf.hashCode===jh.hashCode){jm=true;jf.renderData=jh.getVertexInfoForGL(this._useRound);var jn=jf.overlay._config.icon;var jo=jn.imageUrl;var je=jn.imageDom;if(this._ratio>1&&jn.srcSetObject["2x"]){jo=jn.srcSetObject["2x"];jn.ratio=2}var ji;var jp;if(jo){jp=this._iconImage[jo]}else{if(je){jp=this._iconImage[je.id]}}if(jp){ji=jp.img}if(ji){jf.textureSource=ji;this._map._featureMgr.setOverlayData(this._renderData[jk],e);return true}jf.textureSource=null;this._removeMarkerFromRenderData(jh);this._addMarkerToRenderData(jh);break}}if(!jm&&jg==="setIcon"&&jl){this._renderData[jh.hashCode]=null;this._addMarkerToRenderData(jh)}return false},_addMarkerToRenderData:function(jg){if(this._renderData[jg.hashCode]){return false}this._renderData[jg.hashCode]=true;var jj=this;function jf(ju,jr,jq,jw){var jp=jr instanceof dN;var jt=jp?4:2;var jv=jp?7:8;if(jr.map&&jr._visible===true&&((jr instanceof iU&&jr.domElement!==null)||jr instanceof dN)){if(jq!==null){if(((jj._ratio===1||!jk.srcSetObject["2x"])&&jr._config.icon.imageUrl!==jq)||(jj._ratio>1&&jk.srcSetObject["2x"]&&jk.srcSetObject["2x"]!==jq)){return}}else{if(jw!==null){if(ju!==jw){return}}}var js=jr.getVertexInfoForGL(jj._useRound);jj._renderData[jt].push({overlay:jr,hashCode:jr.hashCode,textureSource:ju,renderData:js});jj._renderData[jr.hashCode]=true}else{jj._renderData[jr.hashCode]=null}jj._renderData[jt].sort(function(jy,jx){return jy.overlay._zIndex-jx.overlay._zIndex});jj._map._featureMgr.setOverlayData(jj._renderData[jt],jv)}var jk=jg._config.icon;if(jg instanceof dN&&!jk){var jm=jg.getVertexInfoForGL(jj._useRound);jj._renderData[4].push({overlay:jg,hashCode:jg.hashCode,textureSource:null,renderData:jm});jj._renderData[jg.hashCode]=true;jj._map._featureMgr.setOverlayData(jj._renderData[4],7);var jn=new fa("onrefresh");jn.source="webgloverlaymgr";jj._map.fire(jn);return true}var jl=jk.imageUrl;var je=jk.imageDom;var jh;var jo;if(this._ratio>1&&jk.srcSetObject["2x"]){jl=jk.srcSetObject["2x"];jk.ratio=2}if(jl){jo=this._iconImage[jl]}else{if(je){jo=this._iconImage[je.id]}}if(jo){jh=jo.img}if(jh){jf(jh,jg,jl,je);return true}if(jo){jo.pendings.push(jg)}else{if(jl){jh=new Image();jh.crossOrigin="anonymous";jh.onload=function(){jj._iconImage[jl].loaded=true;jj._iconImage[jl].img=this;for(var js=0;js<jj._iconImage[jl].pendings.length;js++){jf(this,jj._iconImage[jl].pendings[js],jl)}jj._iconImage[jl].pendings=[];var jq=jg instanceof dN;var jr=jq?4:2;var jt=jq?7:8;jj._map._featureMgr.setOverlayData(jj._renderData[jr],jt);var jp=new fa("onrefresh");jp.source="webgloverlaymgr";jj._map.fire(jp)};this._iconImage[jl]={pendings:[jg]};jh.src=jl}else{if(je){var T=je.id;jj._iconImage[T]={pendings:[],loaded:true,img:je};jf(je,jg,jl,je);var i=jg instanceof dN;var ji=i?4:2;var e=i?7:8;jj._map._featureMgr.setOverlayData(jj._renderData[ji],e);var jn=new fa("onrefresh");jn.source="webgloverlaymgr";jj._map.fire(jn)}}}return false},_removeMarkerFromRenderData:function(T){if(!this._renderData[T.hashCode]){return false}if(T instanceof dN){for(var je=0;je<this._renderData[4].length;je++){if(this._renderData[4][je].hashCode===T.hashCode){this._renderData[4].splice(je,1);break}}}else{if(T instanceof iU){var jg=T._config.icon;if(jg){var e=T._config.icon.imageUrl;if(this._ratio>1&&jg.srcSetObject["2x"]){e=jg.srcSetObject["2x"]}if(this._iconImage[e]&&this._iconImage[e].pendings){var jf=this._iconImage[e].pendings;for(var je=jf.length-1;je>=0;je--){if(jf[je]===T){jf.splice(je,1)}}}}for(var je=0;je<this._renderData[2].length;je++){if(this._renderData[2][je].hashCode===T.hashCode){this._renderData[2].splice(je,1);break}}}}this._renderData[T.hashCode]=null;return true},_updateGraph:function(je,jf,jg,e){var T=false;var jh="";if(je){jf=jf||"";if(!je.ifInMapView()){if(this._removeGraphFromRenderData(je)===true){T=true}je._notInView=true}else{if(jf==="add"||jf==="show"||je._notInView===true){je._notInView=false;if(je._visible===true){if(this._addGraphToRenderData(je)===true){T=true}jh="add"}}else{if(jf==="remove"||jf==="hide"){if(this._removeGraphFromRenderData(je)===true){T=true}}else{if(this._updateGraphRenderData(je,e)===true){T=true}else{T=this._updateGraphRenderData(je,jf)}}}}}if(!jg&&T){this._mergePolylineGraphData(jh);this._map._featureMgr.setOverlayData(this._renderData[5],1)}var i=new fa("onrefresh");i.source="webgloverlaymgr";this._map.fire(i);return T},_mergePolylineGraphData:function(je){if(je==="add"){var T=this._overlays[this._lastAddGraphIndex];if(!T[T.length-1]){return}var e=T[T.length-1].hashCode;var i=this._polylineRenderData[e];if(i){this._mergeOnePolylineData(i)}return}this._renderData[5].length=0;this._renderData[5][0]={style:[],styleData:[[],[]]};this._mergeGraphArrayData(this._overlays[0]);this._mergeGraphArrayData(this._overlays[5])},_mergeGraphArrayData:function(je){je.sort(function(jf,i){return jf.zIndex-i.zIndex});for(var T=0;T<je.length;T++){var e=je[T].hashCode;if(!this._polylineRenderData[e]){continue}this._mergeOnePolylineData(this._polylineRenderData[e])}},_mergeOnePolylineData:function(jq){var jo=this._renderData[5].length-1;var jf=this._renderData[5][jo];var i=this._renderData[5][jo].styleData[0];var jk=this._renderData[5][jo].styleData[1];var jl=9;for(var je=0;je<jq.styleData.length;je++){var T=jq.styleData[je];var jp=T[0];var jh=T[1];var jj=i.length/jl;var jn=jp.length/jl;var e=jq.overlay.canRenderDataBeMerged();var jm=true;if(jf.overlay&&!jf.overlay.canRenderDataBeMerged()){jm=false}if(jj+jn>65536||(jf.styleData[0].length>0&&e===false)||jm===false){jo++;jf=this._renderData[5][jo]={style:[],styleData:[[],[]],texture:null,textureSize:null,zoomWithMap:null,overlay:null};i=jf.styleData[0];jk=jf.styleData[1];jj=0}if(jf.styleData[0].length===0&&e===false){jf.texture=jq.texture;jf.textureSize=jq.textureSize;jf.zoomWithMap=jq.zoomWithMap;jf.overlay=jq.overlay}for(var ji=0;ji<jn;ji++){i[i.length]=jp[ji*jl];i[i.length]=jp[ji*jl+1];i[i.length]=jp[ji*jl+2];i[i.length]=jp[ji*jl+3];i[i.length]=jp[ji*jl+4];i[i.length]=jp[ji*jl+5];i[i.length]=jp[ji*jl+6];i[i.length]=jp[ji*jl+7];i[i.length]=jp[ji*jl+8]}for(var jg=0;jg<jh.length;jg++){jk[jk.length]=jh[jg]+jj}}},_addGraphToRenderData:function(je){if(this._renderData[je.hashCode]){return false}var jj;var ji;if(je instanceof i5){this._lastAddGraphIndex=3;var i=je.buildFillVertex(gS);var T={vertex:i.vertex,index:i.index,overlay:je};T.hashCode=je.hashCode;T.hasMultipleParts=je.hasMultipleParts;this._renderData[3].push(T);this._map._featureMgr.setOverlayData(this._renderData[3],6)}else{if(je instanceof bM){this._lastAddGraphIndex=1;ji=je.getFillStyleForGL();var i=je.buildFillVertex(gS);var jh=ji.type;var jf=this;if(jh==="image"){function jg(jn,jk){if(!jk){return}var jl={opacity:ji.opacity,vertex:i[0],index:i[1],textureSource:jn,src:jn.src,maskTextureSource:null,masksrc:null,overlay:je};jl.hashCode=je.hashCode;jl.hasMultipleParts=je.hasMultipleParts;function jm(){jf._renderData[1].push(jl);jf._map._featureMgr.setOverlayData(jf._renderData[1],5);var jp=new fa("onlineupdate");jp.overlay=je;je.dispatchEvent(jp)}if(je._config.maskPng){function jo(jq,jp){if(jp){je.hasMaskPng=true}else{je.hasMaskPng=false}jl.maskTextureSource=jp?jq:null;jl.masksrc=jp?jq.src:null;jm()}jf._imageLoad(je._config.maskPng,jo)}else{jm()}}this._imageLoad(ji.texture,jg)}else{if(jh==="canvas"){var T={textureSource:ji.texture,src:"canavs_"+new Date().valueOf(),opacity:ji.opacity,vertex:i[0],index:i[1],overlay:je};T.hashCode=je.hashCode;T.hasMultipleParts=je.hasMultipleParts;jf._renderData[1].push(T);jf._map._featureMgr.setOverlayData(jf._renderData[1],5)}else{if(jh==="video"){var e=document.createElement("video");e.controls=false;e.autoplay=true;e.crossOrigin="anonymous";e.loop=true;e.style.width="256px;";e.style.height="256px;";e.oncanplay=function(){if(this._videoloaded){return}var jk={opacity:ji.opacity,vertex:i[0],index:i[1],textureSource:this,src:this.src,overlay:je};jk.hashCode=je.hashCode;jk.hasMultipleParts=je.hasMultipleParts;jf._renderData[1].push(jk);jf._map._featureMgr.setOverlayData(jf._renderData[1],5);this._videoloaded=true};e.src=ji.texture;this._needRAF+=1}}}}else{if(je instanceof gB){this._lastAddGraphIndex=0;ji=je.getFillStyleForGL();var i=je.buildFillVertex(gS);var T=[ji,i[0],i[1]];T.overlay=je;T.hashCode=je.hashCode;T.hasMultipleParts=je.hasMultipleParts;this._renderData[0].push(T);this._map._featureMgr.setOverlayData(this._renderData[0],0);if(je._config.strokeOpacity>0&&je._config.strokeWeight>0){jj=je.buildVertex(fL,true);this._polylineRenderData[je.hashCode]={cacheIndex:jj.cacheIndex,hashCode:je.hashCode,styleData:jj,texture:je._config.texture,textureSize:je._config.textureSize,zoomWithMap:je._config.textureZoomWithMap,overlay:je}}}else{if(je instanceof b3){this._lastAddGraphIndex=6;ji=je.getFillStyleForGL();var i=je.buildFillVertex(gS);var T=[ji,i[0],i[1]];T.overlay=je;T.isStencilMask=true;T.hashCode=je.hashCode;T.hasMultipleParts=je.hasMultipleParts;this._renderData[6].push(T);this._map._featureMgr.setOverlayData(this._renderData[6],9)}else{this._lastAddGraphIndex=5;jj=je.buildVertex(fL,true);this._polylineRenderData[je.hashCode]={cacheIndex:jj.cacheIndex,hashCode:je.hashCode,styleData:jj,texture:je._config.texture,textureSize:je._config.textureSize,zoomWithMap:je._config.textureZoomWithMap,overlay:je}}}}}this._renderData[je.hashCode]=true;this._updateOverlayLoopRender();return true},_imageLoad:function(i,jf){var e=new Image();e.crossOrigin="anonymous";e.onload=function je(){jf&&jf(this,true)};e.onerror=function T(){jf&&jf(null,false)};e.src=i},_removeGraphFromRenderData:function(T){if(!this._renderData[T.hashCode]){return false}if(T instanceof i5){for(var je=0;je<this._renderData[3].length;je++){if(this._renderData[3][je].hashCode===T.hashCode){this._renderData[3].splice(je,1);break}}this._map._featureMgr.setOverlayData(this._renderData[3],6)}if(T instanceof gB){for(var je=0;je<this._renderData[0].length;je++){if(this._renderData[0][je].hashCode===T.hashCode){this._renderData[0].splice(je,1);break}}this._map._featureMgr.setOverlayData(this._renderData[0],0)}if(T instanceof bM){for(var je=0;je<this._renderData[1].length;je++){if(this._renderData[1][je].hashCode===T.hashCode){var e=this._renderData[1].splice(je,1);if(e[0].overlay._config.type==="video"){this._needRAF-=1}break}}this._map._featureMgr.setOverlayData(this._renderData[1],5)}if(T instanceof b3){for(var je=0;je<this._renderData[0].length;je++){if(this._renderData[6][je].hashCode===T.hashCode){this._renderData[6].splice(je,1);break}}this._map._featureMgr.setOverlayData(this._renderData[6],9)}this._polylineRenderData[T.hashCode]=null;this._renderData[T.hashCode]=null;this._updateOverlayLoopRender();return true},_updateOverlayLoopRender:function(){var e=this;if(this._needRAF>0){if(this._rafTimer){return}this._rafTimer=requestAnimationFrame(e._loopRender.bind(e))}else{cancelAnimationFrame(this._rafTimer);this._rafTimer=undefined}},_loopRender:function(){this._map._webglMapScene.startRenderThread();this._rafTimer=requestAnimationFrame(this._loopRender.bind(this))},_updateGraphRenderData:function(T,jk){var jj;var jg=false;var jh;if(T instanceof i5){var e=T.buildFillVertex(gS,jk);for(var jf=0;jf<this._renderData[3].length;jf++){var jl=this._renderData[3][jf];if(jl.hashCode===T.hashCode){this._renderData[3][jf].vertex=e.vertex;this._renderData[3][jf].index=e.index;this._map._featureMgr.setOverlayData(this._renderData[3],6);this._removeGraphFromRenderData(T);this._addGraphToRenderData(T);break}}}if(T instanceof gB){jh=T.getFillStyleForGL();var e=T.buildFillVertex(gS);for(var jf=0;jf<this._renderData[0].length;jf++){if(this._renderData[0][jf].hashCode===T.hashCode){this._renderData[0][jf][0]=jh;this._renderData[0][jf][1]=e[0];this._renderData[0][jf][2]=e[1];break}}this._map._featureMgr.setOverlayData(this._renderData[0],0)}jj=T.buildVertex(fL,jk);var ji=T.hashCode;if(this._polylineRenderData[ji]){if(!jj.inCache||jj.cacheIndex!==this._polylineRenderData[ji].cacheIndex){jg=true;var je=this._polylineRenderData[ji];je.cacheIndex=jj.cacheIndex;je.styleData=jj;je.texture=T._config.texture;je.textureSize=T._config.textureSize;je.zoomWithMap=T._config.textureZoomWithMap;je.overlay=T}}return jg},_updateMarker:function(i,jf,je){var T=false;if(i){jf=jf||"";if(jf==="add"||jf==="show"){if(i._visible===true&&i.getPositionIn()!==null){T=this._addMarkerToRenderData(i)}}else{if(jf==="remove"||jf==="hide"){T=this._removeMarkerFromRenderData(i)}else{T=this._updateMarkerRenderData(i,jf,je)}}}if(T){var e=new fa("onrefresh");e.source="webgloverlaymgr";this._map.fire(e)}}});function gS(jj,jo,jk,jl,jq){jk=jk||2;var jm=jo&&jo.length;var jh=jm?jo[0]*jk:jj.length;var jn=aM(jj,0,jh,jk,true);var jg=jq||[];if(!jn){return jg}var jf;var je;var T;var e;var jr;var jp;var js;jl=jl||0;if(jm){jn=Z(jj,jo,jn,jk)}if(jj.length>80*jk){jf=T=jj[0];je=e=jj[1];for(var ji=jk;ji<jh;ji+=jk){jr=jj[ji];jp=jj[ji+1];if(jr<jf){jf=jr}if(jp<je){je=jp}if(jr>T){T=jr}if(jp>e){e=jp}}js=Math.max(T-jf,e-je)}gF(jn,jg,jk,jf,je,js,null,jl);return jg}function aM(jg,ji,e,jh,T){var je;var jf;if(T===(gC(jg,ji,e,jh)>0)){for(je=ji;je<e;je+=jh){jf=ih(je,jg[je],jg[je+1],jf)}}else{for(je=e-jh;je>=ji;je-=jh){jf=ih(je,jg[je],jg[je+1],jf)}}if(jf&&gf(jf,jf.next)){cO(jf);jf=jf.next}return jf}function ez(je,e){if(!je){return je}if(!e){e=je}var T=je;var i;do{i=false;if(!T.steiner&&(gf(T,T.next)||iR(T.prev,T,T.next)===0)){cO(T);T=e=T.prev;if(T===T.next){return null}i=true}else{T=T.next}}while(i||T!==e);return e}function gF(i,je,jh,jf,e,jl,jk,ji){if(!i){return}if(!jk&&jl){hO(i,jf,e,jl)}var jj=i;var T;var jg;while(i.prev!==i.next){T=i.prev;jg=i.next;if(jl?R(i,jf,e,jl):du(i)){je.push(T.i/jh+ji);je.push(i.i/jh+ji);je.push(jg.i/jh+ji);cO(i);i=jg.next;jj=jg.next;continue}i=jg;if(i===jj){if(!jk){gF(ez(i),je,jh,jf,e,jl,1,ji)}else{if(jk===1){i=hE(i,je,jh,ji);gF(i,je,jh,jf,e,jl,2,ji)}else{if(jk===2){fd(i,je,jh,jf,e,jl,ji)}}}break}}}function du(T){var i=T.prev;var e=T;var jf=T.next;if(iR(i,e,jf)>=0){return false}var je=T.next.next;while(je!==T.prev){if(iM(i.x,i.y,e.x,e.y,jf.x,jf.y,je.x,je.y)&&iR(je.prev,je,je.next)>=0){return false}je=je.next}return true}function R(jg,jh,jf,jn){var jk=jg.prev;var jj=jg;var ji=jg.next;if(iR(jk,jj,ji)>=0){return false}var jo=jk.x<jj.x?(jk.x<ji.x?jk.x:ji.x):(jj.x<ji.x?jj.x:ji.x);var jl=jk.y<jj.y?(jk.y<ji.y?jk.y:ji.y):(jj.y<ji.y?jj.y:ji.y);var je=jk.x>jj.x?(jk.x>ji.x?jk.x:ji.x):(jj.x>ji.x?jj.x:ji.x);var T=jk.y>jj.y?(jk.y>ji.y?jk.y:ji.y):(jj.y>ji.y?jj.y:ji.y);var i=hJ(jo,jl,jh,jf,jn);var jm=hJ(je,T,jh,jf,jn);var e=jg.nextZ;while(e&&e.z<=jm){if(e!==jg.prev&&e!==jg.next&&iM(jk.x,jk.y,jj.x,jj.y,ji.x,ji.y,e.x,e.y)&&iR(e.prev,e,e.next)>=0){return false}e=e.nextZ}e=jg.prevZ;while(e&&e.z>=i){if(e!==jg.prev&&e!==jg.next&&iM(jk.x,jk.y,jj.x,jj.y,ji.x,ji.y,e.x,e.y)&&iR(e.prev,e,e.next)>=0){return false}e=e.prevZ}return true}function hE(jh,T,jg,jf){var je=jh;do{var i=je.prev;var e=je.next.next;if(!gf(i,e)&&ba(i,je,je.next,e)&&aW(i,e)&&aW(e,i)){T.push(i.i/jg+jf);T.push(je.i/jg+jf);T.push(e.i/jg+jf);cO(je);cO(je.next);je=jh=e}je=je.next}while(je!==jh);return je}function fd(e,T,jf,je,i,jk,jg){var jj=e;do{var ji=jj.next.next;while(ji!==jj.prev){if(jj.i!==ji.i&&cl(jj,ji)){var jh=p(jj,ji);jj=ez(jj,jj.next);jh=ez(jh,jh.next);gF(jj,T,jf,je,i,jk,null,jg);gF(jh,T,jf,je,i,jk,null,jg);return}ji=ji.next}jj=jj.next}while(jj!==e)}function Z(je,jl,jh,jg){var ji=[];var jf;var jj;var e;var T;var jk;for(jf=0,jj=jl.length;jf<jj;jf++){e=jl[jf]*jg;T=jf<jj-1?jl[jf+1]*jg:je.length;jk=aM(je,e,T,jg,false);if(jk===jk.next){jk.steiner=true}ji.push(g7(jk))}ji.sort(eL);for(jf=0;jf<ji.length;jf++){gy(ji[jf],jh);jh=ez(jh,jh.next)}return jh}function eL(i,e){return i.x-e.x}function gy(T,i){i=e1(T,i);if(i){var e=p(i,T);ez(e,e.next)}}function e1(e,jf){var i=jf;var jh=e.x;var jg=e.y;var je=-Infinity;var T;do{if(jg<=i.y&&jg>=i.next.y){var jk=i.x+(jg-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(jk<=jh&&jk>je){je=jk;if(jk===jh){if(jg===i.y){return i}if(jg===i.next.y){return i.next}}T=i.x<i.next.x?i:i.next}}i=i.next}while(i!==jf);if(!T){return null}if(jh===je){return T.prev}var jj=T;var jn=T.x;var jl=T.y;var jm=Infinity;var ji;i=T.next;while(i!==jj){if(jh>=i.x&&i.x>=jn&&iM(jg<jl?jh:je,jg,jn,jl,jg<jl?je:jh,jg,i.x,i.y)){ji=Math.abs(jg-i.y)/(jh-i.x);if((ji<jm||(ji===jm&&i.x>T.x))&&aW(i,e)){T=i;jm=ji}}i=i.next}return T}function hO(jf,e,je,i){var T=jf;do{if(T.z===null){T.z=hJ(T.x,T.y,e,je,i)}T.prevZ=T.prev;T.nextZ=T.next;T=T.next}while(T!==jf);T.prevZ.nextZ=null;T.prevZ=null;d1(T)}function d1(jj){var jg;var jf;var je;var ji;var jk;var T;var jl;var jh;var jm=1;do{jf=jj;jj=null;jk=null;T=0;while(jf){T++;je=jf;jl=0;for(jg=0;jg<jm;jg++){jl++;je=je.nextZ;if(!je){break}}jh=jm;while(jl>0||(jh>0&&je)){if(jl===0){ji=je;je=je.nextZ;jh--}else{if(jh===0||!je){ji=jf;jf=jf.nextZ;jl--}else{if(jf.z<=je.z){ji=jf;jf=jf.nextZ;jl--}else{ji=je;je=je.nextZ;jh--}}}if(jk){jk.nextZ=ji}else{jj=ji}ji.prevZ=jk;jk=ji}jf=je}jk.nextZ=null;jm*=2}while(T>1);return jj}function hJ(i,jf,e,je,T){i=32767*(i-e)/T;jf=32767*(jf-je)/T;i=(i|(i<<8))&16711935;i=(i|(i<<4))&252645135;i=(i|(i<<2))&858993459;i=(i|(i<<1))&1431655765;jf=(jf|(jf<<8))&16711935;jf=(jf|(jf<<4))&252645135;jf=(jf|(jf<<2))&858993459;jf=(jf|(jf<<1))&1431655765;return i|(jf<<1)}function g7(T){var i=T;var e=T;do{if(i.x<e.x){e=i}i=i.next}while(i!==T);return e}function iM(jf,je,jh,jg,e,ji,T,i){return(e-T)*(je-i)-(jf-T)*(ji-i)>=0&&(jf-T)*(jg-i)-(jh-T)*(je-i)>=0&&(jh-T)*(ji-i)-(e-T)*(jg-i)>=0}function cl(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!ei(i,e)&&aW(i,e)&&aW(e,i)&&q(i,e)}function iR(T,i,e){return(i.y-T.y)*(e.x-i.x)-(i.x-T.x)*(e.y-i.y)}function gf(i,e){return i.x===e.x&&i.y===e.y}function ba(T,e,i,je){if((gf(T,e)&&gf(i,je))||(gf(T,je)&&gf(i,e))){return true}return iR(T,e,i)>0!==iR(T,e,je)>0&&iR(i,je,T)>0!==iR(i,je,e)>0}function ei(i,e){var T=i;do{if(T.i!==i.i&&T.next.i!==i.i&&T.i!==e.i&&T.next.i!==e.i&&ba(T,T.next,i,e)){return true}T=T.next}while(T!==i);return false}function aW(i,e){return iR(i.prev,i,i.next)<0?iR(i,e,i.next)>=0&&iR(i,i.prev,e)>=0:iR(i,e,i.prev)<0||iR(i,i.next,e)<0}function q(T,i){var jg=T;var e=false;var jf=(T.x+i.x)/2;var je=(T.y+i.y)/2;do{if(((jg.y>je)!==(jg.next.y>je))&&(jf<(jg.next.x-jg.x)*(je-jg.y)/(jg.next.y-jg.y)+jg.x)){e=!e}jg=jg.next}while(jg!==T);return e}function p(T,i){var e=new fw(T.i,T.x,T.y);var je=new fw(i.i,i.x,i.y);var jg=T.next;var jf=i.prev;T.next=i;i.prev=T;e.next=jg;jg.prev=e;je.next=e;e.prev=je;jf.next=je;je.prev=jf;return je}function ih(T,e,jg,je){var jf=new fw(T,e,jg);if(!je){jf.prev=jf;jf.next=jf}else{jf.next=je.next;jf.prev=je;je.next.prev=jf;je.next=jf}return jf}function cO(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ){e.prevZ.nextZ=e.nextZ}if(e.nextZ){e.nextZ.prevZ=e.prevZ}}function fw(T,e,je){this.i=T;this.x=e;this.y=je;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}gS.deviation=function(jh,jm,jj,je){var jk=jm&&jm.length;var jg=jk?jm[0]*jj:jh.length;var T=Math.abs(gC(jh,0,jg,jj));if(jk){for(var ji=0,jl=jm.length;ji<jl;ji++){var e=jm[ji]*jj;var jf=ji<jl-1?jm[ji+1]*jj:jh.length;T-=Math.abs(gC(jh,e,jf,jj))}}var jq=0;for(ji=0;ji<je.length;ji+=3){var jp=je[ji]*jj;var jo=je[ji+1]*jj;var jn=je[ji+2]*jj;jq+=Math.abs((jh[jp]-jh[jn])*(jh[jo+1]-jh[jp+1])-(jh[jp]-jh[jo])*(jh[jn+1]-jh[jp+1]))}return T===0&&jq===0?0:Math.abs((jq-T)/T)};function gC(jg,ji,e,jh){var jf=0;for(var je=ji,T=e-jh;je<e;je+=jh){jf+=(jg[T]-jg[je])*(jg[je+1]+jg[T+1]);T=je}return jf}gS.flatten=function(jg){var jh=jg[0][0].length;var e={vertices:[],holes:[],dimensions:jh};var je=0;for(var jf=0;jf<jg.length;jf++){for(var T=0;T<jg[jf].length;T++){for(var ji=0;ji<jh;ji++){e.vertices.push(jg[jf][T][ji])}}if(jf>0){je+=jg[jf-1].length;e.holes.push(je)}}return e};');
﻿_jsload&&_jsload('oppcgl', 'function f8(){this._currentState="idle";this._currentTouchCount=0;this._firstPointerId=-1;this._secondPointerId=-1}f8.prototype.takeAction=function(e,i){if(this["_on"+e]){this["_on"+e](i)}return this.getState()};f8.prototype._onmousedown=function(e){if(this._currentTouchCount===0){this._firstPointerId=e}else{if(this._currentTouchCount===1){this._secondPointerId=e}}this._currentTouchCount++;if(this._currentState==="idle"){this._currentState="readyToDrag"}else{if(this._currentState==="dragging"||this._currentState==="readyToDrag"){this._currentState="readyToPinch"}else{if(this._currentState==="pinching"){this._currentState="freeze"}else{this._currentState="freeze"}}}};f8.prototype._onmousemove=function(){if(this._currentState==="readyToDrag"||this._currentState==="dragging"){this._currentState="dragging"}else{if(this._currentState==="readyToPinch"){this._currentState="pinching"}}};f8.prototype._onmouseup=function(e){if(this._currentState==="idle"){return}this._currentTouchCount--;if(this._currentState==="readyToDrag"||this._currentState==="dragging"){this._currentState="idle";this._firstPointerId=-1;this._secondPointerId=-1}else{if(this._currentState==="readyToPinch"||this._currentState==="pinching"){this._clearId(e);this._currentState="freeze"}else{if(this._currentState==="freeze"){if(this._currentTouchCount===0){this._currentState="idle";this._firstPointerId=-1;this._secondPointerId=-1;return}if(this._currentTouchCount===2){if(e!==this._firstPointerId&&e!==this._secondPointerId){this._currentState="pinching"}}if(e===this._firstPointerId||e===this._secondPointerId){this._clearId(e);this._currentState="freeze"}}}}};f8.prototype._ongesturestart=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="idle"||this._currentState==="readyToDrag"){this._currentState="readyToPinch"}};f8.prototype._ongesturechange=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="readyToPinch"){this._currentState="pinching"}};f8.prototype._ongestureend=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="readyToPinch"||this._currentState==="pinching"||this._currentState==="freeze"){this._currentState="idle"}};f8.prototype.getState=function(){return dL[this._currentState]||0};f8.prototype.reset=function(){this._currentState="idle";this._currentTouchCount=0;this._firstPointerId=-1;this._secondPointerId=-1};f8.prototype._clearId=function(e){if(e===this._firstPointerId){this._firstPointerId=-1}else{if(e===this._secondPointerId){this._secondPointerId=-1}}};f8.prototype.setState=function(e){this._currentState=e};bp.register(function(e){if(e._mouse){return}e._mouse=new fO(e);if(!e._mouse._drag){e._mouse=null}if(e._renderType==="webgl"){e.addEventListener("dblclick",function(i){if(!e.config.enableDblclickZoom){return}this.zoomIn(i.point)});e.addEventListener("rightdblclick",function(i){if(!e.config.enableDblclickZoom){return}this.zoomOut(i.point)});e.addEventListener("minuspress",function(i){this.zoomOut()});e.addEventListener("pluspress",function(i){this.zoomIn()})}});function ja(jg,jf){var T={};T.id=jg.pointerId||0;T.clientPos={x:jg.clientX||jg.pageX||0,y:jg.clientY||jg.pageY||0};var ji=0;var je=0;var i=jf.container;while(i&&i.parentNode){ji+=i.scrollLeft;je+=i.scrollTop;if(i.tagName!=="BODY"&&"absolute|fixed".indexOf(b1(i).position)>=0){i=i.offsetParent}else{i=i.parentNode}}T.clientPos.x=jg.clientX+ji;T.clientPos.y=jg.clientY+je;T.offsetPos={x:jg.layerX||jg.offsetX||0,y:jg.layerY||jg.offsetY||0};T.target=jg.target;T.button=jg.button||0;T.ctrlKey=jg.ctrlKey||false;T.metaKey=jg.metaKey||false;var jh=ac(T,jf);ev.extend(T,jh);T.offsetPosMap=new eO(jh.x,jh.y);T.timeStamp=jg.timeStamp;T.domEvent=jg;if(jg.type&&jg.type.indexOf("wheel")>-1){T.wheelDelta=jg.wheelDelta;T.detail=jg.detail;T.deltaX=jg.deltaX;T.deltaY=jg.deltaY;T.deltaMode=jg.deltaMode}T.offsetX=T.offsetPosMap.x;T.offsetY=T.offsetPosMap.y;T.layerX=jg.layerX;T.layerY=jg.layerY;return T}function ac(je,T){var jg=je.target;var jp=je.clientPos.x;var jo=je.clientPos.y;var jj=null;var ji=null;if(jg.nodeType!==1){jg=jg.parentNode}var jh=T.getContainer();var jf=jh;while(jf){jp-=jf.offsetLeft+jf.clientLeft||0;jo-=jf.offsetTop+jf.clientTop||0;if(jf.tagName==="BODY"){var jm=b1(jf);if("relative|absolute|fixed".indexOf(jm.position)>=0){jp-=(parseFloat(jm.left)||0)+parseFloat(jm.marginLeft);jo-=(parseFloat(jm.top)||0)+parseFloat(jm.marginTop)}jp+=jf.clientLeft||0;jo+=jf.clientTop||0;var jl=b1(jf.parentNode);if("absolute|fixed".indexOf(jm.position)>=0&&"relative|absolute|fixed".indexOf(jl.position)===-1){jf=null}else{jf=jf.parentNode}}else{if(jf.tagName==="HTML"){var jn=b1(jf);if("relative".indexOf(jn.position)>=0){jp-=(parseFloat(jn.left)||0);jo-=(parseFloat(jn.top)||0)}jf=jf.offsetParent}else{jf=jf.offsetParent}}}var i=T.getPanes();var e=null;while(jg&&jg!==jh){if(jg.hashCode){if(ev.instance(jg.hashCode) instanceof d9){jj=ev.instance(jg.hashCode)}if(ev.instance(jg.hashCode) instanceof dC||ev.instance(jg.hashCode) instanceof hi){ji=ev.instance(jg.hashCode)}}var jq=jg.parentNode;if(jq===i.floatPane||jq===i.markerMouseTarget||jq===i.floatShadow||jq===i.labelPane||jq===i.markerPane||jq===i.mapPane){e=jg}jg=jq}var jk=null;if(e&&!jj&&!ji){jk=e}return{x:jp,y:jo,overlay:jj,infoWindow:ji,customOverlayDom:jk,pixel:new eO(jp,jo),point:T.pixelToPointIn(new eO(jp,jo)),latlng:T.pixelToPoint(new eO(jp,jo))}}function gx(jf,je){var jg=jf.changedTouches[0];var i=jf.changedTouches.length;var T={target:jf.target,timeStamp:jf.timeStamp,ctrlKey:jf.ctrlKey||false,webkitForce:jf.webkitForce,metaKey:jf.metaKey||false,touchesCount:jf.touches.length,targetTouchesCount:jf.targetTouches.length};if(jf.changedTouches){T.changedTouchesCount=jf.changedTouches.length}else{T.changedTouchesCount=1}h5(jg,T,je);if(i>1){T.secondTouchInfo={};ev.extend(T.secondTouchInfo,T);h5(jf.changedTouches[1],T.secondTouchInfo,je)}return T}function h5(jg,jh,e){if(!jg){return}var jj=jg.clientX;var ji=jg.clientY;jh.id=jg.identifier||0;jh.clientPos={x:jj,y:ji};var je=0;var T=0;var i=e.container;while(i.offsetParent){je+=i.offsetLeft;T+=i.offsetTop;i=i.offsetParent}jh.offsetPos={x:jj-je,y:ji-T};jh.button=0;jh.offsetPosMap=new eO(jh.offsetPos.x,jh.offsetPos.y);var jf=ac(jh,e);ev.extend(jh,jf)}function bw(ji,jh){var i=ji.clientX;var jj=ji.clientY;if(typeof window.scrollY==="number"){jj+=window.scrollY}var jg={};jg.id=0;jg.clientPos={x:i,y:jj};jg.target=ji.target;var je=0;var T=0;var jf=jh.container;while(jf.offsetParent){je+=jf.offsetLeft;T+=jf.offsetTop;jf=jf.offsetParent}jg.offsetPos={x:i-je,y:jj-T};jg.timeStamp=ji.timeStamp;jg.offsetPosMap=new eO(jg.offsetPos.x,jg.offsetPos.y);jg.scale=ji.scale;jg.rotation=ji.rotation;return jg}function fO(e){this._map=e;if(e._renderType==="webgl"){this._drag=new gs(e)}else{if(typeof hX==="undefined"){return}this._drag=new hX(e)}this._earthDrag=null;this._earthWheel=null;this._dragStarted=false;this._touchStarted=false;this._waitForSecondTouch=false;this._firstTouchInfo={};this._secondTouchInfo={};this._currentTouchCount=0;this._prevGestureScale=1;this._useGesture=!!((bK()&&window.GestureEvent)||(!window.TouchEvent&&window.GestureEvent));this._opButton=-1;this._rotationFix=0;this._pinchRotationThreshold=20;this._pinchZoomThreshold=0.2;this._gestureStatus={zoom:false,rotate:false,tilt:false,dragZoom:false};this._diffX=0;this._diffY=0;this._enableRightDrag=true;if(typeof navigator.userAgent==="string"&&navigator.userAgent.indexOf("QQBrowser")>0){this._enableRightDrag=false}this._lastWheelTime=new Date();this._isModernBrowser=e.config.isModernBrowser;if(e.getRenderType()==="webgl"){e.deepZoom=new bP(e)}else{if(this._isModernBrowser){e.deepZoom=new ax(e)}}this._stateMachine=new f8();this._init();this._bind();if(this._useGesture){this._bindGesture()}this._bindRightButton();this._bindMouseWheel();this._operationVelocity=0;this._lastDiffDistance=0;this._zoomVelocity=0;this._lastDiffZoom=0;this._rotationVelocity=0;this._initRotation=0;this._trackVelocityTimer=null;this._trackTimeStamp=0;this._lastDragPoint={x:0,y:0};this._penultimateDragPoint={x:0,y:0};this._touchInMap=false}fO.prototype._init=function(){this._supportPointerEvent=(window.PointerEvent||window.MSPointerEvent)&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);var e={mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"};if(this._supportPointerEvent){if(window.PointerEvent){e.mousedown="pointerdown";e.mousemove="pointermove";e.mouseup="pointerup"}else{if(window.MSPointerEvent){e.mousedown="MSPointerDown";e.mousemove="MSPointerMove";e.mouseup="MSPointerUp"}}}this._eventMapping=e};fO.prototype._bind=function(){var jf=this._map;var T=jf.temp;var i=this._eventMapping;var je=this;var e=jf.platform;ev.on(e,i.mousedown,function(jh){if(bK()){return}je._mousedown=true;var jg=ja(jh,jf);je._mouseButton=jh.button;jf.dispatchEvent(ev.extend(new fa("onmousedown"),jg));je._processMouseDown(jg)});ev.on(e,"touchstart",function(jh){if(je._mousedown===true){return}je._touchStarted=true;var jg=gx(jh,jf);je._processMouseDown(jg);je._touchInMap=true;if(!jg.customOverlayDom){jh.preventDefault()}});ev.on(document,"keydown",function(jg){if(!je._touchStarted&&jf.currentOperation===dL.dragging){if(jg.metaKey||jg.ctrlKey||jg.altKey){je._mousedown=false;je._processMouseUp(ja(jg,jf))}}});ev.on(document,i.mousemove,function(jh){if(je._touchStarted){return}var jg=ja(jh,jf);jg.button=je._mouseButton;if(jf.currentOperation===dL.idle){jf.dispatchEvent(ev.extend(new fa("onmousemove"),jg))}je._processMouseMove(jg)});ev.on(document,"touchmove",function(jg){if(!je._touchInMap){return}je._processMouseMove(gx(jg,jf));jg.preventDefault});ev.on(document,i.mouseup,function(jg){if(je._touchStarted){return}je._mousedown=false;je._processMouseUp(ja(jg,jf))});ev.on(document,"touchend",function(jk){if(!je._touchInMap){return}if(!je._firstTouchInfo||!je._firstTouchInfo.offsetPos){je._processMouseUp(ja(jk,jf));return}if(jk.targetTouches.length===0){var ji=Math.abs(je._diffX)>5||Math.abs(je._diffY)>5;je._touchStarted=false;if(!je._twoFingerTouched&&!ji){var jg=new fa("onclick");ev.extend(jg,je._firstTouchInfo);jg.icon=jf.getIconByClickPosition(je._firstTouchInfo.offsetPos);jf.dispatchEvent(jg);if(je._waitForSecondTouch===false){je._waitForSecondTouch=true;je._firstTouchPos={x:je._firstTouchInfo.offsetPos.x,y:je._firstTouchInfo.offsetPos.y};je._doubleTouchTimer=setTimeout(function jh(){je._waitForSecondTouch=false;je._doubleTouchTimer=null},jf.config.clickInterval)}else{if(Math.abs(je._firstTouchInfo.offsetPos.x-je._firstTouchPos.x)<20&&Math.abs(je._firstTouchInfo.offsetPos.y-je._firstTouchPos.y)<20){var jj=new fa("ondblclick");ev.extend(jj,je._firstTouchInfo);jf.dispatchEvent(jj)}je._waitForSecondTouch=false;clearTimeout(je._doubleTouchTimer);je._doubleTouchTimer=null}}je._twoFingerTouched=false;je._touchInMap=false}je._processMouseUp(gx(jk,jf))});ev.on(e,"click",function(jj){if(window.TouchEvent&&bK()){return}if(jf.getLock()===true){return}if(jf.currentOperation===dL.idle){var ji=je._diffX===0&&je._diffY===0;var jh=ja(jj,jf);if(ji){var jg=new fa("onclick");ev.extend(jg,jh);jg.icon=jf.getIconByClickPosition(jg.offsetPosMap);jf.dispatchEvent(jg)}if(!T._clickTimer){T._clickTimer=setTimeout(function(){T._clickTimer=null;if(ji){var jk=new fa("onclickex");ev.extend(jk,jh);jf.dispatchEvent(jk)}},jf.config.clickInterval)}}je._diffX=0;je._diffY=0});jf.container.onselectstart=function(){return false};ev.on(jf.container,"contextmenu",function(jg){jg.cancelBubble=true;b(jg)});ev.on(e,"dblclick",function(jg){if(jf.getLock()===true){return}if(jf.currentOperation===dL.idle){if(ev.Browser.ie){jf.dispatchEvent(ev.extend(new fa("onclick"),ja(jg,jf)))}if(T._clickTimer){clearTimeout(T._clickTimer);T._clickTimer=null}jf.dispatchEvent(ev.extend(new fa("ondblclick"),ja(jg,jf)))}});ev.on(document,"mousedown",function(jh){jh=window.event||jh;var jg=jh.srcElement||jh.target;if(T.canKeyboard){T.canKeyboard=jf.container.contains(jg)}else{T.canKeyboard=e.contains(jg)}});ev.on(e,"webkitmouseforcedown",function(jg){jf.dispatchEvent(ev.extend(new fa("onforcedown"),ja(jg,jf)))});ev.on(e,"webkitmouseforceup",function(jg){jf.dispatchEvent(ev.extend(new fa("onforceup"),ja(jg,jf)))})};fO.prototype._bindGesture=function(){var e=this;var i=this._map;ev.on(i.platform,"gesturestart",function(je){i.currentOperation=e._stateMachine.takeAction("gesturestart");var T=bw(je,i);e._gestureStartTime=T.timeStamp;if(T.rotation<-160){e._rotationFix=180}else{if(T.rotation>160){e._rotationFix=-180}else{e._rotationFix=0}}e._pinchStartPosition=T.offsetPosMap;e._getCurrentDrag().onReadyToPinch(je,{initMiddlePoint:T.offsetPosMap,pinchStartPosition:e._pinchStartPosition,zoomRatio:1});je.preventDefault()});ev.on(document,"gesturechange",function(jg){if(i.currentOperation!==dL.readyToPinch&&i.currentOperation!==dL.pinching){return}i.currentOperation=e._stateMachine.takeAction("gesturechange");if(i.currentOperation!==dL.pinching){return}var jf=bw(jg,i);if(isNaN(jf.scale)){jf.scale=e._prevGestureScale}else{e._prevGestureScale=jf.scale}jf.rotation+=e._rotationFix;var T=jf.offsetPosMap;e._pinchingPosition=T;e._diffX=T.x-e._pinchStartPosition.x;e._diffY=T.y-e._pinchStartPosition.y;var je=e._getPinchParam(jf);if(!je){jg.preventDefault();return}e._getCurrentDrag().onPinching(jg,{pinchStartPosition:e._pinchStartPosition,pinchingPosition:T,pinchingDistance:je.pinchingDistance,zoomRatio:je.zoomRatio,angleDiff:je.rotation,gestureStatus:e._gestureStatus});jg.preventDefault()});ev.on(document,"gestureend",function(jf){if(i.currentOperation!==dL.readyToPinch&&i.currentOperation!==dL.pinching){return}var je=bw(jf,i);if(isNaN(je.scale)){je.scale=e._prevGestureScale}else{e._prevGestureScale=je.scale}var T=e._pinchParam||{};e._getCurrentDrag().onPinchEnd(jf,{pinchStartPosition:e._pinchStartPosition,pinchEndPosition:e._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:e._gestureStatus});e._resetGestureParam();i.currentOperation=e._stateMachine.takeAction("gestureend");jf.preventDefault()})};fO.prototype._getPinchParam=function(je){var jj=je.scale;var jl=je.rotation;var jf=je.offsetPosMap;var ji=jf.x-this._pinchStartPosition.x;var jg=jf.y-this._pinchStartPosition.y;var T={x:ji,y:jg};var jk=je.timeStamp-this._gestureStartTime;if(jk<100){return null}var i=this._gestureStatus;if(!this._gestureDetected){this._gestureDetected=true;if(Math.abs(ji)<10&&Math.abs(jg)>10&&Math.abs(jj-1)<0.1&&jl<10){i.tilt=true}}var jh=0;if(!i.tilt&&!i.rotate){if(Math.abs(jl)>this._pinchRotationThreshold){this._initRotation=jl;if(jl>0){jh=jl-this._pinchRotationThreshold}else{jh=jl+this._pinchRotationThreshold}i.rotate=true}else{jl=0}}if(i.rotate&&this._initRotation){jh+=jl-this._initRotation}var e=jj;if(i.tilt){e=1}this._pinchParam={zoomRatio:e,rotation:jh,pinchingDistance:T};return this._pinchParam};fO.prototype._resetGestureParam=function(){this._initRotation=0;this._gestureStatus.zoom=false;this._gestureStatus.rotate=false;this._gestureStatus.tilt=false;this._gestureStatus.dragZoom=false;this._gestureDetected=false;this._pinchParam=null;this._gestureStartTime=null};fO.prototype._bindRightButton=function(){var i=this._map;var e=this;ev.on(i.container,this._eventMapping.mouseup,function(T){if(i.mapType===BMAP_EARTH_MAP){return}if(i.getLock()===true){return}if(i.currentOperation!==dL.readyToDrag){if(i.currentOperation===dL.dragging&&e._diffX===0&&e._diffY===0){}else{return}}if(T.button===2){e._processRightClick(ja(T,i))}})};fO.prototype._processMouseDown=function(jj){var i=this._map;if(jj.overlay&&jj.overlay instanceof iU&&jj.overlay._config.enableDraggingMap===false&&!bK()){if(i.currentOperation===dL.idle){this._clearStatus();this._firstTouchInfo=jj;this._firstTouchInfo.initX=jj.offsetPosMap.x;this._firstTouchInfo.initY=jj.offsetPosMap.y;return}}if(i.currentOperation!==dL.idle&&jj.button!==this._opButton){return}if(jj.button===2&&this._currentTouchCount===1){return}if(i.getLock()){return}if(this._currentTouchCount===2){return}this._currentTouchCount++;if(this._currentTouchCount===2){this._twoFingerTouched=true}if(this._lastTouchstartTime&&bK()){var jf=jj.timeStamp-this._lastTouchstartTime;if(jf<200){this._gestureStatus.dragZoom=true}}this._lastTouchstartTime=jj.timeStamp;i.currentOperation=this._stateMachine.takeAction("mousedown",jj.id);if(jj.secondTouchInfo){this._currentTouchCount++;i.currentOperation=this._stateMachine.takeAction("mousedown",jj.secondTouchInfo.id)}if(i.currentOperation===dL.readyToDrag){if((ev.Browser.ie&&jj.target.setCapture)||(ev.Browser.firefox&&jj.target.setCapture)){jj.target.setCapture()}var jg=this._firstTouchInfo;ev.extend(jg,jj);jg.initX=jj.offsetPosMap.x;jg.initY=jj.offsetPosMap.y;this._opButton=jj.button;if(jj.button===2&&this._enableRightDrag===false){i.currentOperation=dL.idle;this._stateMachine.reset();return}this._getCurrentDrag().onReadyToDrag(jj)}else{if(i.currentOperation===dL.readyToPinch){if(jj.secondTouchInfo){ev.extend(this._firstTouchInfo,jj);this._firstTouchInfo.initX=jj.offsetPosMap.x;this._firstTouchInfo.initY=jj.offsetPosMap.y;ev.extend(this._secondTouchInfo,jj.secondTouchInfo);this._secondTouchInfo.initX=jj.secondTouchInfo.offsetPosMap.x;this._secondTouchInfo.initY=jj.secondTouchInfo.offsetPosMap.y;this._opButton=jj.button}else{ev.extend(this._secondTouchInfo,jj);this._secondTouchInfo.initX=jj.offsetPosMap.x;this._secondTouchInfo.initY=jj.offsetPosMap.y}if(this._useGesture){return}this._initTouchDistance=b2(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);this._initMiddlePoint=eH(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);var je=this._firstTouchInfo.initX-this._initMiddlePoint.x;var jl=this._initMiddlePoint.y-this._firstTouchInfo.initY;var T=this._secondTouchInfo.initX-this._initMiddlePoint.x;var jk=this._initMiddlePoint.y-this._secondTouchInfo.initY;var jh;if(je-T!==0){var ji=(jk-jl)/(T-je);jh=eG(Math.atan(ji))}else{jh=90}if(jh<0){jh=180+jh}this._initAngle=jh;this._preAngle=jh;this._pinchStartPosition=this._initMiddlePoint;this._getCurrentDrag().onReadyToPinch(jj,{initMiddlePoint:this._initMiddlePoint,pinchStartPosition:this._pinchStartPosition,zoomRatio:1})}}};fO.prototype._processMouseMove=function(jg){var i=this._map;if(i.currentOperation===dL.idle){return}if(jg.id===this._firstTouchInfo.id){ev.extend(this._firstTouchInfo,jg)}else{if(jg.id===this._secondTouchInfo.id){ev.extend(this._secondTouchInfo,jg)}}if(jg.secondTouchInfo){if(jg.secondTouchInfo.id===this._firstTouchInfo.id){ev.extend(this._firstTouchInfo,jg.secondTouchInfo)}else{if(jg.secondTouchInfo.id===this._secondTouchInfo.id){ev.extend(this._secondTouchInfo,jg.secondTouchInfo)}}}i.currentOperation=this._stateMachine.takeAction("mousemove",jg.id);if(i.currentOperation===dL.pinching){if(this._useGesture){return}if(!this._gestureStartTime){this._gestureStartTime=jg.timeStamp}var jk=b2(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);var jj=eH(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);this._pinchingPosition=jj;this._diffX=jj.x-this._initMiddlePoint.x;this._diffY=jj.y-this._initMiddlePoint.y;var jh={scale:Math.round(jk/this._initTouchDistance*100)/100,rotation:this._calcRotationDiff(jj),offsetPosMap:jj,timeStamp:jg.timeStamp};this._pinchingPosition=jj;var T=this._getPinchParam(jh);if(T){this._zoomRatio=T.zoomRatio;this._getCurrentDrag().onPinching(jg,{initMiddlePoint:this._initMiddlePoint,pinchStartPosition:this._pinchStartPosition,pinchingPosition:jj,pinchingDistance:T.pinchingDistance,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}}else{if(i.currentOperation===dL.dragging){var jf=this._getCurrentDrag();if(this._dragStarted===false){jf.onDragStart&&jf.onDragStart(jg);this._dragStarted=true}if(jg.id===this._firstTouchInfo.id){this._diffX=jg.offsetPosMap.x-this._firstTouchInfo.initX;this._diffY=jg.offsetPosMap.y-this._firstTouchInfo.initY}else{if(jg.secondTouchInfo&&jg.secondTouchInfo.id===this._firstTouchInfo.id){this._diffX=jg.secondTouchInfo.offsetPosMap.x-this._firstTouchInfo.initX;this._diffY=jg.secondTouchInfo.offsetPosMap.y-this._firstTouchInfo.initY}}this._lastDragPoint=jg.pixel;var je;if(this._lastDragPoint.x===this._penultimateDragPoint.x&&this._lastDragPoint.y===this._penultimateDragPoint.y){je={x:this._diffX,y:this._diffY}}else{je={x:this._lastDragPoint.x-this._penultimateDragPoint.x,y:this._lastDragPoint.y-this._penultimateDragPoint.y}}if(!i.config.enableDragging){return}jf.onDragging(jg,{diffX:this._diffX,diffY:this._diffY,velocity:this._operationVelocity,button:this._opButton,dragDistance:{x:this._diffX,y:this._diffY},gestureStatus:this._gestureStatus,dir:je});if(!this._trackVelocityTimer){var ji=this;this._trackTimeStamp=(new Date()).getTime();this._trackVelocityTimer=setInterval(function(){ji._trackVelocity();ji._penultimateDragPoint=ji._lastDragPoint},30)}}}};fO.prototype._calcRotationDiff=function(jj){var i=this._firstTouchInfo.offsetPosMap.x-jj.x;var ji=jj.y-this._firstTouchInfo.offsetPosMap.y;var e=this._secondTouchInfo.offsetPosMap.x-jj.x;var jh=jj.y-this._secondTouchInfo.offsetPosMap.y;var je;if(i-e!==0){var jf=(jh-ji)/(e-i);je=eG(Math.atan(jf))}else{je=90}if(je<0){je=180+je}var T=je;while(this._preAngle-je>100){je=je+180}while(this._preAngle-je<-100){je=je-180}var jg=this._initAngle-je;this._preAngle=je;return jg};fO.prototype._processMouseUp=function(jf){var je=this._map;if(je.currentOperation===dL.idle){return}if(jf.button!==this._opButton){return}this._currentTouchCount--;if(je.currentOperation===dL.readyToDrag||je.currentOperation===dL.dragging){if(this._trackVelocityTimer){clearInterval(this._trackVelocityTimer);this._trackVelocityTimer=null}this._dragStarted=false;var i;if(this._lastDragPoint.x===this._penultimateDragPoint.x&&this._lastDragPoint.y===this._penultimateDragPoint.y){i={x:this._diffX,y:this._diffY}}else{i={x:this._lastDragPoint.x-this._penultimateDragPoint.x,y:this._lastDragPoint.y-this._penultimateDragPoint.y}}this._getCurrentDrag().onDragEnd(jf,{velocity:this._operationVelocity,dragDistance:{x:this._diffX,y:this._diffY},gestureStatus:this._gestureStatus,dir:i});this._clearStatus(jf);this._resetGestureParam();if((ev.Browser.ie&&jf.target.releaseCapture)||(ev.Browser.firefox&&jf.target.releaseCapture)){jf.target.releaseCapture()}this._opButton=-1}else{if(je.currentOperation===dL.pinching){if(!this._useGesture){var T=this._pinchParam;if(T){this._getCurrentDrag().onPinchEnd(jf,{pinchStartPosition:this._pinchStartPosition,pinchEndPosition:this._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}this._resetGestureParam()}this._clearId(jf.id)}else{if(je.currentOperation===dL.freeze){if(this._currentTouchCount===0){this._clearStatus(jf)}else{if(jf.id===this._firstTouchInfo.id||jf.id===this._secondTouchInfo.id){if(!this._useGesture){var T=this._pinchParam;if(T){this._getCurrentDrag().onPinchEnd(jf,{pinchStartPosition:this._pinchStartPosition,pinchEndPosition:this._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}this._resetGestureParam()}this._clearId(jf.id)}}}}}je.currentOperation=this._stateMachine.takeAction("mouseup",jf.id);if(jf.changedTouchesCount===2||jf.targetTouchesCount===0){jf.changedTouchesCount=1;this._processMouseUp(jf)}if(this._currentTouchCount===0&&bK()){this._diffX=this._diffY=0}};fO.prototype._clearId=function(e){if(e===this._firstTouchInfo.id){this._firstTouchInfo={}}else{if(e===this._secondTouchInfo.id){this._secondTouchInfo={}}}};fO.prototype._clearStatus=function(){this._firstTouchInfo={};this._secondTouchInfo={}};fO.prototype._processRightClick=function(jf){var je=this._map;var T=je.temp;if(T.rightDblclickTimer){clearTimeout(T.rightDblclickTimer);T.rightDblclickTimer=null;je.dispatchEvent(ev.extend(new fa("onrightclick"),jf));je.dispatchEvent(ev.extend(new fa("onrightdblclick"),jf))}else{je.dispatchEvent(ev.extend(new fa("onrightclick"),jf));var i=ev.extend(new fa("onrightclickex"),jf);T.rightDblclickTimer=setTimeout(function(){T.rightDblclickTimer=null;je.dispatchEvent(i)},je.config.clickInterval)}};fO.prototype._bindMouseWheel=function(){var je=this._map;var T=this;if(!ev.Browser.firefox){ev.on(je.container,"mousewheel",function i(jf){if(je.getLock()===true){return}if(!je.config.enableWheelZoom){return}if(je.mapType!==BMAP_EARTH_MAP){if(T._isModernBrowser){T._deepZoomWheel(jf)}else{T._wheel(jf)}}else{if(T._earthWheel){T._earthWheel.onWheel(ja(jf,je))}}b(jf)})}else{ev.on(je.container,"wheel",function e(jf){if(je.getLock()===true){return}if(!je.config.enableWheelZoom){return}if(je.mapType!==BMAP_EARTH_MAP){if(T._isModernBrowser){T._deepZoomWheel(jf)}else{T._wheel(jf)}}else{if(T._earthWheel){T._earthWheel.onWheel(ja(jf,je))}}b(jf)})}};fO.prototype._getCurrentDrag=function(){var e=this._map;if(e.getMapType()!==BMAP_EARTH_MAP){return this._drag}return this._earthDrag};fO.prototype._wheel=function(jh){var jg=this._map;var je=this._map.temp;if(je.dragAni){je.dragAni.stop();je.dragAni=null;setTimeout(function(){jg.dispatchEvent(new fa("onmoveend"))},1)}if(je.touchZoomLabelCanvas){je.touchZoomLabelCanvas.style.display="none"}if(je.touchZoomDiv){je.touchZoomDiv.style.display="none"}jh=window.event||jh;jg.lastLevel=jg.zoomLevel;var T=new fa("onmousewheel");T.trend=jh.wheelDelta>=0;if(isNaN(jh.wheelDelta)){T.trend=jh.deltaY<=0}var i=new Date();if(T.trend===true&&jg.zoomLevel===jg.getMaxZoom()||T.trend===false&&jg.zoomLevel===jg.getMinZoom()||i-this._lastWheelTime<220){jg.currentOperation^=dL.mousewheel;if(T.trend===true&&jg.zoomLevel===jg.getMaxZoom()||T.trend===false&&jg.zoomLevel===jg.getMinZoom()){var jf=new fa("onzoomexceeded");if(jg.zoomLevel===jg.getMaxZoom()){jf.targetZoom=jg.zoomLevel+1}else{jf.targetZoom=jg.zoomLevel-1}jg.dispatchEvent(jf)}b(jh);return}this._astWheelTime=i;ev.extend(T,ja(jh,jg));jg.dispatchEvent(T)};fO.prototype._deepZoomWheel=function(je){var T=this._map;var i=new fa("ondeepzoommousewheel");ev.extend(i,ja(je,T));T.dispatchEvent(i)};fO.prototype.setEarthDrag=function(e){this._earthDrag=e};fO.prototype.setEarthWheel=function(e){this._earthWheel=e};fO.prototype._trackVelocity=function(){var T=(new Date()).getTime();var e=T-this._trackTimeStamp;if(e===0){return}this._trackTimeStamp=T;var je=Math.sqrt(Math.pow(this._diffX,2)+Math.pow(this._diffY,2));var jf=Math.abs(je-this._lastDiffDistance);this._lastDiffDistance=je;var i=500*jf/e;this._operationVelocity=(0.6*i+0.4*this._operationVelocity)};function bP(e){this._map=e;this.scrollCount=0;this.maxZoomWheelDir=1;this.minZoomWheelDir=-1;this.maxZoom=e.getMaxZoom();this.minZoom=e.getMinZoom();this.lastWheelTime=0;this._opMethod="";this.lastWheelDelta=0;this.lastDiff=0;this._mouseFixPoint=null;this.bindEvent()}var gg=bP.prototype;gg.bindEvent=function(){var e=this;var i=e._map;i.addEventListener("maptypechange",function(T){e.maxZoom=i.getMaxZoom();e.minZoom=i.getMinZoom()});i.addEventListener("deepzoommousewheel",function(T){e.wheel(T)})};gg.wheel=function(jg){var ji=this;var i=ji._map;var jp=i.temp;if(jp.dragAni){jp.dragAni.stop(false,{readyToMove:true});jp.dragAni=null}var je=Math.floor(jg.timeStamp);var T=je-this.lastWheelTime;var jf=this._trend=jg.deltaY<=0;if(isNaN(jg.deltaY)){jf=this._trend=jg.wheelDelta>=0}var jo=Math.abs(jg.deltaY);var jm=Math.abs(jg.wheelDelta);var jl=jo;if(jm===0&&jl===0){return}var jk=false;if(this._opMethod==="mouseWheel"&&typeof this._preTrend==="boolean"&&this._preTrend!==this._trend){jk=true}if(T>100||jk===true){this._opMethod=g4(jm,jl,jg.deltaMode);if(this._opMethod==="mouseWheel"){if(jp.wheelAni){jp.wheelAni.stop();jp.wheelAni=null}if(this._wheelMotionTimer){clearTimeout(this._wheelMotionTimer);this._wheelMotionTimer=null}}this._mouseFixPoint=jg.point.clone();this.scrollCount=0;this.startZoom=i.getZoom();i.fire(new fa("onmousewheelscroll"));if((this.startZoom===this.maxZoom&&jf===true)||(this.startZoom===this.minZoom&&jf===false)){var jn=new fa("onzoomexceeded");jn.targetZoom=this.startZoom;i.dispatchEvent(jn);return}}this.lastWheelTime=je;var jj=this._mouseFixPoint;if(this._opMethod==="mouseWheel"&&jl!==0){var jh=jm?(jm/3):jl;this._onWheelMouse(jh,jf,jj,jg.deltaMode);return}if(this._opMethod==="padScroll"){jo=jl/50}else{jo=jl/20}if(isNaN(jo)&&jg.detail){jo=Math.abs(jg.detail)}var ji=this;setTimeout(function(){var jq=i.getZoom();var e=jf===true?jq+0.2*jo:jq-0.2*jo;i.setZoomIn(e,{zoomCenter:jj,stopCurrentAnimation:true,noAnimation:true})},20)};gg._onWheelMouse=function(i,je,jg,T){var jh=this._map;this.scrollCount++;if(this.scrollCount>10){this.scrollCount=10}var jf=0;if(ev.Browser.firefox){if(T===1){i*=15}if(!ev.Platform.macintosh){jf=bt(i*0.005,2)*this.scrollCount}else{if(i%1!==0){i*=10}jf=bt(i*0.01,2)}}else{if(!ev.Platform.macintosh){jf=bt(i*0.005,2)*this.scrollCount}else{jf=bt(i*0.005,2)}}if(jf>2){jf=2}if(je===false){jf=-jf}var e=jh.getZoom()+jf;jh.setZoomIn(e,{zoomCenter:jg,fromMouseWheel:true});this._preTrend=this._trend};function gs(e){this._map=e;this._opButton=0;this._initTilt=0;this._initHeading=0;this._mapHeight=0;this._changeHeadingStartPos=null}ev.extend(gs.prototype,{onReadyToDrag:function(jf,i){var je=this._map;var T=je.temp;if(T.dragAni){T.dragAni.stop(false,{readyToMove:true});T.dragAni=null}if(je._ani){je._ani.stop();je._ani=null}if(je._infiniteAni){je._infiniteAni.stop();je._infiniteAni=null}if(T.tlPan){T.tlPan.stop();T.tlPan=null}if(!je.config.enableDragging){return}if(jf.button===0&&jf.ctrlKey===false&&jf.metaKey===false){this._opButton="left";T.pl=je.offsetX;T.pt=je.offsetY}else{this._opButton="right";this._initTilt=je.getTilt();this._initHeading=je.getHeading();this._mapHeight=je.getSize().height}if(T.curSpotsArray.length===0&&T.curAreaSpot===null){je.platform.style.cursor=je.config.draggingCursor}else{je.platform.style.cursor="pointer"}},onReadyToPinch:function(je,i){var T=this._map;if(T.config.fixCenterWhenPinch){this._fixPoint=T.getCenterIn().clone()}else{this._fixPoint=T.pixelToPointIn(i.pinchStartPosition)}this._fixPixel=T.pointToPixelIn(this._fixPoint);this._startZoom=T.getZoom();this._startHeading=T.getHeading();this._startTilt=T.getTilt()},onDragStart:function(){var e=this._map;if(!e.config.enableDragging){return}e.platform.style.cursor=e.config.draggingCursor;this._startZoom=e.getZoom()},onDragging:function(ji,i){var je=this._map;if(!je.config.enableDragging){return}var jn=je.temp;if(this._opButton==="right"&&je.getZoom()<je._enableTiltZoom){return}var jl=i.diffX;var jk=i.diffY;var jg=false;var jm=i.gestureStatus.dragZoom;if(Math.abs(jl)>1||Math.abs(jk)>1){jg=true;if(!jn._moved){if(!jm){je.dispatchEvent(ev.extend(new fa("ondragstart"),ji));je.dispatchEvent(new fa("onmovestart"))}jn._moved=true}}if(jg===false){return}je.dispatchEvent(ev.extend(new fa("ondragging"),ji));jn.lastDomMoveTime=ji.timeStamp;if(jm){je.setZoomIn(this._startZoom-jk/50,{noAnimation:true})}else{if(this._opButton==="left"){je._setPlatformPosition(jl,jk,{initMapOffsetX:jn.pl,initMapOffsetY:jn.pt})}else{var jj=20;var jh={noAnimation:true};if(Math.abs(jk)>jj){if(!this._rightDragInitY){this._rightDragInitY=ji.pixel.y}}if(this._rightDragInitY){if(!je.config.enableTilt){return}var T=ji.pixel.y-this._rightDragInitY;this._setTiltByMoveY(this._initTilt,T,jh)}if(Math.abs(jl)>jj){if(!this._rightDragInitX){this._rightDragInitX=ji.pixel.x}}if(this._rightDragInitX){if(!je.config.enableRotate){return}var jf=ji.pixel.x-this._rightDragInitX;if(this._changeHeadingStartPos===null){this._changeHeadingStartPos=ji.pixel}if(this._changeHeadingStartPos.y<this._mapHeight/2){je.setHeading(this._initHeading+jf*0.3,jh)}else{je.setHeading(this._initHeading-jf*0.3,jh)}}}}},_setTiltByMoveY:function(T,jg,e){var jf=this._map;var i=T+jg*0.4;var je=jf.getCurrentMaxTilt();i=dq(i,g0.MIN_TILT,je,0.4);jf.setTilt(i,e)},onPinching:function(jg,i){var jf=this._map;if(jf.config.enableTiltGestures&&i.gestureStatus.tilt){this._setTiltByMoveY(this._startTilt,i.pinchingDistance.y,{noAnimation:true});return}var je=Math.log(i.zoomRatio)/Math.log(2);var T=Math.max(Math.min(this._startZoom+je,jf.getMaxZoom()),jf.getMinZoom());if(jf.config.enableRotateGestures&&typeof i.angleDiff==="number"){jf.setHeading(this._startHeading+i.angleDiff,{noAnimation:true})}jf.setZoomIn(T,{zoomCenter:this._fixPoint,noAnimation:true,fixPixel:this._fixPixel})},onDragEnd:function(jf,i){var je=this._map;if(!je.config.enableDragging){return}var T=je.temp;if(T.curSpotsArray.length===0&&T.curAreaSpot===null){je.platform.style.cursor=je.config.defaultCursor}else{je.platform.style.cursor="pointer"}if(T._moved&&!i.gestureStatus.dragZoom){je.dispatchEvent(ev.extend(new fa("ondragend"),jf));if(!je.config.enableInertialDragging||jf.timeStamp-T.lastDomMoveTime>100){je.dispatchEvent(new fa("onmoveend"))}else{this._processMotion(i.velocity,i.dragDistance,i.dir)}T._moved=false}this._changeHeadingStartPos=null;this._rightDragInitX=this._rightDragInitY=null;if(this._opButton==="right"){this._tiltBounceBack()}},_tiltBounceBack:function(){var i=this._map;if(i.getZoom()<i._enableTiltZoom){return}var e=i.getCurrentMaxTilt();if(i.getTilt()>e){i.setTilt(e,{duration:200})}else{if(i.getTilt()<g0.MIN_TILT){i.setTilt(g0.MIN_TILT,{duration:200})}}},onPinchEnd:function(jf,i){var je=this._map;if(i.gestureStatus.tilt){this._tiltBounceBack()}if(je.config.enableRotateGestures&&i.gestureStatus.rotate){var T=Math.abs(je.getHeading());if(T%360<10){je.resetHeading()}}},_processMotion:function(jf,jr,jj){var jp=this._map;var ji=jp.temp;var T=(new Date()).getTime();var i=0.5*jf;if(this._opButton==="right"){i=0.15*jf}var jn=0;var jm=0;if(jj.y===0){jn=i}else{var je=Math.abs(jj.x/jj.y);jm=Math.round(Math.sqrt(i*i/(1+je*je)));jn=Math.round(je*jm)}var jl=hM(jp._heading);if(jj.x<0){jn=-jn}if(jj.y<0){jm=-jm}var jh=jr.x+jn;var jg=jr.y+jm;if(ji.dragAni){ji.dragAni.stop();ji.dragAni=null;jp.dispatchEvent(new fa("onmoveend"))}var js=0;var jq=0;if(this._opButton==="right"){if(!this._changeHeadingStartPos){return}var jk=this._mapHeight;var e=this._changeHeadingStartPos;var jo=this._initHeading;ji.dragAni=new e3({duration:10000,render:function(ju){var jt=(new Date()).getTime()-T;var jv=Math.exp(-jt/250);js=jh-jn*jv;if(Math.abs(jn*jv)<5&&Math.abs(jm*jv)<5){ji.dragAni.stop();return}if(e.y<jk/2){jp.setHeading(jo+js*0.3,{noAnimation:true})}else{jp.setHeading(jo-js*0.3,{noAnimation:true})}},finish:function(){ji.dragAni=null;if(e.y<jk/2){jp.setHeading(jo+js*0.3,{noAnimation:true})}else{jp.setHeading(jo-js*0.3,{noAnimation:true})}},onStop:function(){ji.dragAni=null;if(e.y<jk/2){jp.setHeading(jo+js*0.3,{noAnimation:true})}else{jp.setHeading(jo-js*0.3,{noAnimation:true})}}});return}ji.dragAni=new e3({duration:10000,render:function(jv,ju){var jt=(new Date()).getTime()-T;var jw=Math.exp(-jt/250);js=jh-jn*jw;jq=jg-jm*jw;if(Math.abs(jn*jw)<5&&Math.abs(jm*jw)<5){ji.dragAni.stop();return}jp._setPlatformPosition(js,jq,{initMapOffsetX:ji.pl,initMapOffsetY:ji.pt})},finish:function(){ji.dragAni=null;jp._setPlatformPosition(js,jq,{initMapOffsetX:ji.pl,initMapOffsetY:ji.pt});jp.dispatchEvent(new fa("onmoveend"))},onStop:function(jt){ji.dragAni=null;jp._setPlatformPosition(js,jq,{initMapOffsetX:ji.pl,initMapOffsetY:ji.pt});var ju=new fa("onmoveend");ju.userData=jt;jp.dispatchEvent(ju)}})}});bp.register(function(i){var e=i;if(i._keyboardInit===true){return}i._keyboardInit=true;ev.on(document,"keydown",function(T){if(e.temp.stopArrow===true){e.temp.stopArrow=false}if(e.config.enableKeyboard&&e.temp.canKeyboard){var T=window.event||T;var je=false;if(ev.Platform.macintosh){if(T.metaKey===true){je=true}}else{if(T.ctrlKey===true){je=true}}switch(T.keyCode||T.which){case 189:case 109:case 173:if(!je){e.temp.operating=true;e.dispatchEvent(new fa("onminuspress"))}break;case 61:case 187:case 107:if(!je){e.temp.operating=true;e.dispatchEvent(new fa("onpluspress"))}break;case 33:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 34:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 35:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 36:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 37:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=1;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 38:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=2;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 39:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=4;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 40:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=8;e._arrow();T.cancelBubble=true;T.returnValue=false;break}}});ev.on(document,"keyup",function(T){if(e.config.enableKeyboard){var T=window.event||T;switch(T.keyCode||T.which){case 37:e.temp.arrow=e.temp.arrow&~1;if(e.temp.arrow!==0){e._arrow()}break;case 38:e.temp.arrow=e.temp.arrow&~2;if(e.temp.arrow!==0){e._arrow()}break;case 39:e.temp.arrow=e.temp.arrow&~4;if(e.temp.arrow!==0){e._arrow()}break;case 40:e.temp.arrow=e.temp.arrow&~8;if(e.temp.arrow!==0){e._arrow()}break}}e.temp.operating=false});g0.prototype._arrow=function(){if(this.mapType===BMAP_EARTH_MAP){return}if(this._arrow.occurrent&&this._arrow._lastArrow===this.temp.arrow&&this.temp.stopArrow===true){return}var T=this;var jf=T.temp.arrow;T._arrow._lastArrow=jf;T._arrow.interval=30;T._arrow.duration=999;T._arrow.dx=T._arrow.dy=0;if(jf&1){T._arrow.dx=1}if(jf&2){T._arrow.dy=1}if(jf&4){T._arrow.dx=-1}if(jf&8){T._arrow.dy=-1}if(jf&1&&jf&4){T._arrow.dx=0}if(jf&2&&jf&8){T._arrow.dy=0}if(!T._arrow.occurrent){T._arrow.occurrent=true;T._arrow.time=new Date().getTime();T._arrow.beginTime=T._arrow.time;T.dispatchEvent(new fa("onmovestart"));var je=new e3({fps:T._arrow.interval,duration:T._arrow.duration,transition:fY.linear,render:function(jm){var jh=T._arrow;var jk=T.temp.arrow;if(T._arrow._lastArrow!==jk){T._arrow._lastArrow=jk;if(jk&1){jh.dx=1}if(jk&2){jh.dy=1}if(jk&4){jh.dx=-1}if(jk&8){jh.dy=-1}if(jk&1&&jk&4){jh.dx=0}if(jk&2&&jk&8){jh.dy=0}}if(T.temp.stopArrow===true){jh.dx=0;jh.dy=0}var jl=new Date().getTime();var jj=Math.pow((jl-jh.beginTime)/jh.duration,2);if(!T.temp.arrow){jh.occurrent=false;je.terminative=true;T._arrow.time=new Date().getTime();setTimeout(function(){T.dispatchEvent(new fa("onmoveend"))},40)}var jn=(jl-jh.time);var ji=jh.dx*jn*jj>=0?Math.ceil(jh.dx*jn*jj):Math.floor(jh.dx*jn*jj);var jg=jh.dy*jn*jj>=0?Math.ceil(jh.dy*jn*jj):Math.floor(jh.dy*jn*jj);if(ji!==0&&jg!==0){ji=Math.round(ji*0.7);jg=Math.round(jg*0.7)}jh.time=jl;T._setPlatformPosition(ji,jg)},finish:function(){T._arrow.time=new Date().getTime();setTimeout(function(){T._arrowPan()},T._arrow.interval)}})}};g0.prototype._arrowPan=function(){var jg=this;var je=jg._arrow;if(jg.temp.stopArrow){je.dx=0;je.dy=0}if(!jg.temp.arrow){je.occurrent=false;jg.dispatchEvent(new fa("onmoveend"));return}var jh=new Date().getTime();var ji=(jh-je.time);var jf=Math.ceil(je.dx*ji);var T=Math.ceil(je.dy*ji);je.time=jh;jg._setPlatformPosition(jf,T);setTimeout(function(){jg._arrowPan()},je.interval)}});');
﻿_jsload&&_jsload('scommon', 'var f7=1,eh=2,aH=3,cP=new h8(21,33),b7=new h8(10,33),gI=new h8(22,36),c3=new h8(11,36),cX=new h8(25,40),cz=new h8(12,20),dA=new h8(9,0),h1=new h8(300,300);e6.addSearchPoi=function(i,jj,jh,ji){var jk=a1(jj);if(!jk){return}if(jh<0||jh>9){return}var jf=null;var jg=new r(jk);var e=w.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(fD()>1){function je(){return new iy(e,cP,{imageSize:h1,anchor:b7,imageOffset:new h8(21*jh,0),infoWindowOffset:dA})}jf=je();var T=je();T.setImageOffset(new h8(21*jh,66));jg.icoDefault=jf;jg.icoActive=T}else{jf=new iy(e,cP,{imageSize:h1,anchor:b7,imageOffset:new h8(21*jh,0),infoWindowOffset:dA})}jg.setIcon(jf);i.addOverlay(jg);if(ji){jg.setTitle(ji)}return jg};e6.addCenterPoi=function(jf,e,jg){var je=a1(e);if(!je){return}var i=new r(je);var jh=null;if(bK()){function T(){return new iy(w.imgPath+"markers_hd.png",new h8(21,31),{anchor:b7,imageOffset:new h8(-29,-320),imageSize:new h8(85,477),infoWindowAnchor:dA})}jh=T();i.icoDefault=jh}else{jh=new iy(w.imgPath+"markers.png",cP,{anchor:b7,imageOffset:new h8(0,-250),infoWindowAnchor:dA})}i.setIcon(jh);jf.addOverlay(i);if(jg){i.setTitle(jg)}return i};e6.addSearchInBoundsPoi=function(i,ji,jh){var jj=a1(ji);if(!jj){return}var jg=new r(jj);var jf=null;var e=w.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(fD()>1){function je(){return new iy(e,gI,{imageSize:h1,anchor:c3,imageOffset:new h8(200,188),infoWindowOffset:dA})}jf=je();var T=je();T.setImageOffset(new h8(200,224));jg.icoDefault=jf;jg.icoActive=T}else{jf=new iy(e,gI,{imageSize:h1,anchor:c3,imageOffset:new h8(200,188),infoWindowOffset:dA})}jg.setIcon(jf);i.addOverlay(jg);if(jh){jg.setTitle(jh)}return jg};function a1(e){var T=[];var i=null;if(e instanceof cf||e instanceof b9){i=e}else{if(typeof e=="string"){T=ev.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(ev.trim(T[0]));T[1]=parseFloat(ev.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new cf(T[0],T[1])}return i}e6.createSearchInfoWnd=function(T,e){var jn=T.title;var jl=T.addr;var jg=T.tel;var jj=T.uid||"";var i=T.url;var jm=T.detailUrl;var jk=T.poiType||BMAP_POI_TYPE_NORMAL;e=e||{};if(!jn){return null}var ji=jn;if(jk==BMAP_POI_TYPE_BUSSTOP){ji=ji+"-公交车站"}else{if(jk==BMAP_POI_TYPE_SUBSTOP){ji=ji+"-地铁站"}}var jh=13;if(jm){jh=10}if(ji.replace(/[\\u0100-\\uffff]/g,"##").length>jh*2+1){ji=ji.substring(0,jh)+"&#8230"}var jf=\'<p style="margin-left:5px;display:inline;height:30px;line-height:30px;width:210px;font:bold 14px/16px \'+w.fontFamily+\';white-space:nowrap;overflow:hidden" title="\'+jn+\'">\'+ji;if(jm){jf+=\'<a target="_blank" href="\'+jm+\'" style="margin-left:5px;font-size:12px;color:#3d6dcc;font-weight:normal;text-decoration:none;">详情»</a>\'}jf+="</p>";var jp=[];jp.push(\'<div style="font: 12px \'+w.fontFamily+\'; margin: 5px">\');if(jl){var jo="地址：";if(jk==BMAP_POI_TYPE_BUSSTOP||jk==BMAP_POI_TYPE_SUBSTOP){jo="车次："}jp.push(\'<table cellspacing="0" style="overflow: hidden; table-layout: fixed; width: 100 %; font: 12px \'+w.fontFamily+\'" >\');jp.push(\'<tr><td style="vertical-align: top; width: 38px; white-space: nowrap; word-break: keep-all">\'+jo+"&nbsp;</td><td>");jp.push(jl+"&nbsp;</td></tr>");if(jg){jp.push(\'<tr><td style="vertical-align: top; ">电话：</td><td>\'+jg+"</td></tr>")}jp.push("</table>")}else{if(jg){jp.push(\'<table cellspacing="0" style="table-layout: fixed; width: 100 %; font: 12px \'+w.fontFamily+\'">\');jp.push(\'<tr><td style="vertical-align: top; width: 36px; white-space: nowrap; word-break: keep-all">电话：</td><td>\'+jg+"</td></tr></table>")}}jp.push("</div>");var je=new dC(jp.join(""),{title:jf,height:0,width:250,margin:[10,10,20,10]});return je};e6.addDestPoi=function(jh,e,ji,T){var je=w.staticHost+"/wolfman/static/common/images/";je+="markers_new2x_2960fb4.png";var jg=a1(e);if(!jg){return}var jf=new iy(je,cX,{imageSize:h1,anchor:cz,imageOffset:new h8(200+T*25,139),infoWindowOffset:dA});var i=new r(jg,{icon:jf,baseZIndex:3500000,draggingCursor:"pointer"});jh.addOverlay(i);if(ji){i.setTitle(ji)}return i};e6.addLine=function(i,e){return e6.addRoute(i,e,gU)};e6.ROUTE_TRAFFIC_STYLE_CONFIG=[{stroke:6,color:"#0030ff",opacity:0.45,style:"solid"},{stroke:5,color:"#00bd00",opacity:0.95,style:"solid"},{stroke:5,color:"#ffac00",opacity:0.95,style:"solid"},{stroke:5,color:"#f41c0d",opacity:0.95,style:"solid"}];e6.ROUTE_STYLE_CONFIG=[{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#4ddc26",opacity:1,style:"solid"},{stroke:6,color:"#00bd01",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"},{stroke:6,color:"#ff0103",opacity:0.65,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"}];e6.addRouteWithTraffic=function(jg,je,jh){var T=e6.ROUTE_TRAFFIC_STYLE_CONFIG;if(typeof jh=="undefined"){jh=0}if(!T[jh]){return}var e=je;var i=T[jh];var jf=new bd(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});jg.addOverlay(jf);jf._trafficStatus=jh;return jf};e6.addRoute=function(ji,jf,je){var T=e6.ROUTE_STYLE_CONFIG;if(typeof je=="undefined"){je=0}if(!T[je]){return}var e=jf;var i=T[je];var jh=new bd(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});ji.addOverlay(jh);jh._routeType=je;if(je==gU){var jg=new bd(e,{strokeWeight:i.stroke-2,strokeColor:"#fff",strokeOpacity:0.3,clickable:false});jh._p=jg;ji.addOverlay(jg)}return jh};e6.createTransInfoWnd=function(i){var jg=i.content;var e=i.curIndex;var jh=i.total;var je=i.nextTransCbk;var jf=i.obj;var ji=i.hideStep;var jj=[\'<div style="font: 12px \'+w.fontFamily+\'">\'];if(jg){jj.push(\'<div style="margin: 10px 1em 24px 0">\'+jg+"</div>")}if(!ji){jj.push(e6.genStepNavHtml(jh,e))}jj.push("</div>");var T=new dC(jj.join(""),{title:"",height:0,width:220,margin:[10,10,20,10]});if(ji){return T}T.addEventListener("open",function(){var jk=bK()?"touchend":"click";if(ev.G("trans_prev")){ev.on(ev.G("trans_prev"),jk,function(){if(je&&typeof je=="function"){je(e-1,jf)}})}if(ev.G("trans_next")){ev.on(ev.G("trans_next"),jk,function(){if(je&&typeof je=="function"){je(e+1,jf)}})}});return T};e6.genStepNavHtml=function(T,e){var i=[];i.push(\'<table id="trans_nav" width="99% " cols="2" style="background: #eaf2ff; font: 12px \'+w.fontFamily+\'"><tbody><tr>\');i.push(\'<td nowrap="nowrap" width="50% " align="left">\');if(e==0){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none: >上一步</span>\')}else{i.push(\'<a id="trans_prev" style="color: #7777cc; -moz-user-select: none" href="javascript: void (0)">上一步</a>\')}i.push("</td>");i.push(\'<td nowrap="nowrap" width="50% " align="right">\');if(e==T+1){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none" >下一步</span>\')}else{i.push(\'<a style="color: #7777cc" id="trans_next" href="javascript: void (0)">下一步</a>\')}i.push("</td></tr></tbody></table>");return i.join("")};e6.addTransPoi=function(i,ji,jg,jh){var jj=a1(ji);if(!jj){return}jg=jg||BMAP_LINE_TYPE_BUS;var e=w.staticHost+"/wolfman/static/common/images/new/";e+="transit-exchange-2x_46d5be3.png";var T=54;switch(jg){case BMAP_LINE_TYPE_SUBWAY:T=75;break;case BMAP_LINE_TYPE_TRAIN:T=117;break;case BMAP_LINE_TYPE_AIRPLANE:T=138;break;case BMAP_LINE_TYPE_COACH:case BMAP_LINE_TYPE_BUS:default:T=54;break}var jf=new iy(e,new h8(22,22),{imageSize:new h8(22,181),infoWindowAnchor:new h8(10,0),imageOffset:new h8(0,T)});var je=new r(jj,{icon:jf});i.addOverlay(je);if(jh){je.setTitle(jh)}return je};e6.getInfoWindowDom=function(e){if(e&&e.infoWindowDoms&&e.infoWindowDoms.contentDiv){return e.infoWindowDoms.contentDiv.childNodes[0]}return null};e6.addStationPoi=function(T,e,je){var i=new r(e,{icon:new iy(d6._stopUrl,new h8(11,11))});if(je){i.setTitle(je)}T.addOverlay(i);return i};e6.createTipLbl=function(i){var e=new a5(i,{offset:new h8(30,-10)});e.setStyle({border:"solid 1px gray",padding:"2px",whiteSpace:"nowrap",background:"#fff"});return e};e6.getDistanceByPixel=function(i,e){if(!i||!e){return}return Math.round(Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)))};e6.addSearchPoi_R=function(jk,ji,jl,e,i){var jn=a1(jk),e=e||{};e.type=e.type||"normal";if(!jn||typeof(ji)=="undefined"||ji<0||(ji>9&&e.type!=="child")||(ji>39&&e.type==="child")){return}var jm;var jj=w.staticHost+"/wolfman/static/common/images/";jj+="markers_new2x_2960fb4.png";var je=0;if(e.type=="RouteAddrMarker"){je=273}var T=new h8(18*ji,je);var jh=new iy(jj,new h8(18,27),{offset:new h8(9,27),imageOffset:T,infoWindowOffset:dA,imageSize:h1,});jm=ji+1;var jf=100;var jg=new r(jn,{icon:jh,zIndexFixed:true,baseZIndex:2500000-jf*ji});jg.customProperty={type:e.type};i.addOverlay(jg);jg._stCode=jm;if(jl){jg.setTitle(jl)}return jg};az.CBK_SEARCH_COMPLETE=1;az.CBK_MARKERS_SET=2;az.CBK_INFO_HTML_SET=3;az.CBK_POLYLINES_SET=4;az.CBK_RESULTS_HTML_SET=5;az.CBK_BUSLIST_COMPLETE=6;az.CBK_BUSLINE_COMPLETE=7;az.CBK_BUSLISTHTML_SET=8;az.CBK_BUSLINEHTML_SET=9;az._getPoiUrl=function(e,i){if(e){return w.mapHost+"?s="+encodeURIComponent("inf&uid="+e+"&c="+i)+"&i=0&sr=1"}return""};az._getLocType=function(e){if(!e){return fJ}if(typeof e=="string"){return id}if(e instanceof cf||e instanceof b9){return bo}if(e instanceof g0){return a2}if(typeof e=="number"){return dm}return fJ};ev.extend(az.prototype,{_getIdByLoc:function(jf,e){var i=az._getLocType(jf.src);if(i==fJ){return}var T=this;if(i==dm){e&&e(jf.src);return}if(i==id){if(jf.curLocType==i&&jf.curSrc==jf.src&&jf.curId){e&&e(jf.curId);return}jf.curLocType=i;jf.curSrc=jf.src;iZ.request(function(jh){if(jh&&jh.result&&jh.result["type"]==eU){T._loc.curId=jh.content["code"];e&&e(T._loc.curId)}},{qt:cT,wd:jf.src})}else{var je;var jg=18;if(i==a2){if(jf.src.isLoaded()){je=jf.src.getCenter();jg=jf.src.getZoom()}else{jf.src.addEventListener("load",function(){T._getIdByLoc(jf,e)})}}else{je=jf.src}if(i==jf.curLocType&&jf.curSrc.equals(je)&&jf.curId){e&&e(jf.curId);return}if(i==a2){je=ig.convertLL2MC(je)}if(i==bo){je=ig.convertLL2MC(je)}jf.curLocType=i;jf.curSrc=new cf(je.lng,je.lat);iZ.request(function(jh){if(jh&&jh.result&&jh.result["type"]==a6){T._loc.curId=jh.content?jh.content["uid"]:1;e&&e(T._loc.curId)}},{qt:U,b:je.lng+","+je.lat+";"+je.lng+","+je.lat,l:jg})}},_setStatus:function(e){if(typeof e=="number"){this._status=e}else{delete this._status}},_triggerCbk:function(i,e,je){var T;if(typeof e==="undefined"){T=4}else{if(e._plans&&e._plans.length){T=1}else{if(Object.prototype.toString.call(e._start)==="[object Object]"&&Object.prototype.toString.call(e._end)==="[object Object]"){T=3}else{T=2}}}var jf;switch(i){case az.CBK_SEARCH_COMPLETE:jf=this._opts.onSearchComplete;jf&&jf(e,T);break;case az.CBK_MARKERS_SET:jf=this._opts.onMarkersSet;jf&&jf(e,je);break;case az.CBK_POLYLINES_SET:jf=this._opts.onPolylinesSet;jf&&jf(e,je);break;case az.CBK_INFO_HTML_SET:jf=this._opts.onInfoHtmlSet;jf&&jf(e,je);break;case az.CBK_RESULTS_HTML_SET:jf=this._opts.onResultsHtmlSet;jf&&jf(e,je);break;case az.CBK_BUSLIST_COMPLETE:jf=this._opts.onGetBusListComplete;jf&&jf(e,je);break;case az.CBK_BUSLINE_COMPLETE:jf=this._opts.onGetBusLineComplete;jf&&jf(e,je);break;case az.CBK_BUSLISTHTML_SET:jf=this._opts.onBusListHtmlSet;jf&&jf(e,je);break;case az.CBK_BUSLINEHTML_SET:jf=this._opts.onBusLineHtmlSet;jf&&jf(e,je);break;default:break}}});var dg=0;var cS=1;var N=2;by.unique=function(T){var jg=false;var jf=[];var jh={};for(var je=0,e=T.length;je<e;je++){if(!jh[T[je]]){jh[T[je]]=true;jf.push(T[je])}}return jf};by.getBestLevel=function(T,i){if(i){var e=Math.min(i.width/1100,i.height/660);T=Math.round(T+(Math.log(e)/Math.log(2)))}if(T<1){T=1}if(T>21){T=21}return T};by.parseGeo=function(jh,jk){if(typeof jh!="string"||!jh){return}var jm=jh.split("|");var e;var jf;var T;if(jm.length==1){e=bO(jh)}else{e=bO(jm[2]);jf=bO(jm[0]);T=bO(jm[1]);if(!jk){return e}}var ji={type:e.geoType};if(jk){switch(ji.type){case N:var jj=new cf(e.geo[0][0],e.geo[0][1]);var jl=ig.convertMC2LL(jj);ji.point=jl;ji.points=[jl];break;case cS:ji.points=[];var jn=e.geo[0];for(var jg=0,je=jn.length-1;jg<je;jg+=2){var jo=new cf(jn[jg],jn[jg+1]);jo=ig.convertMC2LL(jo);ji.points.push(jo)}jf=new cf(jf.geo[0][0],jf.geo[0][1]);T=new cf(T.geo[0][0],T.geo[0][1]);jf=ig.convertMC2LL(jf);T=ig.convertMC2LL(T);ji.bounds=new hf(jf,T);break;default:break}}return ji};by.parseGeoExt=function(jx,jo){if(!jo){jo=0}else{if(jo<0.25){jo=0}else{if(jo>0.25&&jo<1){jo=1}else{if(jo>32){jo=32}}}}var jj=jx.split("|");if(jj.length==1){var je=bO(jj[0]);return{type:je.type,bound:"",points:je.geo.join(",")}}else{if(jj.length>1){var jp=jx.split(";.=");var jl=[];var jf=[];var jq=0;var ju=jp.length;for(var jr=0;jr<ju;jr++){var jw=jp[jr];if(ju>1){if(jr==0){jw=jw+";"}if(jr>0&&jr<ju-1){jw=".="+jw+";"}if(jr==ju-1){jw=".="+jw}}var jg=jw.split("|");var jt=bO(jg[0]);var js=bO(jg[1]);jl.push(jt.geo.join(","));jl.push(js.geo.join(","));var je=bO(jg[2]);jq=je.type;var jv=je.geo.join(",");jv=by.parseGeoExtReg1(jv);if(jo>0){jv=by.parseGeoExtReg2(jv,jo)}jf.push(jv)}if(ju<=1){jf=jf.join(";")}if(ju==2){var T=jf[0]+";"+jf[1];var jh=T.split(";");var e=[];for(var jr=0;jr<jh.length;jr++){var jk=jh[jr].split(",")[0];var ji=jh[jr].split(",")[1];var jm=new cf(jk,ji);var jn=ig.convertMC2LL(jm);e.push(jn)}jf=e}return{type:jq,bound:jl.join(";"),points:jf}}}};by.getPoiPoint=function(e){var T=[];var i=null;if(e.toString()=="Point"){i=e}else{if(typeof e=="string"){T=ev.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(ev.trim(T[0]));T[1]=parseFloat(ev.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new BMap.Point(T[0],T[1])}return i};by.parseGeoStr=function(T){var i=T.split(",");var e=new cf(i[0],i[1]);return ig.convertMC2LL(e)};by.level={country:4,province:11,city:12,area:13};var gv=["=",".","-","*"];var cN=1<<23;function bO(jk){var jj=hb(jk.charAt(0));var T=jk.substr(1);var jm=0;var e=T.length;var jn=[];var jh=[];var ji=[];while(jm<e){if(T.charAt(jm)==gv[0]){if((e-jm)<13){return 0}ji=dI(T.substr(jm,13),jn);if(ji<0){return 0}jm+=13}else{if(T.charAt(jm)==";"){jh.push(jn.slice(0));jn.length=0;++jm}else{if((e-jm)<8){return 0}ji=bZ(T.substr(jm,8),jn);if(ji<0){return 0}jm+=8}}}for(var jg=0,je=jh.length;jg<je;jg++){for(var jf=0,jl=jh[jg].length;jf<jl;jf++){jh[jg][jf]/=100}}return{geoType:jj,geo:jh}}function hb(i){var e=-1;if(i==gv[1]){e=N}else{if(i==gv[2]){e=cS}else{if(i==gv[3]){e=dg}}}return e}function dI(jf,T){var e=0;var jh=0;var jg=0;for(var je=0;je<6;je++){jg=c9(jf.substr(1+je,1));if(jg<0){return -1-je}e+=jg<<(6*je);jg=c9(jf.substr(7+je,1));if(jg<0){return -7-je}jh+=jg<<(6*je)}T.push(e);T.push(jh);return 0}function bZ(jg,je){var T=je.length;if(T<2){return -1}var e=0;var ji=0;var jh=0;for(var jf=0;jf<4;jf++){jh=c9(jg.substr(jf,1));if(jh<0){return -1-jf}e+=jh<<(6*jf);jh=c9(jg.substr(4+jf,1));if(jh<0){return -5-jf}ji+=jh<<(6*jf)}if(e>cN){e=cN-e}if(ji>cN){ji=cN-ji}je.push(je[T-2]+e);je.push(je[T-1]+ji);return 0}function c9(i){var e=i.charCodeAt(0);if(i>="A"&&i<="Z"){return e-"A".charCodeAt(0)}else{if(i>="a"&&i<="z"){return(26+e-"a".charCodeAt(0))}else{if(i>="0"&&i<="9"){return(52+e-"0".charCodeAt(0))}else{if(i=="+"){return 62}else{if(i=="/"){return 63}}}}}return -1}by.pathToPoints=function(jg){var je=[];if(typeof jg!=="string"){return je}else{var jf=jg.split(";");for(var T=0;T<jf.length;T++){var e=jf[T].split(",");je.push(new cf(e[0],e[1]))}}return je};');
﻿_jsload&&_jsload('control', 'ev.extend(fv.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(e){f5.prototype.initialize.call(this,e);this._render();this._updateState();this._bind(e);return this._container},_bind:function(i){var e=this;i.addEventListener("load",function(T){e._updateState()});i.addEventListener("moveend",function(T){e._updateState()});i.addEventListener("zoomend",function(T){e._updateState()})},_render:function(){f5.prototype._render.call(this);ev.ac(this._container,"BMap_cpyCtrl");var e=this._container.style;e.cursor="default";e.whiteSpace="nowrap";e.MozUserSelect="none";e.WebkitTextSizeAdjust="none";f5.prototype._setPosition.call(this);if(this.sateMapStyle){this.addSateMapStyle()}},_updateState:function(){if(!this._map||!this._container||this._copyrightCollection.length===0){return}for(var je=0,e=this._copyrightCollection.length;je<e;je++){var jg;var ji=this._map.getZoom();if(this._copyrightCollection[je].mapType!==""&&this._map.mapType!==this._copyrightCollection[je].mapType){jg=false}else{if(ji<this._copyrightCollection[je].minZoom){jg=false}else{jg=true}}if(jg){if(this._container){var jf=false;for(var T=0,jh=this._container.children.length;T<jh;T++){if(parseInt(this._container.children[T].getAttribute("_cid"),10)===this._copyrightCollection[je].id){jf=true;this._container.children[T].style.display="block";if(this._container.children[T].innerHTML!==this._copyrightCollection[je].content){this._container.children[T].innerHTML=this._copyrightCollection[je].content}break}}if(!jf){this._generateHTML(this._copyrightCollection[je])}}}else{if(this._container){for(var T=0;T<this._container.children.length;T++){if(parseInt(this._container.children[T].getAttribute("_cid"),10)===this._copyrightCollection[je].id&&this._container.children[T].style.display!=="none"){this._container.children[T].style.display="none";return}}}}}},addCopyright:function(je){if(!je||typeof je.id!=="number"||isNaN(je.id)){return}var e={minZoom:0,bounds:null,content:"",mapType:""};for(var T in je){e[T]=je[T]}if(this._map){var jh=e.minZoom;if(jh===-1||jh<this._map.getMinZoom()||jh>this._map.getMaxZoom()){e.minZoom=this._map.getMinZoom()}if(e.mapType!==""&&!dR[e.mapType]){e.mapType=BMAPGL_NORMAL_MAP}}var jf=this.getCopyright(je.id);if(jf){for(var jg in e){jf[jg]=e[jg]}}else{this._copyrightCollection.push(e)}this._updateState()},getCopyright:function(je){for(var T=0,e=this._copyrightCollection.length;T<e;T++){if(this._copyrightCollection[T].id===je){return this._copyrightCollection[T]}}},getCopyrightCollection:function(){return this._copyrightCollection},removeCopyright:function(jg){var je;for(var T=0,e=this._copyrightCollection.length;T<e;T++){if(this._copyrightCollection[T].id===jg){je=this._copyrightCollection.splice(T,1);T--;e=this._copyrightCollection.length}}var jf=this.getDom(jg);if(jf&&jf.parentNode){jf.parentNode.removeChild(jf);jf=null}this._updateState();return je},_generateHTML:function(e){if(!this._container){return}this._container.innerHTML+=\'<span _cid="\'+e.id+\'">\'+e.content+"</span>"},getDom:function(jf){var je=f5.prototype.getDom.call(this);if(typeof jf==="undefined"){return je}else{if(je){for(var T=0,e=je.children.length;T<e;T++){if(parseInt(je.children[T].getAttribute("_cid"),10)===jf){return je.children[T]}}}}}});function e4(){}ev.extend(iK.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map);this.dispatchEvent(new fa("ondomready"))}},initialize:function(e){f5.prototype.initialize.call(this,e);this._firstAnimation=true;this._setParam();this._render();this._bind();this._setSliderZoomLv(e.getZoom());this._bindMapEvent(e);var i=this._opts.offset||(new h8(1,0));this.setOffset(i);this.redraw();return this._container},_bindMapEvent:function(i){var e=this;i.addEventListener("zoomend",function(T){if(!e._map){return}e._setSliderZoomLv(e._map.getZoom());if(e._msover){return}if(e._isShowLevelHint){if(e.getType()===BMAP_NAVIGATION_CONTROL_ANIM){e._hideTimerId=setTimeout(function(){e._hideLevelHint(true);e._shrinkSlider()},1000)}else{e._hideTimerId=setTimeout(function(){e._hideLevelHint(true)},1000)}}});i.addEventListener("mousewheel",function(){if(!e._map){return}if(e._map.config.enableWheelZoom&&e._isShowLevelHint){if(e._hideTimerId){clearTimeout(e._hideTimerId);e._hideTimerId=null}if(e.getType()!==BMAP_NAVIGATION_CONTROL_ANIM){e._showLevelHint()}}});i.addEventListener("load",function(T){if(!e._map){return}e._setSliderZoomLv(e._map.getZoom())})},redraw:function(){this._setParam();this.setType(this._opts.type);if(this._map){this._setSliderZoomLv(this._map.getZoom())}},_setParam:function(){this._minZoomLevel=this._map.config.zoomLevelMin;this._maxZoomLevel=this._map.config.zoomLevelMax;if(this._minZoomLevel>4||this._maxZoomLevel<18){this._isShowLevelHint=false}else{this._isShowLevelHint=true}this._totalZoomLv=this._maxZoomLevel-this._minZoomLevel+1;this._maxBarY=this._minBarY+(this._totalZoomLv-1)*this._sliderInterval},_render:function(){f5.prototype._render.call(this);var T=ev.Browser.ie==6?" BMap_ie6":"";var i=" BMap_stdMpType"+this._opts.type;var je=this._container;ev.ac(je,"BMap_stdMpCtrl");ev.ac(je,T);ev.ac(je,i);je.innerHTML=this._generateHtml(this._opts.type);this._setSliderBarCursor(ev.Browser.opera?"pointer":w.defaultCursor);this._panBtnContainer=ev.G(je.children[0]);this._zoomDom=ev.G(je.children[1]);var e=this._zoomDom;this._btnZoomIn=ev.G(e.children[0]);this._btnZoomOut=ev.G(e.children[1]);this._sliderDom=ev.G(e.children[2]);this._sliderBaseDom=ev.G(e.children[2].children[0]);this._sliderBotDom=ev.G(e.children[2].children[1]);this.setType(this._opts.type)},_setSliderHeight:function(){var i=this._opts.type;var je=this.controlHeight[i].width;var jf=this.controlHeight[i].height;var jg=this.controlHeight[i].zoomHeight;var e=this.controlHeight[i].zoomWidth;var jh=this.controlHeight[i].sliderHeight;if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){}this._container.style.width=je+"px";this._container.style.height=jf+"px";this._zoomDom.style.height=jg+"px";this._zoomDom.style.width=je+"px";if(this.getType()==BMAP_NAVIGATION_CONTROL_ANIM){this._btnZoomOut.style.top=24+"px"}else{var T=(this._opts.forceNew===true)?29:23;this._btnZoomOut.style.top=jg-T+"px"}this._sliderDom.style.height=jh+"px";this._sliderBaseDom.style.height=jh+"px";if(this._opts.type==BMAP_NAVIGATION_CONTROL_ZOOM){this._zoomDom.children[0].style.left=this._zoomDom.children[1].style.left="0"}else{this._zoomDom.children[0].style.left=this._zoomDom.children[1].style.left=""}},_generateHtml:function(){var e=[];e.push(this._generatePanHtml());e.push(this._generateZoomContainerHtml());return e.join("")},_generatePanHtml:function(){var e=\'<div class="BMap_stdMpPan"><div class="BMap_button BMap_panN" title="向上平移"></div><div class="BMap_button BMap_panW" title="向左平移"></div><div class="BMap_button BMap_panE" title="向右平移"></div><div class="BMap_button BMap_panS" title="向下平移"></div><div class="BMap_stdMpPanBg BMap_smcbg"></div></div>\';return e},_generateZoomContainerHtml:function(){var e=\'<div class="BMap_stdMpZoom">\'+this._generateZoomHtml()+this._generateSliderHtml()+this._generateZoomBalloonHtml()+"</div>";return e},_generateZoomHtml:function(){var e="BMap_button";(this._opts.forceNew===true)&&(e="BMap_button_new");var i=\'<div class="\'+e+\' BMap_stdMpZoomIn" title="放大一级"><div class="BMap_smcbg in"></div></div><div class="\'+e+\' BMap_stdMpZoomOut" title="缩小一级"><div class="BMap_smcbg out"></div></div>\';return i},_generateSliderHtml:function(){var e=\'<div class="BMap_stdMpSlider"><div class="BMap_stdMpSliderBgTop"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderBgBot"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderMask" title="放置到此级别"></div><div class="BMap_stdMpSliderBar" title="拖动缩放"><div class="BMap_smcbg"></div></div></div>\';return e},_generateZoomBalloonHtml:function(){var e=\'<div class="BMap_zlHolder"><div class="BMap_zlSt"><div class="BMap_smcbg"></div></div><div class="BMap_zlCity"><div class="BMap_smcbg"></div></div><div class="BMap_zlProv"><div class="BMap_smcbg"></div></div><div class="BMap_zlCountry"><div class="BMap_smcbg"></div></div></div>\';return e},setType:function(e){if(typeof e=="number"&&e>=BMAP_NAVIGATION_CONTROL_LARGE&&e<=BMAP_NAVIGATION_CONTROL_ANIM){this._opts.type=e}else{this._opts.type=BMAP_NAVIGATION_CONTROL_LARGE}if(!this._map||!this._container){return}var i=this._container;i.className=i.className.replace(/BMap_stdMpType\\d/,"BMap_stdMpType"+this._opts.type);this._setSliderHeight();if(e!=BMAP_NAVIGATION_CONTROL_LARGE&&e!=BMAP_NAVIGATION_CONTROL_ANIM){ev.rc(i.children[1].children[2],"hvr")}this.setAnchor(this._opts.anchor)},getType:function(){return this._opts.type},_bind:function(){var jo=this;var jn=jo._container;var jg=this._opts.from=="MAP_INDEX";function jf(i,jq){return i.contains?i!=jq&&i.contains(jq):!!(i.compareDocumentPosition(jq)&16)}function jj(js,jr){var jq,i=js.type.toLowerCase();if(i=="mouseover"){jq=js.relatedTarget||js.fromElement}else{if(i==="mouseout"){jq=js.relatedTarget||js.toElement}else{return true}}return jq&&jq.prefix!="xul"&&!jf(jr,jq)&&jq!==jr}ev.on(jn,"mouseover",function(i){i=i||window.event;if(jj(i,jn)){jo.dispatchEvent(new fa("onmouseover"))}});ev.on(jn,"mouseout",function(i){i=i||window.event;if(jj(i,jn)){jo.dispatchEvent(new fa("onmouseout"))}});function je(){if(!jo._isShowLevelHint){return}jo._msover=true;if(jo._hideTimerId){clearTimeout(jo._hideTimerId);jo._hideTimerId=null}jo._expandSlider();if(jo.getType()!==BMAP_NAVIGATION_CONTROL_ANIM){jo._showLevelHint()}}function ji(){if(!jo._isShowLevelHint){return}if(jo._hideTimerId){clearTimeout(jo._hideTimerId)}jo._msover=false;jo._hideTimerId=setTimeout(function(){jo._hideLevelHint();jo._hideTimerId=null;jo._shrinkSlider()},1000)}if("onmouseenter" in document.documentElement){ev.on(this._zoomDom,"mouseenter",function(i){je()});ev.on(this._zoomDom,"mouseleave",function(jq){var i=jq.relatedTarget;if(i&&(i===this||jf(this,i))){return}ji()})}else{ev.on(this._zoomDom,"mouseover",function(jq){var i=jq.relatedTarget;if(i&&(i===this||jf(this,i))){return}je()});ev.on(this._zoomDom,"mouseout",function(jq){var i=jq.relatedTarget;if(i&&(i===this||jf(this,i))){return}ji()})}ev.on(jn.children[0],"mouseover",function(){jo._hideLevelHint(true)});ev.on(jn.children[0].children[0],"click",function(){jo._panBy(0,Math.round(jo._map.height/3));jg?e4(6004):null});ev.on(jn.children[0].children[1],"click",function(){jo._panBy(Math.round(jo._map.width/3),0);jg?e4(6004):null});ev.on(jn.children[0].children[2],"click",function(){jo._panBy(-Math.round(jo._map.width/3),0);jg?e4(6004):null});ev.on(jn.children[0].children[3],"click",function(){jo._panBy(0,-Math.round(jo._map.height/3));jg?e4(6004):null});ev.on(jn.children[0].children[0],"mouseover",function(){jo._panBtnContainer.style.backgroundPosition="0 -44px"});ev.on(jn.children[0].children[1],"mouseover",function(){jo._panBtnContainer.style.backgroundPosition="0 -176px"});ev.on(jn.children[0].children[2],"mouseover",function(){jo._panBtnContainer.style.backgroundPosition="0 -88px"});ev.on(jn.children[0].children[3],"mouseover",function(){jo._panBtnContainer.style.backgroundPosition="0 -132px"});ev.on(jo._panBtnContainer,"mouseout",function(){jo._panBtnContainer.style.backgroundPosition="0 0"});var jm=jn.children[1].children;ev.on(jm[0],"click",function(){var i=jo._map;if(i.mapType===BMAP_EARTH_MAP){if(i._earth){if(i._earth.getLock()){return}i._earth.zoomIn({from:"control"});i._earth.fire(new fa("onzoominclick"))}}else{jg?e4(6005):null;if(i.config.isModernBrowser){jo._deepZoomIn()}else{jo._zoomIn()}i.fire(new fa("onzoominclick"))}});ev.on(jm[1],"click",function(){var i=jo._map;if(i.mapType===BMAP_EARTH_MAP){if(i._earth){if(i._earth.getLock()){return}i._earth.zoomOut({from:"control"});i._earth.fire(new fa("onzoomoutclick"))}}else{jg?e4(6005):null;if(i.config.isModernBrowser){jo._deepZoomOut()}else{jo._zoomOut()}i.fire(new fa("onzoomoutclick"))}});for(var jh=1;jh<6;jh++){ev.on(jn.children[0].children[jh],"mouseup",function(i){if(jo._map.currentOperation!==dL.dragging&&jo._map.currentOperation!==dL.stdMapCtrlDrag){ad(i)}});ev.on(jn.children[0].children[jh],"contextmenu",function(i){b(i)});ev.on(jn.children[0].children[jh],"click",function(i){b(i)})}ev.on(jm[0],"mouseup",function(i){if(jo._map.currentOperation!==dL.dragging&&jo._map.currentOperation!==dL.stdMapCtrlDrag){ad(i)}});ev.on(jm[1],"mouseup",function(i){if(jo._map.currentOperation!==dL.dragging&&jo._map.currentOperation!==dL.stdMapCtrlDrag){ad(i)}});ev.on(jm[0],"contextmenu",function(i){b(i)});ev.on(jm[1],"contextmenu",function(i){b(i)});var jp=jn.children[1].children[2].children[2];ev.on(jp,"mouseup",function(i){if(jo._map.currentOperation!==dL.dragging&&jo._map.currentOperation!==dL.stdMapCtrlDrag){ad(i)}});ev.on(jm[0],"click",function(i){ad(i)});ev.on(jm[1],"click",function(i){ad(i)});ev.on(jp,"click",function(i){ad(i)});var jl=jn.children[1].children[2].children[3];ev.on(jl,"mouseup",function(i){if(i.button==2){ad(i)}});ev.on(jl,"contextmenu",function(i){b(i)});ev.on(this._zoomDom.children[3].children[0],"click",function(i){jo._map.zoomTo(18)});ev.on(this._zoomDom.children[3].children[1],"click",function(i){jo._map.zoomTo(12)});ev.on(this._zoomDom.children[3].children[2],"click",function(i){jo._map.zoomTo(8)});ev.on(this._zoomDom.children[3].children[3],"click",function(i){jo._map.zoomTo(4)});ev.on(jp,"mousedown",function(jq){jq=window.event||jq;var i=jq.offsetY||jq.layerY||0;var jr=0;jr=(jo._maxZoomLevel+1)-Math.round(jo._totalZoomLv*parseFloat(i/(jo._totalZoomLv*jo._sliderInterval)));jo._map.zoomTo(jr);jg?e4(6006):null});ev.on(jl,"mouseover",function(){ev.ac(jl,"h")});ev.on(jl,"mouseout",function(){if(jo._map.currentOperation!==dL.stdMapCtrlDrag){ev.rc(jl,"h")}});var jk=function(i){var i=window.event||i;if(i.button==2){return}if((ev.Browser.ie&&i.button!=1)){return}if(jl.setCapture){jl.setCapture()}jo._map.currentOperation=dL.stdMapCtrlDrag;jo._bind.my=i.pageY||i.clientY||0;if(!ev.Browser.opera){jo._setSliderBarCursor(w.draggingCursor)}ev.on(document,"mousemove",e);ev.on(document,"mouseup",T);ad(i);return b(i)};var e=function(jq){if(jo._map.currentOperation===dL.stdMapCtrlDrag){var jq=window.event||jq;var jr=jq.pageY||jq.clientY;var i=jo._curBarY-jr+jo._bind.my;if(i<jo._minBarY){i=jo._minBarY}else{if(i>jo._maxBarY){i=jo._maxBarY}}jl.style.top=(jo._sliderHeight-i-15)+"px";jo._sliderBotDom.style.height=i+"px"}};var T=function(jq){if(jo._map.currentOperation===dL.stdMapCtrlDrag){var i=ev.G(jl);jo._curBarY=parseInt(i.style.top);ev.rc(jl,"h");jo._map.currentOperation=dL.idle;if(jn&&jl&&jl.releaseCapture){jl.releaseCapture()}if(!ev.Browser.opera){jo._setSliderBarCursor(w.defaultCursor)}var jr=(jo._maxZoomLevel+1)-Math.round(parseFloat(jo._curBarY-jo._minBarY)/parseFloat(jo._maxBarY-jo._minBarY)*(jo._totalZoomLv-1)+1);jo._map.zoomTo(jr);jg?e4(6006):null;ev.un(document,"mousemove",e);ev.un(document,"mouseup",T)}};ev.on(jl,"mousedown",jk)},_setSliderBarCursor:function(e){this._container.children[1].children[2].children[3].style.cursor=e},_panBy:function(i,e){this._map.panBy(i,e)},_zoomIn:function(){this._map.zoomIn()},_zoomOut:function(){this._map.zoomOut()},_deepZoomOut:function(){this._map.deepZoomMedia(-1)},_deepZoomIn:function(){this._map.deepZoomMedia(1)},_setSliderZoomLv:function(i){if(!this._container||(this.getType()!=BMAP_NAVIGATION_CONTROL_LARGE&&this.getType()!=BMAP_NAVIGATION_CONTROL_ANIM)){return}var e=(i-this._minZoomLevel)*this._sliderInterval+this._minBarY;this._curBarY=e>this._maxBarY?this._maxBarY:e<this._minBarY?this._minBarY:e;this._container.children[1].children[2].children[3].style.top=(this._sliderHeight-this._curBarY-15)+"px";this._sliderBotDom.style.height=this._curBarY+"px"},_hideLevelHint:function(e){if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){if(this._container){ev.rc(this._container.children[1].children[3],"hvr")}}if(e&&this._hideTimerId){clearTimeout(this._hideTimerId);this._hideTimerId=null}},_showLevelHint:function(){if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){if(this._container){ev.ac(this._container.children[1].children[3],"hvr")}}},_expandSlider:function(){},_shrinkSlider:function(){},show:function(){f5.prototype.show.call(this);if(ev.Browser.ie<8){var e=this;setTimeout(function(){e.setType(e._opts.type)},1)}}});ev.extend(jd.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(e){f5.prototype.initialize.call(this,e);this._render(e);this._setParam();this._updateScale();this._bind(e);return this._container},_setParam:function(){this._numberArray={us:[5280*5000,5280*2500,5280*2000,5280*1000,5280*500,5280*200,5280*100,5280*50,5280*25,5280*20,5280*10,5280*5,5280*2,5280,2000,1000,500,200,100,50,20,10,5],metric:[10000000,5000000,2000000,1000000,500000,200000,100000,50000,25000,20000,10000,5000,2000,1000,500,200,100,50,20,10,5,2,1]}},_bind:function(i){var e=this;i.addEventListener("zoomend",function(T){e._updateScale()});i.addEventListener("load",function(T){e._updateScale()});i.addEventListener("moveend",function(T){e._updateScale()})},_render:function(e){f5.prototype._render.call(this,e);ev.ac(this._container,"BMap_scaleCtrl");this._container.innerHTML=this._generateHTML();this._container.style.WebkitTextSizeAdjust="none";this._scaleText=this._container.children[0];f5.prototype._setPosition.call(this);if(this.sateMapStyle){this.addSateMapStyle()}},_generateHTML:function(){var e=\'<div class="BMap_scaleTxt" style="white-space:nowrap;overflow:visible;text-align:center"></div><div class="BMap_scaleBarBG BMap_scaleHBarBG"></div><div class="BMap_scaleBarBG BMap_scaleRBarBG"></div><div class="BMap_scaleBarBG BMap_scaleLBarBG"></div><div class="BMap_scaleBar BMap_scaleHBar"></div><div class="BMap_scaleBar BMap_scaleLBar"></div><div class="BMap_scaleBar BMap_scaleRBar"></div>\';return e},setUnit:function(e){this._opts.unit=this._units[e]&&this._units[e].name||this._opts.unit;if(!this._map){return}this._updateScale()},_setScaleText:function(i,e){this._scaleText.innerHTML=i+"&nbsp;"+e},_updateScale:function(){if(!this._map||!this._container||!this._map.isLoaded()){return}var T=this._map;var jl=new eO(Math.round(T.width/2-50),Math.round(T.height/2));var jh=new eO(Math.round(T.width/2+50),Math.round(T.height/2));var je=T.pixelToPointIn(jl,{heading:0});var jk=T.pixelToPointIn(jh,{heading:0});var jg=ig.getDistanceByMC(je,jk)/100;if(jg===0||isNaN(jg)){return}var i=this._convertUnit(jg,this._opts.unit);var e=0;var jf=this._units[this._opts.unit].incon;var jj=Math.round(this._map.getZoom());var ji=this._numberArray[this._opts.unit][jj-1];e=ji/i;if(bK()&&e>100){ji=this._numberArray[this._opts.unit][jj];e=ji/i}if(e>300){return}var jm=ji>=jf?this._units[this._opts.unit].u2:this._units[this._opts.unit].u1;if(ji>=jf){ji=Math.round(ji/jf)}this._setScaleText(ji,jm);this._container.style.width=Math.round(e)+"px"},_convertUnit:function(e,i){i=i||"metric";if(this._units[i]){return e*this._units[i].conv}return e}});ev.extend(bk.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(i){this._map=i;var e=this;if(this.canCheckSize&&!this._checkSize(i)){return null}f5.prototype.initialize.call(this,i);f5.prototype._render.call(this);this.getMapCenter(function(){e._draw();f5.prototype._setPosition.call(e);e._bind(i)});return this._container},each:function(jf,T){for(var je=0,e=jf.length;je<e;je++){T(je,jf[je])}},delegate:function(je,T,i,e){var jf=this;if(!i.matchs){i.matchs=[];i.handle={}}i.matchs.push({filter:e,fn:T});if(!i.handle[je]){i.addEventListener(je,function(jh){var jg=jh.target;while(jg!=i){jf.each(i.matchs,function(ji,jk){var jj=new RegExp(jk.filter);if(jj.test(jg.getAttribute("filter"))){jk.fn.call(jg,jh,jg.getAttribute("filter"))}});jg=jg.parentNode}},false);i.handle.type=true}},_draw:function(){var jm=this;var jl=jm._cityBtn=bL("div",{"class":"ui_city_change"});var jj=jm._opts.anchor;var jp="";var e=false;switch(jj){case BMAP_ANCHOR_TOP_LEFT:jp="float: left";break;case BMAP_ANCHOR_TOP_RIGHT:jp="float: right";break;case BMAP_ANCHOR_BOTTOM_LEFT:jp="float: left";e=true;break;case BMAP_ANCHOR_BOTTOM_RIGHT:jp="float: right";e=true;break;default:break}jl.innerHTML=\'<a href="javascript:void(0)" onclick="return false" class="ui_city_change_inner" style="\'+jp+\'"><span id="cur_city_name" class="cur_city_name">\'+jm._map.cityName+"</span><i><em></em></i></a>";jl.style.position="relative";jl.style.height=34+"px";if(!e){ev.ac(jl,"ui_city_change_top");jm._container.appendChild(jl)}var je=jm._cityListWrap=bL("div",{"class":"citylist_popup_main"});var jo=\'<div class="citylist_ctr_title">城市列表</div>\';bB(je,jo);var jr=bL("div",{"class":"citylist_ctr_content"});var ji=bL("div",{"class":"city_content_top"});ji.innerHTML=\'<p class="cur_city_info">当前城市：<span id="cur_city_spn">\'+jm._map.cityName+"</span</p>";var jf=\'<form id="city_ctrl_form" onsubmit="Instance("\'+this.guid+\'").search(this);return false"><input type="text" class="sel_city_input" id="selCityWd" name="wd" placeholder="请输入城市名" autocomplete="off"><span id="selCitySubmit">搜索</span><div id="selCityTip" style="display:none;height:20px;line-height:20px;color:#AE6842;border:1px solid #E8AA6C;background:#FEFAF1;width:121px;text-align:center">请输入正确的城市</div></form>\';var T=bB(ji,jf);jr.appendChild(ji);var i=bL("div",{"class":"city_content_medium"});var jk=\'<div id="hot_city_ids" class="sel_city_hotcity">\'+this._geneHotCityHtml()+"</div>";var jq=\'<div id="sel_city_letter_list" class="sel_city_letterbar">\'+this._geneCityLetter()+"</div>";bB(i,jk+jq);jr.appendChild(i);var jh=bL("div",{"class":"city_content_bottom",id:"city_detail_tpl"});var jg=this._geneCitiesDetailHtml();jh.innerHTML=jg;jr.appendChild(jh);je.appendChild(jr);var jn=jm._closeBtn=bL("button",{id:"popup_close"});je.appendChild(jn);if(jm._opts.expand){jm.showListWrap(true)}else{jm.showListWrap(false)}if(jj==BMAP_ANCHOR_TOP_RIGHT||jj==BMAP_ANCHOR_BOTTOM_RIGHT){je.style.left="-2px"}jm._container.appendChild(je);if(e){ev.ac(jl,"ui_city_change_bottom");jm._container.appendChild(jl)}ev.ac(jm._container,"BMap_CityListCtrl")},_checkSize:function(e){if(e.width&&e.width>400&&e.height&&e.height>350){return true}return false},_bind:function(e){var jn=this;var jh=jn.onChangeBefore||[];var jq=function(jw,jt){var jw=jw||window.event;var ju=jw.target||jw.srcElement;var jr=ju.getAttribute("name");ad(jw);var jx=true;switch(jt){case"cityHotIds":for(var js=0;js<jh.length;js++){jh[js]&&jh[js]()}jn.changeCity(jr);break;case"cityLetters":if(jr=="other"){jr="Z"}var jv=ev.G("ctr_tr_"+jr);jn._listDetailTbl.scrollTop=jv.offsetTop;jx=false;break;case"cityName":for(var js=0;js<jh.length;js++){jh[js]&&jh[js]()}jn.changeCity(jr);break;default:break}if(jx){setTimeout(function(){jn.showListWrap(false)},200)}};var jm=function(){jn._toggleList()};var jk=function(jx){gH(jx);var ju=(Math.ceil(jx.wheelDelta/120)||-jx.detail/3);var js=ju>0?1:-1;var jt=jn._listDetailTable.clientHeight||jn._listDetailTable.offsetHeight;var jr=jn._listDetailTbl.clientHeight||jn._listDetailTbl.offsetHeight;var jv=0;var jw=jt-(jr-20);if(js>0){jn._listDetailTbl.scrollTop-=20;if(jn._listDetailTbl.scrollTop<=jv){jn._listDetailTbl.scrollTop=0}}else{jn._listDetailTbl.scrollTop+=20;if(jn._listDetailTbl.scrollTop>=jw){jn._listDetailTbl.scrollTop=jw}}};if(jn._container){var ji=jn._cityBtn;var jo=jn._closeBtn;var jp=ev.G("hot_city_ids");var jl=ev.G("sel_city_letter_list");var jf=ev.G("city_detail_table");var jg=ev.G("cur_city_name");var i=ev.G("cur_city_spn");jn.delegate("click",jq,jp,"cityHotIds");jn.delegate("click",jq,jl,"cityLetters");jn.delegate("click",jq,jf,"cityName");ev.on(ji,"click",jm);ev.on(jo,"click",function(){jn.showListWrap(false)});jn._map.addEventListener("citychange",function(jr){jn.getMapCenter(function(){jn.curCityName=jn._map.cityName;if(jn._map.cityName=="中国"){jn.curCityName="全国"}jn.curCityCode=jn._map.cCode;jg.innerHTML=jn.curCityName;i.innerHTML=jn.curCityName})});ev.on(jn._cityListWrap,"mousewheel",function(jr){gH(jr)});if(window.addEventListener){jn._cityListWrap.addEventListener("DOMMouseScroll",function(jr){gH(jr)},false)}var je=jn._listDetailTbl=ev.G("city_detail_tpl");var T=jn._listDetailTable=ev.G("city_detail_table");ev.on(je,"mousewheel",jk);if(window.addEventListener){je.addEventListener("DOMMouseScroll",jk,false)}var jj=ev.G("selCitySubmit");jj.addEventListener("click",function(jt){gH(jt);for(var jr=0;jr<jh.length;jr++){jh[jr]&&jh[jr]()}var js=ev.G("selCityWd").value;if(js.length>0&&js.length<20){js=js.replace(/(\s)/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;");jn.changeCity(js,true)}else{ev.G("selCityTip").style.display="block";return}});ev.on(jn._cityListWrap,"click",function(jr){ev.G("selCityTip").style.display="none"})}},_geneHotCityHtml:function(){var jg=this;var jf=jg.getHotCities();var je="";var T="";for(var e=0;e<jf.length;e++){if(e==0){T="font-weight:bold"}je+=\'<a href="javascript:void(0)" filter="cityHotIds" name="\'+jf[e]+\'" style="margin-right:7px;*margin-right:1px;\'+T+\'">\'+jf[e]+"</a>";T=""}return je},_geneCityLetter:function(){var jf=["A","F","G","H","J","L","N","Q","S","T","X","Y","Z","其他"];var je="";var e="";for(var T=0;T<jf.length;T++){if(T==jf.length-1){e="other"}else{e=jf[T]}je+=\'<a href="javascript:void(0)" filter="cityLetters" name="\'+e+\'">\'+jf[T]+"</a>"}return je},_geneCitiesDetailHtml:function(){var jj=this.getCitiesNames();var jh=\'<table id="city_detail_table" style="border-collapse:collapse;border-spacing:0" cellpadding="0" cellspacing="0">\';for(var jg in jj){var e=false;if(jg=="特别行政区"){jh+=\'<tr><td class="sel_city_letter"><div></div></td>\';jh+=\'<td class="sel_city_other sel_city_sf"><a href="javascript:void(0)" class="sel_city_name">\'+jg+"</a></td>";jh+=\'<td><div class="bmap-clearfix city_names_wrap">\';for(var T=0;T<jj[jg].length;T++){jh+=\'<a class="sel_city_name" href="javascript:void(0)" filter="cityName" name="\'+jj[jg][T]+\'">\'+jj[jg][T]+"</a>"}jh+="</div></td></tr>"}else{for(var jf in jj[jg]){if(!e){jh+=\'<tr id="ctr_tr_\'+jg+\'"><td class="sel_city_letter"><div>\'+jg+"</div></td>";e=true}else{jh+=\'<tr><td class="sel_city_letter"><div></div></td>\'}jh+=\'<td class="sel_city_sf"><a href="javascript:void(0)" filter="cityName" name="\'+jf+\'">\'+jf+":</a></td>";jh+=\'<td><div class="bmap-clearfix city_names_wrap">\';var ji=jj[jg][jf];for(var je=0;je<ji.length;je++){jh+=\'<a class="sel_city_name" href="javascript:void(0)" filter="cityName" name="\'+jj[jg][jf][je]+\'">\'+jj[jg][jf][je]+"</a>"}jh+="</div></td></tr>"}}}jh+="</table>";return jh},showListWrap:function(e){var i=this;if(i._cityListWrap){e?i._cityListWrap.style.display="block":i._cityListWrap.style.display="none";if(e){i._container.style.width=400+"px"}else{i._container.style.width="auto";i._container.style.height="auto"}}if(i._cityBtn){e?ev.ac(i._cityBtn,"ui_city_change_click"):ev.rc(i._cityBtn,"ui_city_change_click")}},changeCity:function(e,jf){var T=this;if(T._container&&T._cityBtn){var je=ev.G("cur_city_name");var i=ev.G("cur_city_spn");iZ.request(function(jh){var ji=T.onChangeAfter||[];var jj=T.onChangeSuccess||[];setTimeout(function(){for(var jn=0;jn<ji.length;jn++){ji[jn]&&ji[jn]()}},300);if(jh&&jh.result&&jh.result["type"]==eU){if(jh.content.hasOwnProperty("error")||jh.err_msg.length>0){if(jf){ev.G("selCityTip").style.display="block"}return}var jm=jh.content;if(jm){var jl={title:jm.cname||"",uid:jm.uid||"",point:by.parseGeo(jm.geo,true).point||"",city:jm.cname||"",code:jm.code||"",level:jm.level||T._map.getZoom()};var jm=jl.point;var jk=by.getBestLevel(jl.level,T._map);if(isNaN(jk)){jk=T._map.getZoom()}if(jh.content["code"]==1){jk=5}if(jf){setTimeout(function(){T.showListWrap(false)},200)}T._map.centerAndZoom(jm,jk);je.innerHTML=jl.city;i.innerHTML=jl.city;for(var jg=0;jg<jj.length;jg++){jj[jg]&&jj[jg](jl)}}}},{qt:cT,wd:e,dtype:1})}},_toggleList:function(){var i=this;if(i._cityListWrap){var e=i._cityListWrap.style.display=="none"?false:true;i.showListWrap(!e)}},getHotCities:function(){return["全国","北京","上海","广州","深圳","成都","天津","南京","武汉","杭州","重庆"]},getCitiesNames:function(){return{A:{"安徽":["合肥","安庆","蚌埠","亳州","巢湖","池州","滁州","阜阳","淮北","黄山","六安","马鞍山","宿州","铜陵","芜湖","宣城","淮南"]},F:{"福建":["福州","龙岩","南平","宁德","莆田","泉州","三明","厦门","漳州"]},G:{"广东":["广州","潮州","东莞","佛山","河源","惠州","江门","揭阳","茂名","梅州","清远","汕头","汕尾","韶关","深圳","阳江","云浮","湛江","肇庆","中山","珠海"],"广西":["南宁","百色","北海","崇左","防城港","桂林","贵港","河池","贺州","来宾","柳州","钦州","梧州","玉林"],"贵州":["贵阳","安顺","毕节","六盘水","铜仁","遵义","黔西南州","黔东南州","黔南州"],"甘肃":["兰州","白银","定西","甘南州","嘉峪关","金昌","酒泉","临夏州","陇南","平凉","庆阳","天水","武威","张掖"]},H:{"海南":["海口","白沙黎族自治县","保亭黎族苗族自治县","昌江黎族自治县","儋州","澄迈","东方","定安","琼海","琼中黎族苗族自治县","乐东黎族自治县","临高","陵水黎族自治县","三亚","屯昌","万宁","文昌","五指山","三沙"],"河南":["郑州","安阳","鹤壁","焦作","开封","洛阳","漯河","南阳","平顶山","濮阳","三门峡","商丘","新乡","信阳","许昌","周口","驻马店","济源"],"黑龙江":["哈尔滨","大庆","大兴安岭地区","鹤岗","黑河","鸡西","佳木斯","牡丹江","七台河","齐齐哈尔","双鸭山","绥化","伊春"],"湖北":["武汉","鄂州","恩施","黄冈","黄石","荆门","荆州","潜江","神农架林区","十堰","随州","天门","仙桃","咸宁","襄阳","孝感","宜昌"],"湖南":["长沙","常德","郴州","衡阳","怀化","娄底","邵阳","湘潭","湘西州","益阳","永州","岳阳","张家界","株洲"],"河北":["石家庄","保定","沧州","承德","邯郸","衡水","廊坊","秦皇岛","唐山","邢台","张家口"]},J:{"江苏":["南京","常州","淮安","连云港","南通","苏州","宿迁","泰州","无锡","徐州","盐城","扬州","镇江"],"江西":["南昌","抚州","赣州","吉安","景德镇","九江","萍乡","上饶","新余","宜春","鹰潭"],"吉林":["长春","白城","白山","吉林市","辽源","四平","松原","通化","延边"]},L:{"辽宁":["沈阳","鞍山","本溪","朝阳","大连","丹东","抚顺","阜新","葫芦岛","锦州","辽阳","盘锦","铁岭","营口"]},N:{"宁夏":["银川","固原","石嘴山","吴忠","中卫"],"内蒙古":["呼和浩特","阿拉善盟","包头","巴彦淖尔","赤峰","鄂尔多斯","呼伦贝尔","通辽","乌海","乌兰察布","锡林郭勒盟","兴安盟"]},Q:{"青海":["西宁","果洛州","海东地区","海北州","海南州","海西州","黄南州","玉树州"]},S:{"山东":["济南","滨州","东营","德州","菏泽","济宁","莱芜","聊城","临沂","青岛","日照","泰安","威海","潍坊","烟台","枣庄","淄博"],"山西":["太原","长治","大同","晋城","晋中","临汾","吕梁","朔州","忻州","阳泉","运城"],"陕西":["西安","安康","宝鸡","汉中","商洛","铜川","渭南","咸阳","延安","榆林"],"四川":["成都","阿坝州","巴中","达州","德阳","甘孜州","广安","广元","乐山","凉山州","泸州","南充","眉山","绵阳","内江","攀枝花","遂宁","雅安","宜宾","资阳","自贡"]},T:{"台湾":["台北","高雄","台中","台南","新北","基隆","新竹","嘉义"]},X:{"西藏":["拉萨","阿里地区","昌都","林芝市","那曲","日喀则","山南"],"新疆":["乌鲁木齐","阿拉尔","阿克苏地区","阿勒泰地区","巴音郭楞蒙古自治州","博尔塔拉州","昌吉州","哈密","和田地区","喀什地区","克拉玛依","克孜勒苏州","石河子","塔城地区","图木舒克","吐鲁番","五家渠","伊犁州","北屯","铁门关","双河","可克达拉","昆玉"]},Y:{"云南":["昆明","保山","楚雄州","大理州","德宏州","迪庆州","红河州","丽江","临沧","怒江州","普洱","曲靖","昭通","文山","西双版纳傣族自治州","玉溪"]},Z:{"浙江":["杭州","湖州","嘉兴","金华","丽水","宁波","衢州","绍兴","台州","温州","舟山"]},"特别行政区":["香港","澳门"]}},getMapCenter:function(i){var jf=this._map;var T=jf.getBounds();var jg=jf.getZoom();var e=ig.convertLL2MC(T.getSouthWest());var je=ig.convertLL2MC(T.getNorthEast());iZ.request(function(jj){if(jj&&jj.current_city&&jj.current_city["name"]){var ji=jj.current_city["name"];var jh=jj.current_city["code"];this.curCityName=jf.cityName=ji;this.curCityCode=jf.cCode=jh;if(i){i.call(this)}}},{qt:"cen",b:e.lng+","+e.lat+";"+je.lng+","+je.lat,l:jg},"","",true)}});var bA=new String(w.imgPath+"maptype.png?20150903");bA.toCss=function(e,T){e=typeof e==="number"?e+"px ":"";T=typeof T==="number"?T+"px ":"";var i="transparent url("+this+") no-repeat "+e+T;return i};var fB=[[0,-138],[-11,-138]];fB.toCss=function(i){var e=this[Number(i)];return e[0]+"px "+e[1]+"px"};var h7={B_EARTH_MAP:{text:"3D地球",title:"显示3D地球",file:bA,x:0,y:-92,right:0},B_NORMAL_MAP:{text:"地图",title:"显示普通地图",file:bA,x:0,y:0,right:0}};var a3={B_NORMAL_MAP:{first:"B_EARTH_MAP",second:"B_NORMAL_MAP",showMenu:true},B_EARTH_MAP:{first:"B_NORMAL_MAP",second:"B_EARTH_MAP",showMenu:false}};var c8=["B_NORMAL_MAP","B_EARTH_MAP"];var hY={HIGHLIGHT:"#0c88e8",NORMAL:"#ffffff",HIGHLIGHT_TEXT:"#ffffff",NORMAL_TEXT:"#666666"};ev.extend(u.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(jt){f5.prototype.initialize.call(this,jt);f5.prototype._render.call(this);f5.prototype._setPosition.call(this);this.mapTypeButtons={};var jg=hY;var je={top:"0px",cursor:"pointer",width:"49px",height:"46px",zIndex:"800",display:"inline-block",position:"absolute",fontSize:"12px",backgroundColor:"#fff"};var T={width:"49px",height:"46px",position:"absolute"};var ju={position:"absolute",top:"28px",left:"2px",width:"45px",height:"16px",backgroundColor:jg.NORMAL,opacity:"0.8",filter:"Alpha(opacity=80);"};var jl={position:"absolute",top:"30px",left:"2px",width:"45px",color:"#666666",textAlign:"center",lineHeight:"12px"};if(ev.isIE>0&&ev.isIE<=8){jl.lineHeight="15px"}ev.extend(this._container.style,{top:"10px",width:"49px",height:"98px"});this._container.style.background="url("+w.imgPath+"blank.gif)";this._container.style.WebkitTransition=this._container.style.transition="top .3s ease-out";var e=bL("div");this._menu=e;ev.extend(e.style,{position:"absolute",width:"71px",height:"24px",border:"1px solid #ABAEB3",fontSize:"12px",bottom:"20px",right:"0",backgroundColor:"white",display:"none",cursor:"pointer"});var jj=bL("span");jj._checked=this._map.isStreetLayerShow();var jh=fB[1];e._checkbox=jj;ev.extend(jj.style,{background:bA.toCss(jh[0],jh[1]),width:"11px",height:"11px",position:"absolute",cssFloat:"left",top:"7px",left:"4px"});e.appendChild(jj);var jk=bL("span");jk.innerHTML="显示路网";ev.extend(jk.style,{position:"absolute",top:"5px",marginLeft:"18px"});e.appendChild(jk);jk.onmouseover=ad;jk.onmouseout=ad;e.onmouseover=ad;e.onmouseout=ad;this._container.appendChild(e);for(var jn=0,jp=c8.length;jn<jp;++jn){var jv=c8[jn];var jf=h7[jv];var jo=bL("div");jo.title=jf.title;jo._name=jv;ev.extend(jo.style,jf);ev.extend(jo.style,je);var jm=bL("div");jm.style.position="absolute";jm.style.width="49px";jm.style.height="46px";jm.style.left=jm.style.top="0";jm.style.zIndex="999";jo._mask=jm;jo.appendChild(jm);var ji=bL("span");jo._captionBg=ji;ev.extend(ji.style,ju);ji.onmouseover=ad;ji.onmouseout=ad;var jr=bL("span");jo._innerBox=jr;ev.extend(jr.style,T);var js=bA.toCss(jf.x,jf.y);jr.style.background=js;var jq=bL("span");jo._caption=jq;jq.innerHTML=jf.text;ev.extend(jq.style,jl);jo.appendChild(jr);jr.appendChild(ji);jr.appendChild(jq);jq.onmouseover=ad;this._container.appendChild(jo);this.mapTypeButtons[jv]=jo}this._bind(jt);this.updateUI(this._map.mapType);return this._container},_bind:function(i){var e=this;this._container.ondblclick=ad;this.mapTypeButtons.B_NORMAL_MAP._mask.onclick=function(){e._map.setMapType("B_NORMAL_MAP")};this.mapTypeButtons.B_EARTH_MAP._mask.onclick=function(){e._map.setMapType("B_EARTH_MAP")};this.mapTypeButtons.B_NORMAL_MAP._mask.onmouseover=function(){e._dehighlightAll();e._highlight(e.mapTypeButtons.B_NORMAL_MAP)};this.mapTypeButtons.B_EARTH_MAP._mask.onmouseover=function(){e._dehighlightAll();e._highlight(e.mapTypeButtons.B_EARTH_MAP)};this.mapTypeButtons.B_NORMAL_MAP._mask.onmouseout=this.mapTypeButtons.B_EARTH_MAP._mask.onmouseout=function(){e._dehighlightAll()};this._menu.onclick=function(T){e._map.showStreetLayer(!e._menu._checkbox._checked);ad(T);return false};this._menu.ondblclick=ad;i.addEventListener("onmaptypechange",function(T){e.updateUI(this.mapType)});i.addEventListener("onstreetlayer_show",function(T){e._menu._checkbox._checked=true;e._menu._checkbox.style.backgroundPosition=fB.toCss(true)});i.addEventListener("onstreetlayer_hide",function(T){e._menu._checkbox._checked=false;e._menu._checkbox.style.backgroundPosition=fB.toCss(false)});i.addEventListener("forceenableearth",function(T){if(this.config.enableEarth){e.showButton("B_EARTH_MAP");e.hideButton("B_NORMAL_MAP")}})},updateUI:function(T){this.hideButton(T);var jg=a3[T];var je=this.mapTypeButtons[jg.first];je.style.top="0";je.style.display="inline-block";this.showButton(jg.first);var e=this.mapTypeButtons[jg.second];e.style.display="none";this.showButton(jg.second);if(T!=="B_NORMAL_MAP"){var i=this._map.isStreetLayerShow();var jf=this._menu;jf._checkbox._checked=i;jf._checkbox.style.backgroundPosition=fB.toCss(i);jf.style.display=""}else{this._menu.style.display="none"}if(!this._map.config.enableEarth){this.hideButton("B_EARTH_MAP")}},remove:function(){var je=this.mapTypeButtons;for(var T=0,e=je.length;T<e;++T){je[T]=null}f5.prototype.remove.call(this)},hideButton:function(i){var e=this.mapTypeButtons[i];if(!e){return}if(e.style){e.style.visibility="hidden"}},showButton:function(i){var e=this.mapTypeButtons[i];if(!e){return}if(e.style){e.style.visibility="visible"}},isButtonVisible:function(i){var e=this.mapTypeButtons[i];if(!e){return}return e.style.visibility==="visible"},_highlight:function(e){if(!e){return}e._captionBg.style.backgroundColor=hY.HIGHLIGHT;e._captionBg.style.opacity="1";e._captionBg.style.filter="";e._caption.style.color=hY.HIGHLIGHT_TEXT},_dehighlight:function(e){if(!e){return}e._captionBg.style.backgroundColor=hY.NORMAL;e._captionBg.style.opacity="0.8";e._captionBg.style.filter="Alpha(opacity=80);";e._caption.style.color=hY.NORMAL_TEXT},_dehighlightAll:function(){this._dehighlight(this.mapTypeButtons.B_NORMAL_MAP);this._dehighlight(this.mapTypeButtons.B_EARTH_MAP);this._dehighlight(this.mapTypeButtons.B_SATELLITE_MAP)}});ev.extend(ij.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(i){this._map=i;var je=this._container=document.createElement("div");je.style.cssText="box-shadow: 0 2px 6px 0 rgba(107,120,137,0.20), 0 4px 10px 0 rgba(91,98,107,0.08);background:rgba(255,255,255,1);";je.className="BMap_stdMpZoom";var e=this._zoomIn=document.createElement("div");e.className="BMap_button_new BMap_stdMpZoomIn";e.innerHTML=\'<div class="BMap_smcbg in" style="position: absolute"></div>\';var T=this._zoomOut=document.createElement("div");T.className="BMap_button_new BMap_stdMpZoomOut";T.innerHTML=\'<div class="BMap_smcbg out" style="position: absolute; top: 36px;"></div>\';je.appendChild(e);je.appendChild(T);i.getContainer().appendChild(je);this.bindEvt();return je},_generateZoomHtml:function(){var e=\'<div class="BMap_button_new BMap_stdMpZoomIn" title="放大一级"><div class="BMap_smcbg in"></div></div><div class="BMap_button_new BMap_stdMpZoomOut" title="缩小一级"><div class="BMap_smcbg out"></div></div>\';return e},bindEvt:function(){var e=this;var i=e._map;e._zoomIn.onclick=function(){i.zoomIn();e._zoomInTapped=false;this.style.background=""};e._zoomOut.onclick=function(){i.zoomOut();e._zoomOutTapped=false;this.style.background=""};e._zoomIn.ontouchstart=function(T){if(e._zoomInDisabled){return}e._zoomInTapped=true;this.style.background="#9b9b9b";T.preventDefault()};e._zoomIn.ontouchend=function(){if(!e._zoomInTapped){return}i.zoomIn();e.updateUI();e._zoomInTapped=false;this.style.background=""};e._zoomOut.ontouchstart=function(T){if(e._zoomOutDisabled){return}e._zoomOutTapped=true;this.style.background="#9b9b9b";T.preventDefault()};e._zoomOut.ontouchend=function(){if(!e._zoomOutTapped){return}i.zoomOut();e.updateUI();e._zoomOutTapped=false;this.style.background=""};e.zoomChangeHandler=function(){};i.addEventListener("zoomend",e.zoomChangeHandler);i.addEventListener("load",e.zoomChangeHandler)},updateUI:function(){var e=this._map;if(e.getZoom()>=e.getMaxZoom()){this._zoomInDisabled=true}else{this._zoomInDisabled=false;this._zoomIn.childNodes[0].style.backgroundPosition="0px 0px"}if(e.getZoom()<=e.getMinZoom()){this._zoomOutDisabled=true}else{this._zoomOutDisabled=false;this._zoomOut.childNodes[0].style.backgroundPosition="-8px 0"}}});ev.extend(fN.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}if(this._startLocationCalled){this.startLocation();this._startLocationCalled=false}},initialize:function(e){f5.prototype.initialize.call(this,e);this._render(e);this._bind(e);return this._container},startLocation:function(){var T=this;var e=true;if(T.onLocationStart){function je(jg){T._onLocSuccess(jg,true)}function jf(){T._onLocFailure()}e=T.onLocationStart(je,jf)}if(e===false){return}if(!navigator.geolocation){return}var i={enableHighAccuracy:false,maximumAge:1000,timeout:30000};this.watchId&&navigator.geolocation.clearWatch(this.watchId);this.watchId=null;navigator.geolocation.getCurrentPosition(function(jg){T._onLocSuccess(jg,true)},function(jg){T._onLocFailure(jg)},i);if(this.watchPosition){this.watchId=navigator.geolocation.watchPosition(function(jg){T._onLocSuccess(jg,false)},function(jg){},i)}},stopLocationTrace:function(){if(navigator.geolocation){this.watchId&&navigator.geolocation.clearWatch(this.watchId)}},_render:function(T){var i=this._container=document.createElement("div");i.style.cssText="width:39px;height:39px;box-shadow: 0 2px 6px 0 rgba(107,120,137,0.20), 0 4px 10px 0 rgba(91,98,107,0.08);background:#fff;cursor:pointer;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;border-radius: 4px;";var je=this._locBtn=document.createElement("div");je.style.cssText=\'position: absolute;left: 50%;top: 50%;margin-left: -10px;margin-top: -10px;width: 20px;height: 20px;background: url("\'+w.imgResources.locNewPng+\'") 0 0;background-size: 48px 116px;\';i.appendChild(je);var e=this._locFailTip=document.createElement("div");e.innerHTML="定位失败";e.style.cssText="display:none;position:absolute;left:45px;top:50%;width: 52px;height:20px;line-height:20px;margin-top:-10px;font-size:12px;box-shadow:1px 1px 2px rgba(0,0,0,.4);background:rgba(255,255,255,1);border-radius:3px;padding-left:5px;";i.appendChild(e);T.getContainer().appendChild(i);return i},_bind:function(){var e=this;function T(){e._buttonTapped=true;this.style.background="#9b9b9b"}function i(){if(e._buttonTapped===false){return}e._buttonTapped=false;e.startLocation();this.style.background="#fff"}if(!bK()){e._container.addEventListener("mousedown",T,false);e._container.addEventListener("mouseup",i,false)}else{e._container.addEventListener("touchstart",T,false);e._container.addEventListener("touchend",i,false)}},_onLocSuccess:function(jh,jk){var jg=this;var ji=jh.coords.longitude;var jf=jh.coords.latitude;if(jh.coordsType==="bd09mc"){var i=new cf(ji,jf);if(!jg.locMarker){jg._addLocOverlay(i)}else{jg._refreshLocOverlayPosition(i,jk)}return}var jj=1;if(jh.coordsType==="bd09ll"){jj=5}var T=ji+","+jf;var je="locCbk"+Math.floor(Math.random()*10000000000);bp[je]=function(jm){if(jm&&jm.result&&jm.result.length>0){var jl=jm.result[0];var jn=new cf(jl.x,jl.y);if(!jg.locMarker){jg._addLocOverlay(jn)}else{jg._refreshLocOverlayPosition(jn,jk)}}delete bp[je]};var e="//api.map.baidu.com/geoconv/v1/?coords="+T+"&from="+jj+"&to=6&v=gl&type=webgl&ak=1biSUTC4Lo4hgpK3GQoytX3t&callback="+eY+"."+je;ga.load(e)},_onLocFailure:function(){var e=this._locFailTip;e.style.display="block";setTimeout(function(){e.style.display="none"},1000)},_addLocOverlay:function(i){var T=this._map;var e=new iy(w.imgResources.locNewPng,new h8(48,48),{imageSize:new h8(48,116),imageOffset:new h8(0,20)});var je=this.locMarker=new iU(i,{icon:e,baseZIndex:999999,enableMassClear:false,clickable:false});T.addOverlay(je);if(this._opts.autoViewport){if(this._opts.autoZoom){T.centerAndZoomIn(i,this.locLevel)}else{T.setCenterIn(i)}}if(this.useCompass&&this._isSupportCompass()){this.switchToCompassState()}},_refreshLocOverlayPosition:function(i,e){this.locMarker.setPositionIn(i);if(this.headingMarker){this.headingMarker.setPositionIn(i)}if(e&&this._opts.autoViewport){if(this._opts.autoZoom){this._map.centerAndZoomIn(i,this.locLevel)}else{this._map.setCenterIn(i)}}},_isSupportCompass:function(){var e=navigator.userAgent.toLowerCase();if(e.indexOf("android")>-1||!window.DeviceOrientationEvent||(e.indexOf("ucweb")>-1&&e.indexOf("linux")>-1)){return false}return true},switchToCompassState:function(){var T=this;var i=new iy(w.imgResources.locNewPng,new h8(48,48),{imageSize:new h8(48,116),imageOffset:new h8(0,68),anchor:new h8(24,24)});this.headingMarker=new iU(this.locMarker.getPositionIn(),{icon:i,baseZIndex:999998,enableMassClear:false,clickable:false});this._map.addOverlay(this.headingMarker);var e=0;var je=window.orientation;window.addEventListener("deviceorientation",function(jh){var jg;if(!jh.webkitCompassHeading){jg=Math.round(jh.alpha)}else{jg=Math.round(0-jh.webkitCompassHeading)}jg=jg-je;var jf=Math.abs(e-jg);if(jf>1){T.headingMarker.setRotation(0-jg);e=jg}},true);window.addEventListener("orientationchange",function(){je=window.orientation},true)}});');
