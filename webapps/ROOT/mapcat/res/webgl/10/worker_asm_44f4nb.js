function aa(){this.j={}}var ca;ca="undefined"!==typeof window?window:self;function da(b){var a=ha;a.j[b]=a.w()}function ka(b,a){var c=ha;return parseFloat((c.j[a]-c.j[b]).toFixed(2))}aa.prototype.w=ca.performance&&ca.performance.now?function(){return performance.now()}:function(){return Date.now()};function createWasmModule(global, env, buffer) {"use asm";var a=new global.Int8Array(buffer);var b=new global.Int16Array(buffer);var c=new global.Int32Array(buffer);var d=new global.Uint8Array(buffer);var e=new global.Uint16Array(buffer);var f=new global.Uint32Array(buffer);var g=new global.Float32Array(buffer);var h=new global.Float64Array(buffer);var i=env.DYNAMICTOP_PTR|0;var j=env.tempDoublePtr|0;var k=env.ABORT|0;var l=env.STACKTOP|0;var m=env.STACK_MAX|0;var n=env.gb|0;var o=env.fb|0;var p=0;var q=0;var r=0;var s=0;var t=global.NaN,u=global.Infinity;var v=0,w=0,x=0,y=0,z=0.0;var A=0;var B=global.Math.floor;var C=global.Math.abs;var D=global.Math.sqrt;var E=global.Math.pow;var F=global.Math.cos;var G=global.Math.sin;var H=global.Math.tan;var I=global.Math.acos;var J=global.Math.asin;var K=global.Math.atan;var L=global.Math.atan2;var M=global.Math.exp;var N=global.Math.log;var O=global.Math.ceil;var P=global.Math.imul;var Q=global.Math.min;var R=global.Math.max;var S=global.Math.clz32;var T=env.abort;var U=env.assert;var V=env.enlargeMemory;var W=env.getTotalMemory;var X=env.abortOnCannotGrowMemory;var Y=env.setTempRet0;var Z=env.getTempRet0;var _=0.0;
// EMSCRIPTEN_START_FUNCS
function $(a){a=a|0;var b=0;b=l;l=l+a|0;l=l+15&-16;return b|0}function aa(){return l|0}function ba(a){a=a|0;l=a}function ca(a,b){a=a|0;b=b|0;l=a;m=b}function da(a,b){a=a|0;b=b|0;if(!p){p=a;q=b}}function ea(){return n+1892368|0}function fa(){return n+1990672|0}function ga(){return n+0|0}function ha(){return n+4374544|0}function ia(){return n+1998864|0}function ja(){return n+1998864+(c[n+32768>>2]<<1)|0}function ka(){return n+2523152|0}function la(){return n+2523152+((c[n+32772>>2]|0)*20|0)|0}function ma(){return c[n+32772>>2]|0}function na(){c[n+32768>>2]=0;c[n+32772>>2]=0;return}function oa(){return n+32776|0}function pa(){return n+3833872|0}function qa(){c[n+40968>>2]=0;c[n+40972>>2]=0;return}function ra(){return n+3842064|0}function sa(){return n+3842064+(c[n+40968>>2]<<1)|0}function ta(){return n+40976|0}function ua(){return n+40976+((c[n+40972>>2]|0)*28|0)|0}function va(){return c[n+40972>>2]|0}function wa(){return n+1875984|0}function xa(a,b){a=a|0;b=b|0;var c=0,d=0,e=0,f=0;d=(b|0)>0;if(d){c=0;do{e=n+1875984+(c<<2)|0;g[e>>2]=+g[e>>2]/100.0;c=c+1|0}while((c|0)!=(b|0))}if((b|0)>=(a|0)|d^1)return;else c=b;do{d=0;do{f=d+c|0;e=n+1875984+(f<<2)|0;g[e>>2]=+g[n+1875984+(f-b<<2)>>2]+ +g[e>>2]/100.0;d=d+1|0}while((d|0)!=(b|0));c=c+b|0}while((c|0)<(a|0));return}function ya(d,e,f,g,h,i,j,k,l,m,o,p,q){d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=+i;j=j|0;k=k|0;l=l|0;m=m|0;o=o|0;p=p|0;q=q|0;var r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,E=0,F=0,G=0,H=0.0,I=0.0;F=(d|0)/2|0;G=o<<24>>24==1;if(G){b[n+4366352>>1]=0;if((m|0)>2){r=0;s=2;do{I=+(c[n+0+(s<<2)>>2]|0);H=+(c[n+0+((s|1)<<2)>>2]|0);r=(~~(+D(+(I*I+H*H))/10.0)<<16>>16)+(r<<16>>16)|0;b[n+4366352+(((s|0)/2|0)<<1)>>1]=r;s=s+2|0}while((s|0)<(m|0));r=4}}else r=4;if((r|0)==4?(m|0)>2:0){r=2;s=c[n+0>>2]|0;do{C=n+0+(r<<2)|0;s=(c[C>>2]|0)+s|0;c[C>>2]=s;C=r|1;E=n+0+(C<<2)|0;c[E>>2]=(c[E>>2]|0)+(c[n+0+(C+-2<<2)>>2]|0);r=r+2|0}while((r|0)<(m|0))}if(l<<24>>24){b[n+1892368>>1]=b[n+1892368+8>>1]|0;b[n+1892368+2>>1]=b[n+1892368+10>>1]|0;b[n+1892368+4>>1]=b[n+1892368+12>>1]|0;b[n+1892368+6>>1]=b[n+1892368+14>>1]|0;E=F<<1;b[n+1892368+(E+-2<<1)>>1]=b[n+1892368+(E+-6<<1)>>1]|0;b[n+1892368+(E+-1<<1)>>1]=b[n+1892368+(E+-5<<1)>>1]|0;b[n+1892368+(E+-4<<1)>>1]=b[n+1892368+(E+-8<<1)>>1]|0;b[n+1892368+(E+-3<<1)>>1]=b[n+1892368+(E+-7<<1)>>1]|0}C=q-p|0;E=c[n+32772>>2]|0;if((d|0)<=1){za(C,E);return}A=(j|0)==0;B=F+-2|0;w=o<<24>>24==2;x=F+-1|0;y=F+-4|0;z=p+1|0;v=q+-1|0;t=0;r=0;u=E;do{if((t|0)>=4)if((y|0)>(t|0))m=z+((t+-4|0)/5|0)|0;else m=v;else m=p;if(!A)r=b[n+1990672+(m<<1)>>1]|0;d=m<<1;q=((c[n+0+(d<<2)>>2]|0)/10|0)&65535;d=((c[n+0+((d|1)<<2)>>2]|0)/10|0)&65535;o=t<<1;j=~~(+(b[n+1892368+(o<<1)>>1]|0)*i/10.0);o=~~(+(b[n+1892368+((o|1)<<1)>>1]|0)*i/10.0);a:do if(!((t|0)==0|(t|0)==(B|0)))if((t|0)==1|(t|0)==(x|0))l=-1;else{s=t+-2|0;switch((s|0)%5|0|2|0){case 2:{l=1;break a}case 3:{l=-1;break a}default:{l=a[((s|0)/5|0)+(n+4374544)>>0]|0;break a}}}else l=1;while(0);if(G)s=b[n+4366352+(m<<1)>>1]|0;else s=w?((m|0)==0?0:10):0;m=u;u=u+1|0;b[n+2523152+(m*20|0)>>1]=q;b[n+2523152+(m*20|0)+2>>1]=d;b[n+2523152+(m*20|0)+4>>1]=j;b[n+2523152+(m*20|0)+6>>1]=o;a[n+2523152+(m*20|0)+8>>0]=e;a[n+2523152+(m*20|0)+9>>0]=f;a[n+2523152+(m*20|0)+10>>0]=g;a[n+2523152+(m*20|0)+11>>0]=h;b[n+2523152+(m*20|0)+12>>1]=l;b[n+2523152+(m*20|0)+14>>1]=r;b[n+2523152+(m*20|0)+16>>1]=k;b[n+2523152+(m*20|0)+18>>1]=s;t=t+1|0}while((t|0)<(F|0));c[n+32772>>2]=u;za(C,E);return}function za(a,d){a=a|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,o=0,p=0,q=0;l=a+-1|0;k=a+-2|0;j=0;e=1;f=1;i=c[n+32768>>2]|0;while(1){a=e+1|0;o=a+d|0;a=(a&1|0)==0;h=f<<24>>24!=0;p=o+-2|0;m=e+d|0;g=h?p:m;p=h?m:p;b[n+1998864+(i<<1)>>1]=a?g:p;b[n+1998864+(i+1<<1)>>1]=a?p:g;b[n+1998864+(i+2<<1)>>1]=o;o=e+2|0;g=o+d|0;o=(o&1|0)==0;p=g+-1|0;a=h?m:p;m=h?p:m;b[n+1998864+(i+3<<1)>>1]=o?a:m;b[n+1998864+(i+4<<1)>>1]=o?m:a;a=i+6|0;b[n+1998864+(i+5<<1)>>1]=g;if((j|0)>=(l|0))break;o=e+3|0;g=o+d|0;o=(o&1|0)==0;m=g+-2|0;q=g+-1|0;p=h?m:q;m=h?q:m;b[n+1998864+(a<<1)>>1]=o?p:m;b[n+1998864+(i+7<<1)>>1]=o?m:p;b[n+1998864+(i+8<<1)>>1]=g;g=e+4|0;p=g+d|0;m=(g&1|0)==0;o=p+-2|0;q=p+-1|0;a=h?o:q;o=h?q:o;b[n+1998864+(i+9<<1)>>1]=m?a:o;b[n+1998864+(i+10<<1)>>1]=m?o:a;a=i+12|0;b[n+1998864+(i+11<<1)>>1]=p;if((j|0)==(k|0))e=g;else{e=e+5|0;q=e+d|0;m=(e&1|0)==0;o=q+-2|0;g=q+-1|0;p=h?o:g;o=h?g:o;b[n+1998864+(a<<1)>>1]=m?p:o;b[n+1998864+(i+13<<1)>>1]=m?o:p;b[n+1998864+(i+14<<1)>>1]=q;f=f<<24>>24==0&1;a=i+15|0}j=j+1|0;i=a}c[n+32768>>2]=a;return}function Aa(d,f,h,i,j,k,l,m,o,p,q){d=d|0;f=f|0;h=+h;i=i|0;j=j|0;k=k|0;l=l|0;m=m|0;o=o|0;p=p|0;q=q|0;var r=0,s=0,t=0,u=0,v=0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0;if((d|0)>2){r=2;s=c[n+32776>>2]|0;do{u=n+32776+(r<<2)|0;s=(c[u>>2]|0)+s|0;c[u>>2]=s;u=r|1;v=n+32776+(u<<2)|0;c[v>>2]=(c[v>>2]|0)+(c[n+32776+(u+-2<<2)>>2]|0);r=r+2|0}while((r|0)<(d|0))}u=c[n+40972>>2]|0;v=(d|0)>0;if(v){s=u+((d+-1|0)>>>1)|0;r=0;t=u;while(1){w=+(c[n+32776+((r|1)<<2)>>2]|0)/100.0;g[n+40976+(t*28|0)>>2]=+(c[n+32776+(r<<2)>>2]|0)/100.0;g[n+40976+(t*28|0)+4>>2]=w;g[n+40976+(t*28|0)+8>>2]=h;g[n+40976+(t*28|0)+12>>2]=0.0;g[n+40976+(t*28|0)+16>>2]=0.0;g[n+40976+(t*28|0)+20>>2]=1.0;a[n+40976+(t*28|0)+24>>0]=i;a[n+40976+(t*28|0)+25>>0]=j;a[n+40976+(t*28|0)+26>>0]=k;a[n+40976+(t*28|0)+27>>0]=l;r=r+2|0;if((r|0)>=(d|0))break;else t=t+1|0}r=s+1|0;c[n+40972>>2]=r}else r=u;if((f|0)>0){i=c[n+40968>>2]|0;s=0;t=i;while(1){b[n+3842064+(t<<1)>>1]=(e[n+3833872+(s<<1)>>1]|0)+u;s=s+1|0;if((s|0)==(f|0))break;else t=t+1|0}c[n+40968>>2]=i+f}if(!v)return;i=d+-2|0;t=c[n+40968>>2]|0;k=(d+-1|0)>>>1;j=r+(k<<2)|0;k=t+(k*6|0)|0;s=0;while(1){C=+(c[n+32776+(s<<2)>>2]|0)/100.0;B=+(c[n+32776+((s|1)<<2)>>2]|0)/100.0;f=s;s=s+2|0;l=(f|0)==(i|0);A=+(c[n+32776+((l?0:s)<<2)>>2]|0)/100.0;z=+(c[n+32776+((l?1:f+3|0)<<2)>>2]|0)/100.0;E=A-C;w=z-B;D=C-C;F=B-B;y=w*h-F*0.0;x=D*0.0-E*h;w=F*E-D*w;f=r+1|0;g[n+40976+(r*28|0)>>2]=C;g[n+40976+(r*28|0)+4>>2]=B;g[n+40976+(r*28|0)+8>>2]=0.0;g[n+40976+(r*28|0)+12>>2]=y;g[n+40976+(r*28|0)+16>>2]=x;g[n+40976+(r*28|0)+20>>2]=w;a[n+40976+(r*28|0)+24>>0]=m;a[n+40976+(r*28|0)+25>>0]=o;a[n+40976+(r*28|0)+26>>0]=p;a[n+40976+(r*28|0)+27>>0]=q;l=r+2|0;g[n+40976+(f*28|0)>>2]=C;g[n+40976+(f*28|0)+4>>2]=B;g[n+40976+(f*28|0)+8>>2]=h;g[n+40976+(f*28|0)+12>>2]=y;g[n+40976+(f*28|0)+16>>2]=x;g[n+40976+(f*28|0)+20>>2]=w;a[n+40976+(f*28|0)+24>>0]=m;a[n+40976+(f*28|0)+25>>0]=o;a[n+40976+(f*28|0)+26>>0]=p;a[n+40976+(f*28|0)+27>>0]=q;v=r+3|0;g[n+40976+(l*28|0)>>2]=A;g[n+40976+(l*28|0)+4>>2]=z;g[n+40976+(l*28|0)+8>>2]=0.0;g[n+40976+(l*28|0)+12>>2]=y;g[n+40976+(l*28|0)+16>>2]=x;g[n+40976+(l*28|0)+20>>2]=w;a[n+40976+(l*28|0)+24>>0]=m;a[n+40976+(l*28|0)+25>>0]=o;a[n+40976+(l*28|0)+26>>0]=p;a[n+40976+(l*28|0)+27>>0]=q;g[n+40976+(v*28|0)>>2]=A;g[n+40976+(v*28|0)+4>>2]=z;g[n+40976+(v*28|0)+8>>2]=h;g[n+40976+(v*28|0)+12>>2]=y;g[n+40976+(v*28|0)+16>>2]=x;g[n+40976+(v*28|0)+20>>2]=w;a[n+40976+(v*28|0)+24>>0]=m;a[n+40976+(v*28|0)+25>>0]=o;a[n+40976+(v*28|0)+26>>0]=p;a[n+40976+(v*28|0)+27>>0]=q;u=r&65535;b[n+3842064+(t<<1)>>1]=u;b[n+3842064+(t+1<<1)>>1]=l;v=v&65535;b[n+3842064+(t+2<<1)>>1]=v;b[n+3842064+(t+3<<1)>>1]=u;b[n+3842064+(t+4<<1)>>1]=v;b[n+3842064+(t+5<<1)>>1]=f;if((s|0)>=(d|0))break;else{t=t+6|0;r=r+4|0}}c[n+40972>>2]=j+4;c[n+40968>>2]=k+6;return}function Ba(){}

// EMSCRIPTEN_END_FUNCS
return{_reset_line:na,_get_block_index_start:ra,setThrew:da,_get_line_turnings_address:ha,_get_block_triangle_indices_address:pa,_get_line_vertex_count:ma,stackAlloc:$,_get_block_vertex_count:va,_get_block_vertex_start:ta,_get_line_vertex_end:la,_get_feature_points_address:wa,stackRestore:ba,_get_block_index_end:sa,_get_line_altitudes_address:fa,_get_block_vertex_end:ua,stackSave:aa,runPostSets:Ba,_get_line_vertex_start:ka,_parse_points:xa,_get_line_points_address:ga,establishStackSpace:ca,_get_line_index_end:ja,_append_line_data:ya,_get_line_index_start:ia,_append_block_data:Aa,_get_block_points_address:oa,_reset_block:qa,_get_line_data_address:ea}}


;var ra,sa,ta,Aa,Ba,Ca,y,Ga,Ha,Ia,Ja,Ka,La,Ma,Va,Wa,Xa,Ya;
ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(b,a){void 0===b&&(b=0);void 0===a&&(a=this.byteLength);b=Math.floor(b);a=Math.floor(a);0>b&&(b+=this.byteLength);0>a&&(a+=this.byteLength);b=Math.min(Math.max(0,b),this.byteLength);a=Math.min(Math.max(0,a),this.byteLength);if(0>=a-b)return new ArrayBuffer(0);var c=new ArrayBuffer(a-b),t=new Uint8Array(c);b=new Uint8Array(this,b,a-b);t.set(b);return c});
function Za(b,a){var c=b.length;a=a||2;Ya||(Ya=y._get_feature_points_address()>>2);ta.set(b,Ya);y._parse_points(c,a);return new Float32Array(ra.slice(Ya<<2,Ya+c<<2))}function $a(){return y._get_block_vertex_count()}function ab(){La||(La=y._get_line_vertex_start());return new Float32Array(ra.slice(La,y._get_line_vertex_end()))}function ib(){Ka||(Ka=y._get_line_index_start());return new Uint16Array(ra.slice(Ka,y._get_line_index_end()))}function jb(){return y._get_line_vertex_count()}
function kb(b,a,c,t,g,n,l,q,x,f,e){var v=0;t&&(v=t.length,Ha||(Ha=y._get_line_altitudes_address()>>1),Ba.set(t,Ha));q&&q.length&&(Ja||(Ja=y._get_line_turnings_address()),sa.set(q,Ja));g=g||0;f=f||0;e=e||l.length/2;Ga||(Ga=y._get_line_data_address()>>1);Ba.set(b,Ga);Ia||(Ia=y._get_line_points_address()>>2);Aa.set(l,Ia);y._append_line_data(b.length,a[0],a[1],a[2],a[3],c,v,g,n?1:0,l.length,x,f,e)}function lb(){y._reset_line()}
function mb(b){ra||(ra=new ArrayBuffer(4587520),ta=new Float32Array(ra),Aa=new Int32Array(ra),sa=new Int8Array(ra),Ba=new Int16Array(ra),Ca=new Uint16Array(ra),y=self.createWasmModule(self,{W:0,ra:0,V:0,X:0,Y:0,ca:0,aa:0},ra));b&&b()}
function nb(b,a,c,t,g){var n={fixedLabel:[],lineLabel:[]};if(!b)return n;var l=[];if(a&&a.length)for(var q=0;q<a.length;q++){var x=a[q],f=x[0]/4;H[f+1]===ob&&l.push(Q(H[f]+1,x[0],x[0]+x[1]))}a=Q(0,c[0],c[0]+c[1])||[];t=t.height;n.fixedLabel=pb(b,l,t,g,void 0);l=[];for(c=0;c<a.length;c++){var e=b,v=a[c];q=g;x=t;f=l;var d=v[0]/4,w=Q(H[d]+1,v[0],v[0]+v[1]),u=Q(0,w[6][0],w[6][0]+w[6][1]);v=[];for(var k=0;k<u.length;k++)v[k]=new Uint16Array(e,u[k][0],u[k][1]/2);u=qb;var p=Math.pow(2,18-q.zoom),m=q.col*
q.baseTileSize*p,h=q.row*q.baseTileSize*p,E=new Uint16Array(e,w[4][0],w[4][1]/2),r=E.length,A=rb[d+1],C=sb.b(tb,A,"pointText",q.useZoom,ub,!1,T);d=rb[d+2];var B=vb(e,w[0][0],w[0][1],"utf-8"),z=v.length||B.split("").length;if(0!==z){var F=new Int32Array(e,w[1][0],w[1][1]/4),G=new Int16Array(e,w[5][0],w[5][1]/2),R=[G[0]],V=Array.prototype.slice.call(F.slice(0,2)),K=2;for(k=1;K<F.length;K+=2,k++)V[K]=V[K-2]+F[K],V[K+1]=V[K-1]+F[K+1],1===G.length?R[k]=G[0]:1<G.length&&(R[k]=R[k-1]+G[k]);var M=new Uint16Array(e,
w[3][0],w[3][1]/2);e=new Uint16Array(e,w[2][0],w[2][1]/2);for(k=0;k<r;k++)if(w=E[k],wb(w,q.useZoom)){if(q.processedLabelZooms&&q.processedLabelZooms.length){F=q.processedLabelZooms;var W=!1;for(K=0;K<F.length;K++)if(wb(w,F[K])){W=!0;break}if(W)continue}K=M[k];F=k*z*2;F=V.slice(F,F+2*z);var Y=W=1E3,X=-1E3,O=-1E3,J=v.slice(0);K&&J.reverse();for(var L,U,P,N=[],D=0;D<z;D++){var I=e[z*k+D],Z=F[2*D]/100,ea=F[2*D+1]/100,Na=0;0<G.length&&(Na=R[k*z]/100);0===D&&(L=Z,U=ea,P={lng:m+L,lat:h+U});Z=(Z-L)/p;ea=
(ea-U)/p;var S=J[D],fa=null,ua=null;if(S&&0<S.length){var xa=S[0];fa=S[1];var ia=S[2]/u;S=S[3]/u;ua=[ia,S];var la=xa/512,ma=(x-fa-S*u)/x,Oa=xa=(xa+ia*u)/512;fa=(x-fa)/x;fa=[la,ma,xa,ma,Oa,fa,la,ma,Oa,fa,la,fa];la=Z-ia/2;ma=ea+S/2;S=ea-S/2;ia=Z+ia/2;la<W&&(W=la);ia>X&&(X=ia);S<Y&&(Y=S);ma>O&&(O=ma)}N.push({offset:[Z,ea],z:Na,size:ua,angle:I,texcoord:fa})}J=F[2*(z-1)]-F[0];F=F[2*(z-1)+1]-F[1];1===K&&(J=-J,F=-F);0===J?F=0<F?90:270:(D=Math.atan(F/J)/Math.PI*180,0>J&&0<F?D+=180:0>J&&0>F?D+=180:0<J&&0>
F&&(D+=360),360===D&&(D=0),F=D);f.push({type:"line",rank:d,name:B,wordCount:z,pt:P,mcInTile:{x:L,y:U},reverse:K,styleId:A,styleText:C,bds:[W,Y,X,O],wordsInfo:N,labelAngle:F,tracer:w,processedInZoom:q.useZoom,key:"line_"+d+"_"+P.lng+"_"+P.lat})}}}n.lineLabel=l;n.textureHeight=t;n.tileInfo=g;return n}
function pb(b,a,c,t,g){for(var n=[],l=0;l<a.length;l++){var q=b,x=a[l],f=t,e=c,v=n,d=g;if(x&&x.length){d=d||ub;var w=f.useZoom;9===w&&(w=8);for(var u=Math.pow(2,18-f.zoom),k=f.col*f.baseTileSize*u,p=f.row*f.baseTileSize*u,m=f.col,h,E=m,r=1536*Math.pow(2,f.zoom-3)/(f.baseTileSize||256),A=r/2-1,C=-r/2;E>A;)E-=r;for(;E<C;)E+=r;h=E;var B=k;h>m?B=k-40075452:h<m&&(B=k+40075452);for(var z=0;z<x.length;z++){var F=x[z],G=F[0]/4,R=H[G],V=H[G+1],K=sb.b(tb,V,"point",w,d,!1,T),M=sb.b(tb,V,"pointText",w,d,!1,T),
W=Q(R+1,F[0],F[0]+F[1]);if(!(M&&0!==M.length||K&&0!==K.length))if(5===w){if(!W||!W.length)continue;for(var Y=0;Y<W.length;Y++){var X=W[Y],O=X[0]/4,J=H[O],L=Q(J+1,X[0],X[0]+X[1]),U;X[1]&&L[1][1]&&(U=vb(q,L[1][0],L[1][1],"utf-8"));if("\u5317\u4eac"===U){K=sb.b(tb,V,"point",6,d,!1,T);M=sb.b(tb,V,"pointText",6,d,!1,T);break}}}else continue;if(W){var P=null,N=1,D=0,I=0;K&&K[0]&&(K=K[0],P=K.icon,N=(K.zoom||100)/100);for(Y=0;Y<W.length;Y++)if(X=W[Y],O=X[0]/4,J=H[O],L=Q(J+1,X[0],X[0]+X[1]),X[1]){var Z=H[O+
1];if(wb(Z,f.useZoom)){if(f.processedLabelZooms&&f.processedLabelZooms.length&&!T){for(var ea=f.processedLabelZooms,Na=!1,S=0;S<ea.length;S++)if(wb(Z,ea[S])){Na=!0;break}if(Na)continue}var fa=Q(0,L[2][0],L[2][0]+L[2][1]),ua=[];for(S=0;S<fa.length;S++)ua[S]=new Uint16Array(q,fa[S][0],fa[S][1]);var xa=void 0;L[1][1]&&(xa=vb(q,L[1][0],L[1][1],"utf-8"));var ia=xa||"";if(!(M&&0<M.length&&0===ua.length&&""===ia)){var la=H[O+2],ma=H[O+3],Oa=H[O+4],dc=Math.round(la/100),ec=Math.round(ma/100),zb={lng:k+dc,
lat:p+ec},Gc={lng:B+dc,lat:p+ec},fc=void 0;L[0][1]&&(fc=vb(q,L[0][0],L[0][1],void 0));var Ab=H[O+5],gc=0<ua.length||""!==ia&&0<M.length,Bb=xb(P),ic=!(4!==Ab||!gc||!Bb),Hc=!!ia.match(/[qypjg]/g),Ic=fc||"",Jc=zb,Kc=Gc,Lc=ia,Mc=Hc,Nc=Oa,Oc=V,Pc=M,Qc=P,Rc=ic,Sc=Ab,Tc=x.R;a:{var va=void 0,bb=Z,jc=f.useZoom;yb[bb]||(va=bb.toString(2),8>va.length&&(va=Array(8-va.length+1).join("0")+va),yb[bb]=va);va=yb[bb];for(var kc=Cb[jc].start,Uc=Cb[jc].end-kc+1,cb=0;cb<Uc;cb++)if("1"===va[cb]){var lc=cb+kc;break a}lc=
99}var ba={type:"fixed",guid:Ic,pt:Jc,ptFix:Kc,name:Lc,containDescendings:Mc,rank:Nc,iconPos:null,textPos:null,styleId:Oc,styleText:Pc,icon:Qc,textOnIcon:Rc,direction:Sc,onDefaultFloor:Tc,startZoom:lc||99,tilePosStr:la+","+ma,tracer:Z,processedInZoom:f.useZoom,key:"fixed_"+Oa+"_"+zb.lng+"_"+zb.lat};if(null===P||ic)null!==P&&(ba.iconSize=Bb);else{var Db=xb(P);if(Db){var Eb=Db[0]/2*N,Fb=Db[1]/2*N,db=Math.round(-Eb/2),eb=Math.round(-Fb/2),Gb=db+Eb,Hb=eb+Fb;var mc={vertex:[db,eb,Gb,eb,Gb,Hb,db,eb,Gb,
Hb,db,Hb],texcoord:null,width:Eb,height:Fb,iconType:P}}else mc=null;ba.iconPos=mc;ba.iconPos&&(D=ba.iconPos.width,I=ba.iconPos.height)}if(ua.length){var Vc=ba,fb=Ab,Ib=ua,Jb=D,nc=I,gb=e,Pa=qb;"number"!==typeof fb&&(fb=0);for(var Da=Ib.length,oc=[],pc=[],Ea=0,Qa=0,ja=0;ja<Da;ja++)Qa+=Math.round(Ib[ja][3]/Pa);for(ja=0;ja<Da;ja++){var hb=Ib[ja],qc=hb[0],rc=hb[1],Fa=Math.round(hb[2]/Pa),ya=Math.round(hb[3]/Pa);0===Jb&&(fb=4);switch(fb){case 3:var na=Qa/2-ya+2*(Da-1)/2;var wa=Math.round(-Jb/2-Fa-2);var za=
Math.round(na-Ea-2*ja);break;case 1:na=Qa/2-ya+2*(Da-1)/2;wa=Math.round(Jb/2+2);za=Math.round(na-Ea-2*ja);break;case 2:na=nc/2+Qa-ya+2*Da;wa=Math.round(-Fa/2);za=Math.round(na-Ea-2*ja);break;case 0:na=-nc/2-2-ya;wa=Math.round(-Fa/2);za=Math.round(na-Ea-2*ja);break;case 4:na=-Qa/2-2*(Da-1)/2,wa=Math.round(-Fa/2),za=Math.round(na-Ea-2*ja)}Ea+=ya;var sc=wa+Math.round(Fa),tc=za,uc=sc,Kb=tc+Math.round(ya),Lb=qc/512,Mb=(gb-rc-ya*Pa)/gb,vc=(qc+Fa*Pa)/512,Wc=Mb,wc=vc,Nb=(gb-rc)/gb,Xc=Lb,Yc=Nb;oc.push(wa,
za,sc,tc,uc,Kb,wa,za,uc,Kb,wa,Kb);pc.push(Lb,Mb,vc,Wc,wc,Nb,Lb,Mb,wc,Nb,Xc,Yc)}Vc.textPos={vertex:oc,texcoord:pc}}if(ba.textPos||ba.iconPos){var Ra=1E3,Sa=1E3,Ta=-1E3,Ua=-1E3;if(ba.iconPos)for(var Ob=ba.iconPos.vertex,oa=0,Pb=Ob.length;oa<Pb;oa+=2){var pa=Ob[oa],qa=Ob[oa+1];pa<Ra&&(Ra=pa);pa>Ta&&(Ta=pa);qa<Sa&&(Sa=qa);qa>Ua&&(Ua=qa)}if(ba.textPos){var Qb=ba.textPos.vertex;oa=0;for(Pb=Qb.length;oa<Pb;oa+=2)pa=Qb[oa],qa=Qb[oa+1],pa<Ra&&(Ra=pa),pa>Ta&&(Ta=pa),qa<Sa&&(Sa=qa),qa>Ua&&(Ua=qa)}ba.bds=[Ra,
Sa,Ta,Ua]}(Bb||gc)&&v.push(ba)}}}}}}}return n}function xb(b){if(!b||"disekong"===b)return null;var a=Rb[b]||Rb["MapRes/"+b];!a&&b&&48<=b.charCodeAt(0)&&57>=b.charCodeAt(0)&&(a=Rb["_"+b]);return a}var Sb;
Sb=function(b,a,c,t){var g,n;a=Q(0,a[0],a[0]+a[1]);if(!a.length)return{};for(var l={},q=[],x=[],f=[],e=[],v=0;v<a.length;v++){var d=Q(0,a[v][0],a[v][0]+a[v][1]),w=d[0];w=Q(0,w[0],w[0]+w[1]);d=d[1];var u=Q(H[d[0]>>2]+1,d[0],d[0]+d[1]);a:{var k=b;if((g=Q(0,u[2][0],u[2][0]+u[2][1]))&&g[0]){for(var p=0;p<g.length;p++){var m=g[p],h=m[0]>>2;h=H[h];m=Q(h+1,m[0],m[0]+m[1]);if(!m[0][1]){k=[];g=[0,0];var E=n=void 0;break a}}n=[];var r=[0,0],A=[2.003772637E7,1.102819087E7];d=[-2.003772637E7,-1.060158079E7];
E=0;p=c.mercatorSize;var C=c.col*p,B=c.row*p;for(p=0;p<g.length;p++){m=g[p];h=m[0]>>2;h=H[h];m=Q(h+1,m[0],m[0]+m[1]);m=new Int32Array(k,m[0][0],m[0][1]>>2);h=[C+m[0]/100,B+m[1]/100];r[0]+=h[0];r[1]+=h[1];h[0]<A[0]&&(A[0]=h[0]);h[1]<A[1]&&(A[1]=h[1]);h[0]>d[0]&&(d[0]=h[0]);h[1]>d[1]&&(d[1]=h[1]);for(var z=2;z<m.length;z+=2)h[z]=h[z-2]+m[z]/100,h[z+1]=h[z-1]+m[z+1]/100,r[0]+=h[z],r[1]+=h[z+1],h[z]<A[0]&&(A[0]=h[z]),h[z+1]<A[1]&&(A[1]=h[z+1]),h[z]>d[0]&&(d[0]=h[z]),h[z+1]>d[1]&&(d[1]=h[z+1]);E+=m.length;
n.push(h)}r[0]/=E/2;r[1]/=E/2;k=n;g=r;n=A;E=d}else k=[],g=[0,0],E=n=void 0}A=Q(0,u[3][0],u[3][0]+u[3][1]);d=[];for(r=0;r<A.length;r++)d[r]=String.fromCharCode.apply(String,new Uint8Array(b,A[r][0],A[r][1]));C=String.fromCharCode.apply(String,new Uint8Array(b,u[1][0],u[1][1]));A=void 0;u=String.fromCharCode.apply(String,new Uint8Array(b,u[0][0],u[0][1]));for(r=0;r<d.length;r++)if(d[r]===C){A=r;break}k={defaultFloor:A,currentFloor:A,uid:u,floors:[],contour:k,boundsMin:n,boundsMax:E,center:g,floorLength:d.length};
for(r=0;r<d.length;r++){n=d[r];a:{g=b;E=w;C=n;for(p=0;p<E.length;p++)if(B=Q(H[E[p][0]>>2]+1,E[p][0],E[p][0]+E[p][1]),String.fromCharCode.apply(String,new Uint8Array(g,B[0][0],B[0][1]))===C){C=B[1];break a}C=null}g=b;B=u;m=n;n=c;var F=t;E=r===A?!0:!1;if(C)if(C=Q(0,C[0],C[0]+C[1]),C.length){p={base:[],contour:[]};for(var G=0;G<C.length;G++){h=C[G];z=h[0]>>2;var R=H[z+1];7===R&&(F=Tb(g,h,n,p.contour,F,1,{v:!0,M:!0}))}for(G=0;G<p.contour.length;G++)p.contour[G].uid=B;for(G=0;G<C.length;G++)h=C[G],z=h[0]>>
2,R=H[z+1],7===R&&(F=Tb(g,h,n,p.base,F,2,{v:!0}));for(G=0;G<p.base.length;G++)p.base[G].uid=B;(h=Ub(g,C,n,!0))&&0!==h.vertex.length&&(p.area3D=h,p.area3D.uid=B,p.area3D.border&&(p.indoorBorder3D=p.area3D.border,p.indoorBorder3D.uid=B,delete p.area3D.border));p.floorName=m;B=[];for(m=0;m<C.length;m++)h=C[m],z=h[0]>>2,R=H[z+1],R===ob&&(h=Q(H[z]+1,h[0],h[0]+h[1]),h.R=E,B.push(h));p.pois=pb(g,B,E?H[2]:H[3],n,Vb);g=p}else g={floorName:m};else g={floorName:m};k.floors[r]=g}l[u]=k;if(k.floors[A]){if(k.floors[A].base)for(r=
0;r<k.floors[A].base.length;r++)q.push(k.floors[A].base[r]);if(k.floors[A].contour)for(r=0;r<k.floors[A].contour.length;r++)x.push(k.floors[A].contour[r]);k.floors[A].indoorBorder3D&&f.push(k.floors[A].indoorBorder3D);k.floors[A].area3D&&e.push(k.floors[A].area3D)}l.tileInfo=c}0===q.length&&(q=null);0===x.length&&(x=null);0===f.length&&(f=null);0===e.length&&(e=null);return{indoorDataResult:l,indoorBase:q,indoorBaseContour:x,indoorArea3D:e,indoorBorder3D:f}};
var sb=function(){function b(b,t,c,g,f){if(g=g||null){f=g[2];switch(t){case "point":f=f[0];break;case "pointText":f=f[1];break;case "line":f=f[3];break;case "polygon":f=f[4];break;case "polygon3d":f=f[5]}var e=c-1;"line"===t&&12===c&&(e=c);e=g[1][e][0];e=e[b];e||"point"!==t&&"pointText"!==t||(e=g[1][c][0],e=e[b]);c={l:e,style:f,s:[]}}else if(f){g=f.baseFs;b:{var n=f.wa;if("[object Object]"===Object.prototype.toString.call(n)){for(e in n){e=!1;break b}e=!0}else e=!1}f=e?f.StyleBody||[]:f.zoomStyleBody[c]||
[];e=g[2];switch(t){case "point":e=e[0];f=f[0]||{};break;case "pointText":e=e[1];f=f[1]||{};break;case "line":e=e[3];f=f[3]||{};break;case "polygon":e=e[4];f=f[4]||{};break;case "polygon3d":e=e[5],f=f[5]||{}}c={l:g[1][c-1][0][b],style:e,s:f}}else c={l:null,style:[],s:[]};f=c;c=f.l;g=f.style;f=f.s;e=[];if(!c)return e;for(n=0;n<c.length;n++){var d=f[c[n]]||g[c[n]];if(d){switch(t){case "polygon":d={g:b,f:a(d[0]),c:a(d[1]),borderWidth:d[2],B:d[3],C:d[4],va:d[5],da:d[6],sa:d[7],ta:a(d[8])};break;case "line":d=
{g:b,c:a(d[0]),f:a(d[1]),borderWidth:d[2],o:d[3],Z:d[4],G:d[5],ga:d[6],ha:d[7],ia:d[8],ka:d[9],la:d[10],B:d[11],i:d[12],C:d[13],ba:d[14],ja:d[15],ea:d[16],na:d[17],qa:d[18]};break;case "pointText":d=d&&0!==d.length?{sid:b,fontRgba:a(d[0]),haloRgba:a(d[1]),backRgba:a(d[2]),fontSize:d[3],haloSize:d[4],fontWeight:d[5],fontStyle:d[6],density:d[7]}:null;break;case "point":d={sid:b,rank:d[0],ua:d[1],icon:d[2],iconType:d[3],oa:d[4],density:d[5],zoom:d[6]};break;case "polygon3d":d={g:b,filter:d[0],ratio:d[1],
fa:d[2],borderWidth:d[3],c:a(d[4]),H:a(d[5]),m:a(d[6]),pa:d[7]}}d&&(d.$=c[n],e[e.length]=d)}}return e}function a(a){var b=a;if(g[b])return g[b];a>>>=0;g[b]=[a&255,a>>8&255,a>>16&255,a>>24&255];return g[b]}var c={},t={},g={};return{b:function(a,g,q,x,f,e,v){a=(a||"default")+"-"+g+"-"+q+"-"+x;e&&(a+="-indoor");if(f)return t[a]||(t[a]=b(g,q,x,f)),t[a];c[a]||(c[a]=b(g,q,x,f,v));return c[a]}}}();function Wb(b,a){if(b.fill)b.fill(a);else for(var c=0;c<b.length;c++)b[c]=a}
Uint8Array.prototype.slice||(Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Uint16Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Uint32Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Int8Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Int16Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Int32Array.prototype,"slice",{value:Array.prototype.slice}),
Object.defineProperty(Float32Array.prototype,"slice",{value:Array.prototype.slice}));var rb,H,Xb;
function vb(b,a,c,t){b=new Uint8Array(b,a,c);if(self.TextDecoder)return Xb||(Xb=new TextDecoder("utf-8")),Xb.decode(b).replace(/\\\\/g,"\\");if("utf-8"===t)for(t="",a=0;a<b.length;a++)c=b[a],128>c?t+=String.fromCharCode(c):191<c&&224>c?(t+=String.fromCharCode((c&31)<<6|b[a+1]&63),a+=1):223<c&&240>c?(t+=String.fromCharCode((c&15)<<12|(b[a+1]&63)<<6|b[a+2]&63),a+=2):(c=((c&7)<<18|(b[a+1]&63)<<12|(b[a+2]&63)<<6|b[a+3]&63)-65536,t+=String.fromCharCode(c>>10|55296,c&1023|56320),a+=3);else{if(4096>=c)return String.fromCharCode.apply(String,
b);t="";var g=Math.ceil(c/4096);for(a=0;a<g;a++)t+=String.fromCharCode.apply(String,b.slice(4096*a,a===g-1?c:4096*(a+1)))}return t.replace(/\\\\/g,"\\")}function Q(b,a,c){var t=a>>2,g=H[t+b];a=4*(g+b+1)+a;var n=[];if(a>c)return n;for(c=0;c<g;c++){var l=H[t+b+1+c],q=a+l;n[c]=[a,l];0!==q%4?a=q+4-q%4:a=q}return n}
var ob=3,Yb=1E-5,Zb=1,ub=null,Vb=null,Rb=null,tb="",T=null,ha=new aa,$b=20,ac=65536,bc=[245,245,245,255],cc=1,hc=null,xc=null,Cb={3:{start:3,end:3,a:3},4:{start:4,end:5,a:5},5:{start:4,end:5,a:5},6:{start:6,end:7,a:7},7:{start:6,end:7,a:7},8:{start:8,end:9,a:9},9:{start:8,end:9,a:9},10:{start:10,end:10,a:10},11:{start:11,end:13,a:12},12:{start:11,end:13,a:12},13:{start:11,end:13,a:12},14:{start:14,end:15,a:15},15:{start:14,end:15,a:15},16:{start:16,end:17,a:17},17:{start:16,end:17,a:17},18:{start:18,
end:25,a:19},19:{start:18,end:25,a:19},20:{start:18,end:25,a:19},21:{start:18,end:25,a:19},22:{start:18,end:25,a:19},23:{start:18,end:25,a:19},24:{start:18,end:25,a:19},25:{start:18,end:25,a:19}},qb,yc,zc=!1,Ac=[],Bc=!1;function Cc(){Bc||(Bc=!0,mb(function(){zc=!0;if(Ac.length)for(var b=0;b<Ac.length;b++){var a=Ac[b];Dc(a.data,a.u,a.T)}Ac=[]}))}self.onmessage=function(b){b=b.data;var a=b.action,c=b.isText,t=b.isPoi;if(self[a])self[a](b);self.isText=c;self.isPoi=t};
var yb={0:"00000000",16:"00010000",32:"00100000",48:"00110000",64:"01000000",96:"01100000"};function wb(b,a){if(!yb[b]){var c=b.toString(2);8>c.length&&(c=Array(8-c.length+1).join("0")+c);yb[b]=c}c=yb[b];return"1"===c[a-Cb[a].start]}
function Dc(b,a,c){da("finishLoadTile");try{da("begin(ParseData)"),Ec(b,a,c,function(a){da("finishParseData");a.base=a.a;a.base3d=a.A;a.virtual=a.U;a.building3d=a.D;a.building3dMesh=a.F;a.indoorData=a.N;a.indoorBase=a.J;a.indoorBaseContour=a.K;a.indoorBorder3D=a.L;a.indoorArea3D=a.I;a.label=a.label;a.tileInfo=a.u;for(var b=[],c=0;c<a.base.length;c++){var l=a.base[c];b.push(l.data[0].buffer);b.push(l.data[1].buffer)}if(a.base3d)for(c=0;c<a.base3d.length;c++)l=a.base3d[c],"block"===l.type?(b.push(l.data.vertex.buffer),
b.push(l.data.index.buffer)):(b.push(l.data[0].buffer),b.push(l.data[1].buffer));if(a.virtual)for(c=0;c<a.virtual.length;c++)l=a.virtual[c],b.push(l.data[0].buffer),b.push(l.data[1].buffer);a.building3d&&(b.push(a.building3d.vertex.buffer),b.push(a.building3d.index.buffer));if(a.indoorBase)for(c=0;c<a.indoorBase.length;c++)l=a.indoorBase[c],b.push(l.data[0].buffer),b.push(l.data[1].buffer);if(a.indoorBaseContour)for(c=0;c<a.indoorBaseContour.length;c++)l=a.indoorBaseContour[c],b.push(l.data[0].buffer),
b.push(l.data[1].buffer);if(a.indoorBorder3D&&a.indoorBorder3D&&0<a.indoorBorder3D.length)for(c=0;c<a.indoorBorder3D.length;c++)b.push(a.indoorBorder3D[c].data[0].buffer),b.push(a.indoorBorder3D[c].data[1].buffer);if(a.indoorArea3D&&0<a.indoorArea3D.length)for(c=0;c<a.indoorArea3D.length;c++)b.push(a.indoorArea3D[c].vertex.buffer),b.push(a.indoorArea3D[c].index.buffer);a.label&&(a.label.textImageBitmap&&b.push(a.label.textImageBitmap),a.label.indoorTextImageBitmap&&b.push(a.label.indoorTextImageBitmap));
a.perfStat=[ka("beginLoadTile","finishLoadTile"),ka("finishLoadTile","beginParseData"),ka("beginParseData","finishParseData"),yc];a.endTime=Date.now();postMessage(a,b)})}catch(t){postMessage({tileInfo:a,tileKey:c,error:"parse_error",message:t.message})}}
self.loadTileData=function(b){var a=b.url,c={};c.baseTileSize=b.tileInfo.baseTileSize;c.col=b.tileInfo.col;c.loopOffsetX=b.tileInfo.loopOffsetX;c.mercatorSize=b.tileInfo.mercatorSize;c.row=b.tileInfo.row;c.tileSize=b.tileInfo.tileSize;c.tileTypeName=b.tileInfo.tileTypeName;c.useZoom=b.tileInfo.useZoom;c.zoom=b.tileInfo.zoom;c.processedLabelZooms=b.tileInfo.processedLabelZooms;var t=b.tileKey;b.featureStyle&&(ub=JSON.parse(b.featureStyle),T=null);b.indoorStyle&&(Vb=JSON.parse(b.indoorStyle));b.iconSetInfo&&
(Rb=JSON.parse(b.iconSetInfo));b.iconInfo&&(qb=b.iconInfo.textSizeRatio);b.mapStyleId&&(tb=b.mapStyleId);b.customMapStyle&&(T=JSON.parse(b.customMapStyle),ub=null);c.style=tb;hc=xc=null;yc=0;var g=new XMLHttpRequest;g.open("GET",a,!0);b=b.tileInfo.header;if(b instanceof Array)for(var n=0;n<b.length;n++)b[n]&&b[n].hasOwnProperty("key")&&b[n].hasOwnProperty("value")&&g.setRequestHeader(b[n].key,b[n].value);g.responseType="arraybuffer";g.timeout=1E4;g.ontimeout=function(){postMessage({tileInfo:c,tileKey:t,
error:"net_timeout",message:"net status: timeout"})};g.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(yc=Math.round(g.response.byteLength/1024),zc?Dc(g.response,c,t):Ac[Ac.length]={data:g.response,u:c,T:t}),(400<=this.status||0===this.status)&&postMessage({tileInfo:c,tileKey:t,error:"net_error",message:"net status: "+this.status,event:{title:a,ma:JSON.stringify({responseURL:a,status:this.status})}}))};g.send();Cc();da("beginLoadTile")};
function Ec(b,a,c,t){var g=[],n=[],l=[],q=0,x=a.useZoom,f=null,e=null;H=new Uint32Array(b);rb=new Int32Array(b);cc=H[0];for(var v=Q(H[1]+2,0,b.byteLength),d=Q(0,v[0][0],v[0][0]+v[0][1]),w,u=!1,k=0;k<d.length;k++){f=d[k];var p=f[0]>>2,m=H[p+1];if(7===m){u=!0;break}}!1===u&&(q=Tb(null,null,a,g,q,0));for(k=0;k<d.length;k++)f=d[k],p=f[0]>>2,m=H[p+1],u=H[p+2],7===m?q=Tb(b,f,a,g,q,0):4===m?13E3===u||83500===u?Fc(b,f,x,l,0):q=Fc(b,f,x,g,q):15===m?(w=q,q=Tb(b,f,a,n,q,1,{O:!0})):16===m?q=Fc(b,f,x,n,q,!0):
18===m?T&&T.zoomFrontStyle&&T.zoomFrontStyle[x]&&"off"===T.zoomFrontStyle[x].bmapRoadarrowVisibility||(q=Zc(b,f,x,n,q)):19===m?q=$c(b,f,x,g,q):20===m&&(q=ad(b,f,x,n,q));(k=bd(d,a))&&n.push({type:"block",data:k,has3D:!0,has2D:!1});f=Ub(b,d,a);k=cd(b,d,a);0<k&&(e={vertex:new Float32Array(7*k),index:new Uint16Array(k/3)},cd(b,d,a,e.vertex,e.index));k={S:vb(b,v[3][0],v[3][1],void 0)||"",height:H[2]||0};var h=nb(b,d,v[2],k,a)||{};h.textImgStr=k.S||null;v[4][1]&&H[3]?(h.indoorTextImgStr=vb(b,v[4][0],v[4][1],
void 0)||null,h.indoorTextureHeight=H[3]):h.indoorTextImgStr=null;b=Sb(b,v[1],a,w?w:q);h.indoorLabel=[];if(b.indoorDataResult)for(var E in b.indoorDataResult)if("tileInfo"!==E)for(q=b.indoorDataResult[E],v=q.defaultFloor,b.indoorDataResult[E].tileKey=c,k=0;k<q.floors.length;k++)v===k&&q.floors[k].pois&&(h.indoorLabel=h.indoorLabel.concat(q.floors[k].pois));H=rb=null;g.length&&(g=dd(g));var r={a:g,A:n.length?n:null,U:l.length?l:null,D:f,F:e,N:b.indoorDataResult,J:b.indoorBase,K:b.indoorBaseContour,
L:b.indoorBorder3D,I:b.indoorArea3D,label:h,u:a};if((h.textImgStr||h.indoorTextImgStr)&&self.fetch&&self.createImageBitmap&&self.Promise){var A=function(){t(r)},C=0;h.textImgStr&&(C++,fetch(h.textImgStr).then(function(a){a.blob().then(function(a){createImageBitmap(a,{imageOrientation:"flipY"}).then(function(a){h.textImageBitmap=a;h.textImgStr=null;C--;0===C&&t(r)},A)},A)},A));h.indoorTextImgStr&&(C++,fetch(h.indoorTextImgStr).then(function(a){a.blob().then(function(a){createImageBitmap(a,{imageOrientation:"flipY"}).then(function(a){h.indoorTextImageBitmap=
a;h.indoorTextImgStr=null;C--;0===C&&t(r)},A)},A)},A))}else t(r)}function dd(b){for(var a=void 0,c=0,t=0,g=!1,n=0;n<b.length;n++)"fill"!==b[n].type?a=void 0:b[n].type===a?(b[c]=ed(b[c],b[n],t),b[n].P=!0,t+=b[n].h,g=!0):(c=n,a=b[n].type,t=b[n].h);return g?b.filter(function(a){return!a.P}):b}function ed(b,a,c){var t=b.data[1],g=a.data[1];b.data[0]=fd(b.data[0],a.data[0]);b.data[1]=fd(t,g,c);b.has3D=b.has3D||a.has3D;b.has2D=b.has2D||a.has2D;return b}
function fd(b,a,c){if(b.constructor===ArrayBuffer){var t=new Uint8Array(b.byteLength+a.byteLength);t.set(new Uint8Array(b),0);t.set(new Uint8Array(a),b.byteLength);return t.buffer}t=new b.constructor(b.length+a.length);t.set(b,0);if(c)for(var g=0;g<a.length;g++)a[g]+=c;t.set(a,b.length);return t}
function Tb(b,a,c,t,g,n,l){var q=[];b&&(q=a?a[0]>>2:0,q=H[q],q=Q(q+1,a[0],a[0]+a[1]));a=0;var x=c.baseTileSize;c=c.useZoom;var f=[],e=[],v=[],d=[];l=l||{};var w=l.v||!1,u=l.O||!1;l=l.M||!1;if(!u&&0===g){e=bc;if(T&&T.bmapLandColor){e=T.bmapLandColor.replace("#","");3===e.length?e+="f":6===e.length&&(e+="ff");v=[];d=e.length;f=8===d?2:1;for(var k=0;k<d;k+=f)2===f?v.push(parseInt(e.slice(k,k+2),16)):v.push(parseInt(e.slice(k,k+1)+e.slice(k,k+1),16));e=v}f=[0,0,0,e[0],e[1],e[2],e[3],0,x,0,0,e[0],e[1],
e[2],e[3],0,x,x,0,e[0],e[1],e[2],e[3],0,0,x,0,e[0],e[1],e[2],e[3],0];e=[0,1,2,0,2,3];v=[72];d=[20]}1===n?(g++,a=g,g+=5):2===n&&(a=g+3*q.length+1);k=[];for(var p=[],m=!1,h=!1,E=0;E<q.length;E++){var r=q[E],A=r[0]>>2,C=H[A];A=H[A+1];var B=sb.b(tb,A,"polygon",c,w?Vb:ub,w,T);if(B&&B.length){B=B[0];if(B.g){if(6<c&&(71013===B.g||71012===B.g||71011===B.g))continue;if(5<c&&71011===B.g)continue;if(5>c&&(71012===B.g||71013===B.g))continue}var z=B.f[0],F=B.f[1],G=B.f[2],R=B.f[3],V=B.c[0],K=B.c[1],M=B.c[2],W=
B.c[3],Y=B.borderWidth/4,X=2.5*Y;r=Q(C+1,r[0],r[0]+r[1]);g+=3;for(C=0;C<r.length;C++){var O=r[C],J=O[0]>>2,L=H[J];if(wb(H[J+1],c)){var U=Q(L+1,O[0],O[0]+O[1]);O=new Int32Array(b,U[0][0],U[0][1]>>2);if(O.length&&!(4E3<O.length)){var P=new Uint16Array(b,U[2][0],U[2][1]>>1);!0!==l&&P&&f.length/8+O.length/2>ac&&(f=gd(f),t.push({type:"fill",data:[f,new Uint16Array(e)],h:f.byteLength/$b,has3D:m,has2D:h,verticesLength:d,styleIds:v}),f=[],e=[],v=[],d=[],h=m=!1);L=null;var N=!1;if(u){var D=1<cc?new Int16Array(b,
U[1][0],U[1][1]>>1):new Uint16Array(b,U[1][0],U[1][1]>>1);if(1===D.length&&D[0])L=Array(O.length>>1),0>D[0]&&(N=!0),Wb(L,D[0]),m=!0;else if(1<D.length){L=[];for(var I=0;I<D.length;I++)0>D[I]&&(N=!0),L[I]=D[I]||Zb;m=!0}else h=!0}I=f.length/8;D=Za(O);J=H[J+2];l&&1===J&&(Y=X);if(!0!==l&&P){J=e;for(var Z=0;Z<P.length;Z++)J[J.length]=P[Z]+I;I=0;for(P=D.length/2;I<P;I++)J=L?L[I]:0,f.push(D[2*I],D[2*I+1],J,z,F,G,R,g);v.push(A);d.push(f.length/1.6)}if(L&&!N)for(k.length/8+D.length/2*2>ac&&(k=gd(k),p=new Uint16Array(p),
t.push({type:"fill",data:[k,p],h:k.byteLength/$b,has3D:m,has2D:h}),p=[],k=[]),N=k.length/8,I=0;I<D.length;I+=2){J=L[I/2];P=J-280;0>P&&(P=0);k.push(D[I],D[I+1],J,V,K,M,W,g,D[I],D[I+1],P,V,K,M,W,g);J=D[I];P=D[I+1];Z=I===D.length-2?D[1]:D[I+3];var ea=!1;if(J===(I===D.length-2?D[0]:D[I+2])){if(Math.abs(J)<Yb||Math.abs(J-x)<Yb)ea=!0}else P===Z&&(Math.abs(P)<Yb||Math.abs(P-x)<Yb)&&(ea=!0);ea||(I===D.length-2?p.push(N+I,N+I+1,N,N,N+I+1,N+1):p.push(N+I,N+I+1,N+I+2,N+I+2,N+I+1,N+I+3))}if(n&&B.borderWidth&&
D.length){if(D[0]-D[D.length-2]>Yb||D[1]-D[D.length-1]>Yb)D[D.length]=D[0],D[D.length]=D[1],L&&(L[L.length]=L[0]);if(U[3])for(U=Q(0,U[3][0],U[3][0]+U[3][1]),D=0;D<U.length;D++)N=U[D],J=Q(0,N[0],N[0]+N[1]),N=new Int16Array(b,J[0][0],J[0][1]>>1),jb()+N.length/2>ac&&(t.push({type:"line",data:[ab(),ib()],has3D:m,has2D:h}),lb()),I=new Uint16Array(b,J[1][0],J[1][1]>>1),J=new Int8Array(b,J[2][0],J[2][1]),kb(N,[V,K,M,W],Y,L,a,!1,O,J,0,I[0],I[1])}}}}}}k.length&&(k=gd(k),p=new Uint16Array(p),t.push({type:"fill",
data:[k,p],h:k.byteLength/$b,has3D:m,has2D:h}));f.length&&(f=gd(f),t.push({type:"fill",data:[f,new Uint16Array(e)],h:f.byteLength/$b,has3D:m,has2D:h,verticesLength:d,styleIds:v}));n&&(t.push({type:"line",data:[ab(),ib()],has3D:m,has2D:h}),lb());return Math.max(g,a)}
function Fc(b,a,c,t,g,n){a=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]);for(var l=!1,q=!1,x=[],f=[],e=0;2>e;e++){0===e&&g++;for(var v=0;v<a.length;v++){var d=a[v],w=d[0]>>2,u=H[w],k=H[w+1];if((w=sb.b(tb,k,"line",c,ub,!1,T))&&w.length&&(71059!==k||self.isText)&&(0!==e||w[0].borderWidth)&&(d=Q(u+1,d[0],d[0]+d[1]),0!==e||!w[0].i))if(1===e&&w[0].i){var p=w[0].i;u=p;var m=Rb[u]||Rb["MapRes/"+u];if(m){m=[m[0],m[1]];jb()&&(t[t.length]={type:"line",data:[ab(),ib()],has3D:l,has2D:q,styleIds:x,verticesLength:f},lb(),q=l=
!1,f=[],x=[]);/guojietianqiaojieti/.test(p)?g+=20:g++;var h=w[0].o/4,E=n?!0:!1,r=!1;/\b(32|16|8|4)$/.test(u)&&(h*=5,m[1]*=2,r=E=!0,p=p.replace(/\b4$/,"8"));var A=!1,C=!1;for(u=0;u<d.length;u++){var B=d[u],z=B[0]>>2,F=H[z];z=H[z+1];if(wb(z,c)&&(z=Q(F+1,B[0],B[0]+B[1]),B=null,F=new Int32Array(b,z[0][0],z[0][1]>>2),F.length&&!(8E3<F.length))){if(r&&4===F.length){var G=F,R=G[2],V=G[3],K=Math.sqrt(R*R+V*V);K=800*~~(K/800)/K;G[2]=~~(R*K);G[3]=~~(V*K)}if(n){var M=1<cc?new Int16Array(b,z[1][0],z[1][1]>>1):
new Uint16Array(b,z[1][0],z[1][1]>>1);if(1===M.length&&M[0])B=Array(F.length>>1),Wb(B,M[0]),A=!0;else if(1<M.length){B=[];for(A=0;A<M.length;A++)B[A]=M[A]||Zb;A=!0}else C=!0}G=new Int16Array(b,z[2][0],z[2][1]>>1);R=new Int8Array(b,z[3][0],z[3][1]);kb(G,w[0].f,h,B,g,!0,F,R,1);x.push(k);f.push(5*jb())}}jb()&&(t[t.length]={type:"line",textureSize:m,texture:p+".png",lineWidth:w[0].o/2,data:[ab(),ib()],has3D:A,has2D:C,zoomWithMap:E,styleIds:x,verticesLength:f},x=[],f=[],lb())}}else if(0===e?(k=w[0].c,
p=w[0].borderWidth):(k=w[0].f,p=w[0].o),p/=4,!(0===p||0===k[3]||100<p))for(1===e&&g++,u=0;u<d.length;u++)if(B=d[u],z=B[0]>>2,F=H[z],z=H[z+1],wb(z,c)&&(z=Q(F+1,B[0],B[0]+B[1]),F=new Int32Array(b,z[0][0],z[0][1]>>2),F.length&&!(8E3<F.length))){G=new Int16Array(b,z[2][0],z[2][1]>>1);R=new Int8Array(b,z[3][0],z[3][1]);jb()+G.length/2>ac&&(t[t.length]={type:"line",data:[ab(),ib()],has3D:l,has2D:q},q=l=!1,lb());B=null;if(n)if(1<cc?M=new Int16Array(b,z[1][0],z[1][1]>>1):M=new Uint16Array(b,z[1][0],z[1][1]>>
1),1===M.length&&M[0])B=Array(F.length>>1),Wb(B,M[0]),l=!0;else if(1<M.length){B=[];for(l=0;l<M.length;l++)B[l]=M[l]||Zb;l=!0}else q=!0;kb(G,k,p,B,g,1===w[0].G,F,R,0)}}}jb()&&(t[t.length]={type:"line",data:[ab(),ib()],has3D:l,has2D:q,styleIds:x,verticesLength:f},lb());return g}
function ad(b,a,c,t,g){var n=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]),l=[];a=[];for(var q=!1,x=!1,f=0;f<n.length;f++){var e=n[f];e=Q(H[e[0]>>2]+1,e[0],e[0]+e[1])[0];var v=e[0]>>2,d=H[v];if(wb(H[v+1],c)){var w=Q(d+1,e[0],e[0]+e[1]);e=new Int32Array(b,w[0][0],w[0][1]>>2);e=Za(e);d=1<cc?new Int16Array(b,w[3][0],w[3][1]>>1):new Uint16Array(b,w[3][0],w[3][1]>>1);v=void 0;if(1===d.length&&d[0])v=Array(e.length>>1),Wb(v,d[0]),q=!0;else if(1<d.length){v=[];for(var u=0;u<d.length;u++)v[u]=d[u]||1;q=!0}else x=!0;d=new Uint32Array(b,
w[2][0],w[2][1]>>2);u=l.length/8;g+=8;var k=sb.b(tb,d[0],"polygon",c,ub,!1,T),p=sb.b(tb,d[1],"polygon",c,ub,!1,T);if(k&&p){var m=new Int32Array(b,w[1][0],w[1][1]>>2);d=[m[0]/100,m[1]/100];k=k[0].f;m=[m[2]/100,m[3]/100];p=p[0].f;var h=[m[0]-d[0],m[1]-d[1]],E=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)),r=a;w=new Uint16Array(b,w[4][0],w[4][1]>>1);for(var A=0;A<w.length;A++)r[r.length]=w[A]+u;u=0;for(w=e.length/2;u<w;u++){r=[e[2*u],e[2*u+1]];if(0===h[0]){A=d[0];var C=r[1]}else C=-((d[0]-r[0])*h[0]+(d[1]-
r[1])*h[1])/(h[0]*h[0]+h[1]*h[1]),A=C*h[0]+d[0],C=C*h[1]+d[1];C=Math.sqrt(Math.pow(A-m[0],2)+Math.pow(C-m[1],2))/E;if(d[0]<m[0]&&A<d[0]||d[0]>m[0]&&A>d[0])C=1;else if(d[0]<m[0]&&A>m[0]||d[0]>m[0]&&A<m[0])C=0;l.push(r[0],r[1],v?v[u]:0,C*k[0]+(1-C)*p[0],C*k[1]+(1-C)*p[1],C*k[2]+(1-C)*p[2],C*k[3]+(1-C)*p[3],g)}}}}l.length&&(b=gd(l),t.push({type:"fill",data:[b,new Uint16Array(a)],h:b.byteLength/$b,has3D:q,has2D:x}));return g}
function Zc(b,a,c,t,g){var n=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]);if(!n.length)return g;a=[];var l=[];g++;var q=Za(new Int32Array(b,n[0][0],n[0][1]>>2)),x=new Int32Array(b,n[1][0],n[1][1]>>2);b=new Int16Array(b,n[2][0],n[2][1]>>1);var f=n=!1;1===b.length&&0===b[0]?f=!0:n=!0;b=Za(b,1);if(1===b.length){var e=b[0];b=Array(q.length>>1);Wb(b,e)}for(e=0;e<x.length;e++)if(wb(x[e],c)){var v=[q[4*e],q[4*e+1],b[2*e]],d=[q[4*e+2],q[4*e+3],b[2*e+1]],w=[(v[0]+d[0])/2,(v[1]+d[1])/2,(v[2]+d[2])/2],u=w[0]-v[0],k=w[1]-
v[1],p=[d[0]-v[0],d[1]-v[1]],m=p[0]*p[0]+p[1]*p[1];0<m&&(m=1/Math.sqrt(m),p[0]*=m,p[1]*=m);m=a.length/10;a[a.length]=w[0];a[a.length]=w[1];a[a.length]=v[2];a[a.length]=-u;a[a.length]=-k;a[a.length]=-p[1];a[a.length]=p[0];a[a.length]=.125;a[a.length]=.3125;a[a.length]=g;a[a.length]=w[0];a[a.length]=w[1];a[a.length]=v[2];a[a.length]=-u;a[a.length]=-k;a[a.length]=p[1];a[a.length]=-p[0];a[a.length]=.125;a[a.length]=.6875;a[a.length]=g;a[a.length]=w[0];a[a.length]=w[1];a[a.length]=d[2];a[a.length]=u;a[a.length]=
k;a[a.length]=-p[1];a[a.length]=p[0];a[a.length]=1;a[a.length]=.3125;a[a.length]=g;a[a.length]=w[0];a[a.length]=w[1];a[a.length]=d[2];a[a.length]=u;a[a.length]=k;a[a.length]=p[1];a[a.length]=-p[0];a[a.length]=1;a[a.length]=.6875;a[a.length]=g;l[l.length]=m;l[l.length]=m+1;l[l.length]=m+2;l[l.length]=m+2;l[l.length]=m+1;l[l.length]=m+3}l.length&&t.push({type:"arrow",data:[new Float32Array(a),new Uint16Array(l)],has3D:n,has2D:f});return g}
function $c(b,a,c,t,g){a=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]);g++;for(var n=0;n<a.length;n++){var l=a[n],q=l[0]>>2,x=H[q];if((q=sb.b(tb,H[q+1],"line",c,ub,!1,T))&&q.length){var f=q[0];if("undefined"!==typeof f.i){f=f.i+".png";l=Q(x+1,l[0],l[0]+l[1]);for(x=0;x<l.length;x++){var e=l[x],v=e[0]>>2,d=H[v];wb(H[v+1],c)&&(v=H[v+2]/20,e=Q(d+1,e[0],e[0]+e[1]),kb(new Int16Array(b,e[2][0],e[2][1]>>1),q[0].f,v,null,g,!0,new Int32Array(b,e[0][0],e[0][1]>>2),new Int8Array(b,e[3][0],e[3][1]),2))}t[t.length]={type:"line",
texture:f,isSingle:!0,data:[ab(),ib()]};lb()}}}return g}
function Ub(b,a,c,t){var g=c.useZoom;if(!a||!a.length)return null;c=[];for(var n=[],l=0;l<a.length;l++){var q=a[l],x=q[0]>>2,f=H[x];if(8===H[x+1])for(q=Q(f+1,q[0],q[0]+q[1]),x=0;x<q.length;x++){var e=q[x];f=e[0]>>2;var v=H[f];f=H[f+1];var d=sb.b(tb,f,"polygon3d",g,t?Vb:ub,!1,T);if(d&&d[0]){d=d[0];var w=d.H,u=d.m;if(T){if(T.buildingFill){var k=void 0,p=u[0]/255,m=u[1]/255;u=u[2]/255;var h=Math.max(p,m,u),E=h-Math.min(p,m,u);for(0===E?k=0:h===p?k=(m-u)/E%6*60:h===m?k=60*((u-p)/E+2):h===u&&(k=60*((p-
m)/E+4));0>k;)k+=360;var r=[k,0===h?0:E/h,h];r[2]+=.05;0>r[2]&&(r[2]=0);p=k=u=void 0;m=r[2]*r[1];h=m*(1-Math.abs(r[0]/60%2-1));E=r[2]-m;r=r[0];0<=r&&60>r?(p=m,k=h,u=0):60<=r&&120>r?(p=h,k=m,u=0):120<=r&&180>r?(p=0,k=m,u=h):180<=r&&240>r?(p=0,k=h,u=m):240<=r&&300>r?(p=h,k=0,u=m):300<=r&&360>r&&(p=m,k=0,u=h);u=[Math.round(255<255*(p+E)?255:255*(p+E)),Math.round(255<255*(k+E)?255:255*(k+E)),Math.round(255<255*(u+E)?255:255*(u+E))];u[3]=w[3]||255}hc||(hc=w,xc=u)}e=Q(v+1,e[0],e[0]+e[1]);v=0;if(d.borderWidth){var A=
d.c[0],C=d.c[1],B=d.c[2],z=d.c[3];v=d.borderWidth/4}for(k=0;k<e.length;k++)if(p=e[k],m=p[0]>>2,h=H[m],wb(H[m+1],g)&&(m=H[m+2],!(m<d.filter))){h=Q(h+1,p[0],p[0]+p[1]);p=new Int32Array(b,h[0][0],h[0][1]>>2);r=new Uint16Array(b,h[1][0],h[1][1]>>1);E=p;var F=m,G=w[0],R=w[1],V=w[2],K=w[3],M=u[0],W=u[1],Y=u[2],X=u[3],O=E;Ma||(Ma=y._get_block_points_address()>>2);Aa.set(O,Ma);O=r;Va||(Va=y._get_block_triangle_indices_address()>>1);Ca.set(O,Va);y._append_block_data(E.length,r.length,F,G,R,V,K,M,W,Y,X);c.push(f);
n.push(7*$a());if(d.borderWidth&&p.length&&(E=Array(p.length>>1),Wb(E,100*m),h[2]))for(m=Q(0,h[2][0],h[2][0]+h[2][1]),h=0;h<m.length;h++)r=m[h],G=Q(0,r[0],r[0]+r[1]),r=new Int16Array(b,G[0][0],G[0][1]>>1),F=new Uint16Array(b,G[1][0],G[1][1]>>1),G=new Int8Array(b,G[2][0],G[2][1]),kb(r,[A,C,B,z],v,E,2,!0,p,G,0,F[0],F[1])}}}}b={type:"line",data:[ab(),ib()]};lb();return 0<$a()?(Xa||(Xa=y._get_block_vertex_start()),a=new Float32Array(ra.slice(Xa,y._get_block_vertex_end())),Wa||(Wa=y._get_block_index_start()),
t=new Uint16Array(ra.slice(Wa,y._get_block_index_end())),c={vertex:a,index:t,styleIds:c,verticesLength:n},y._reset_block(),c.border=b,c):null}function gd(b){var a=new ArrayBuffer(b.length/8*20),c=new Float32Array(a);a=new Uint8Array(a);for(var t=0,g=12,n=4,l=0;l<b.length;l+=8)c[t]=b[l],c[t+1]=b[l+1],c[t+2]=b[l+2]/100,a[g]=b[l+3],a[g+1]=b[l+4],a[g+2]=b[l+5],a[g+3]=b[l+6],c[n]=b[l+7],t+=5,g+=20,n+=5;return c}
function cd(b,a,c,t,g){if(!a||!a.length)return 0;c=c.useZoom;for(var n=0,l=0,q=0,x=0,f=0;f<a.length;f++){var e=a[f],v=e[0]>>2;if(25===H[v+1]){e=Q(H[v]+1,e[0],e[0]+e[1])[0];var d=e[0]>>2;v=H[d];if((d=sb.b(tb,H[d+1],"polygon3d",c,ub,!1,T))&&d[0]){d=d[0];var w=d.m;xc&&(w=xc);e=Q(v+1,e[0],e[0]+e[1])[0];v=Q(H[e[0]>>2]+1,e[0],e[0]+e[1]);e=new Int32Array(b,v[1][0],v[1][1]>>2);n+=e.length;if(t){d=new Int32Array(b,v[2][0],v[2][1]>>2);v=e;for(var u=t,k=x,p=new DataView(u.buffer),m,h=0;h<v.length;h+=3)m=h/3*
7+k,u[m]=v[h]/100,u[m+1]=v[h+1]/100,u[m+2]=v[h+2]/100,u[m+3]=d[h],u[m+4]=d[h+1],u[m+5]=d[h+2],p.setUint8(4*m+24,w[0]),p.setUint8(4*m+25,w[1]),p.setUint8(4*m+26,w[2]),p.setUint8(4*m+27,w[3]);v=[];for(d=0;d<e.length/3;d++)v.push(d+l);g.set(v,q);x+=e.length/3*7;q+=v.length;l+=e.length/3}}}}return n}
function bd(b,a){var c=[],t=[];a=a.useZoom;for(var g=0;g<b.length;g++){var n=b[g],l=n[0]>>2;if(24===H[l+1]){l=Q(H[l]+1,n[0],n[0]+n[1])[0];n=l[0]>>2;var q=H[n];if((n=sb.b(tb,H[n+1],"polygon3d",a,ub,!1,T))&&n[0])for(n=n[0],n=n.m,xc&&(n=xc),l=Q(q+1,l[0],l[0]+l[1]),q=0;q<l.length;q++){var x=l[q][0]/4,f=c,e=t,v=c.length/10,d=H[x+1]/100,w=H[x+2]/100,u=H[x+3]/100,k=H[x+4]/100,p=n[0],m=n[1],h=n[2];for(x=0;360>=x;x+=36){var E=Math.cos(x*Math.PI/180)*w+u,r=Math.sin(x*Math.PI/180)*w+k,A=E+u,C=r+k;f.push(E,r,
0,A,C,0,p,m,h,255);f.push(E,r,d,A,C,0,p,m,h,255)}for(x=0;10>x;x++)f=2*x+v,e.push(f,f+2,f+3),e.push(f,f+3,f+1)}}}if(0<c.length){b=c.length/10;a=new Float32Array(7*b);g=new DataView(a.buffer);for(l=0;l<b;l++)n=7*l,a[n]=c[10*l],a[n+1]=c[10*l+1],a[n+2]=c[10*l+2],a[n+3]=c[10*l+3],a[n+4]=c[10*l+4],a[n+5]=c[10*l+5],g.setUint8(4*n+24,c[10*l+6]),g.setUint8(4*n+25,c[10*l+7]),g.setUint8(4*n+26,c[10*l+8]),g.setUint8(4*n+27,c[10*l+9]);c={vertex:a,index:new Uint16Array(t)}}else c=null;return c};
