/**/﻿_jsload&&_jsload('scommon', 'var f7=1,eh=2,aH=3,cP=new h8(21,33),b7=new h8(10,33),gI=new h8(22,36),c3=new h8(11,36),cX=new h8(25,40),cz=new h8(12,20),dA=new h8(9,0),h1=new h8(300,300);e6.addSearchPoi=function(i,jj,jh,ji){var jk=a1(jj);if(!jk){return}if(jh<0||jh>9){return}var jf=null;var jg=new r(jk);var e=w.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(fD()>1){function je(){return new iy(e,cP,{imageSize:h1,anchor:b7,imageOffset:new h8(21*jh,0),infoWindowOffset:dA})}jf=je();var T=je();T.setImageOffset(new h8(21*jh,66));jg.icoDefault=jf;jg.icoActive=T}else{jf=new iy(e,cP,{imageSize:h1,anchor:b7,imageOffset:new h8(21*jh,0),infoWindowOffset:dA})}jg.setIcon(jf);i.addOverlay(jg);if(ji){jg.setTitle(ji)}return jg};e6.addCenterPoi=function(jf,e,jg){var je=a1(e);if(!je){return}var i=new r(je);var jh=null;if(bK()){function T(){return new iy(w.imgPath+"markers_hd.png",new h8(21,31),{anchor:b7,imageOffset:new h8(-29,-320),imageSize:new h8(85,477),infoWindowAnchor:dA})}jh=T();i.icoDefault=jh}else{jh=new iy(w.imgPath+"markers.png",cP,{anchor:b7,imageOffset:new h8(0,-250),infoWindowAnchor:dA})}i.setIcon(jh);jf.addOverlay(i);if(jg){i.setTitle(jg)}return i};e6.addSearchInBoundsPoi=function(i,ji,jh){var jj=a1(ji);if(!jj){return}var jg=new r(jj);var jf=null;var e=w.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(fD()>1){function je(){return new iy(e,gI,{imageSize:h1,anchor:c3,imageOffset:new h8(200,188),infoWindowOffset:dA})}jf=je();var T=je();T.setImageOffset(new h8(200,224));jg.icoDefault=jf;jg.icoActive=T}else{jf=new iy(e,gI,{imageSize:h1,anchor:c3,imageOffset:new h8(200,188),infoWindowOffset:dA})}jg.setIcon(jf);i.addOverlay(jg);if(jh){jg.setTitle(jh)}return jg};function a1(e){var T=[];var i=null;if(e instanceof cf||e instanceof b9){i=e}else{if(typeof e=="string"){T=ev.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(ev.trim(T[0]));T[1]=parseFloat(ev.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new cf(T[0],T[1])}return i}e6.createSearchInfoWnd=function(T,e){var jn=T.title;var jl=T.addr;var jg=T.tel;var jj=T.uid||"";var i=T.url;var jm=T.detailUrl;var jk=T.poiType||BMAP_POI_TYPE_NORMAL;e=e||{};if(!jn){return null}var ji=jn;if(jk==BMAP_POI_TYPE_BUSSTOP){ji=ji+"-公交车站"}else{if(jk==BMAP_POI_TYPE_SUBSTOP){ji=ji+"-地铁站"}}var jh=13;if(jm){jh=10}if(ji.replace(/[\\u0100-\\uffff]/g,"##").length>jh*2+1){ji=ji.substring(0,jh)+"&#8230"}var jf=\'<p style="margin-left:5px;display:inline;height:30px;line-height:30px;width:210px;font:bold 14px/16px \'+w.fontFamily+\';white-space:nowrap;overflow:hidden" title="\'+jn+\'">\'+ji;if(jm){jf+=\'<a target="_blank" href="\'+jm+\'" style="margin-left:5px;font-size:12px;color:#3d6dcc;font-weight:normal;text-decoration:none;">详情»</a>\'}jf+="</p>";var jp=[];jp.push(\'<div style="font: 12px \'+w.fontFamily+\'; margin: 5px">\');if(jl){var jo="地址：";if(jk==BMAP_POI_TYPE_BUSSTOP||jk==BMAP_POI_TYPE_SUBSTOP){jo="车次："}jp.push(\'<table cellspacing="0" style="overflow: hidden; table-layout: fixed; width: 100 %; font: 12px \'+w.fontFamily+\'" >\');jp.push(\'<tr><td style="vertical-align: top; width: 38px; white-space: nowrap; word-break: keep-all">\'+jo+"&nbsp;</td><td>");jp.push(jl+"&nbsp;</td></tr>");if(jg){jp.push(\'<tr><td style="vertical-align: top; ">电话：</td><td>\'+jg+"</td></tr>")}jp.push("</table>")}else{if(jg){jp.push(\'<table cellspacing="0" style="table-layout: fixed; width: 100 %; font: 12px \'+w.fontFamily+\'">\');jp.push(\'<tr><td style="vertical-align: top; width: 36px; white-space: nowrap; word-break: keep-all">电话：</td><td>\'+jg+"</td></tr></table>")}}jp.push("</div>");var je=new dC(jp.join(""),{title:jf,height:0,width:250,margin:[10,10,20,10]});return je};e6.addDestPoi=function(jh,e,ji,T){var je=w.staticHost+"/wolfman/static/common/images/";je+="markers_new2x_2960fb4.png";var jg=a1(e);if(!jg){return}var jf=new iy(je,cX,{imageSize:h1,anchor:cz,imageOffset:new h8(200+T*25,139),infoWindowOffset:dA});var i=new r(jg,{icon:jf,baseZIndex:3500000,draggingCursor:"pointer"});jh.addOverlay(i);if(ji){i.setTitle(ji)}return i};e6.addLine=function(i,e){return e6.addRoute(i,e,gU)};e6.ROUTE_TRAFFIC_STYLE_CONFIG=[{stroke:6,color:"#0030ff",opacity:0.45,style:"solid"},{stroke:5,color:"#00bd00",opacity:0.95,style:"solid"},{stroke:5,color:"#ffac00",opacity:0.95,style:"solid"},{stroke:5,color:"#f41c0d",opacity:0.95,style:"solid"}];e6.ROUTE_STYLE_CONFIG=[{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#4ddc26",opacity:1,style:"solid"},{stroke:6,color:"#00bd01",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"},{stroke:6,color:"#ff0103",opacity:0.65,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"}];e6.addRouteWithTraffic=function(jg,je,jh){var T=e6.ROUTE_TRAFFIC_STYLE_CONFIG;if(typeof jh=="undefined"){jh=0}if(!T[jh]){return}var e=je;var i=T[jh];var jf=new bd(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});jg.addOverlay(jf);jf._trafficStatus=jh;return jf};e6.addRoute=function(ji,jf,je){var T=e6.ROUTE_STYLE_CONFIG;if(typeof je=="undefined"){je=0}if(!T[je]){return}var e=jf;var i=T[je];var jh=new bd(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});ji.addOverlay(jh);jh._routeType=je;if(je==gU){var jg=new bd(e,{strokeWeight:i.stroke-2,strokeColor:"#fff",strokeOpacity:0.3,clickable:false});jh._p=jg;ji.addOverlay(jg)}return jh};e6.createTransInfoWnd=function(i){var jg=i.content;var e=i.curIndex;var jh=i.total;var je=i.nextTransCbk;var jf=i.obj;var ji=i.hideStep;var jj=[\'<div style="font: 12px \'+w.fontFamily+\'">\'];if(jg){jj.push(\'<div style="margin: 10px 1em 24px 0">\'+jg+"</div>")}if(!ji){jj.push(e6.genStepNavHtml(jh,e))}jj.push("</div>");var T=new dC(jj.join(""),{title:"",height:0,width:220,margin:[10,10,20,10]});if(ji){return T}T.addEventListener("open",function(){var jk=bK()?"touchend":"click";if(ev.G("trans_prev")){ev.on(ev.G("trans_prev"),jk,function(){if(je&&typeof je=="function"){je(e-1,jf)}})}if(ev.G("trans_next")){ev.on(ev.G("trans_next"),jk,function(){if(je&&typeof je=="function"){je(e+1,jf)}})}});return T};e6.genStepNavHtml=function(T,e){var i=[];i.push(\'<table id="trans_nav" width="99% " cols="2" style="background: #eaf2ff; font: 12px \'+w.fontFamily+\'"><tbody><tr>\');i.push(\'<td nowrap="nowrap" width="50% " align="left">\');if(e==0){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none: >上一步</span>\')}else{i.push(\'<a id="trans_prev" style="color: #7777cc; -moz-user-select: none" href="javascript: void (0)">上一步</a>\')}i.push("</td>");i.push(\'<td nowrap="nowrap" width="50% " align="right">\');if(e==T+1){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none" >下一步</span>\')}else{i.push(\'<a style="color: #7777cc" id="trans_next" href="javascript: void (0)">下一步</a>\')}i.push("</td></tr></tbody></table>");return i.join("")};e6.addTransPoi=function(i,ji,jg,jh){var jj=a1(ji);if(!jj){return}jg=jg||BMAP_LINE_TYPE_BUS;var e=w.staticHost+"/wolfman/static/common/images/new/";e+="transit-exchange-2x_46d5be3.png";var T=54;switch(jg){case BMAP_LINE_TYPE_SUBWAY:T=75;break;case BMAP_LINE_TYPE_TRAIN:T=117;break;case BMAP_LINE_TYPE_AIRPLANE:T=138;break;case BMAP_LINE_TYPE_COACH:case BMAP_LINE_TYPE_BUS:default:T=54;break}var jf=new iy(e,new h8(22,22),{imageSize:new h8(22,181),infoWindowAnchor:new h8(10,0),imageOffset:new h8(0,T)});var je=new r(jj,{icon:jf});i.addOverlay(je);if(jh){je.setTitle(jh)}return je};e6.getInfoWindowDom=function(e){if(e&&e.infoWindowDoms&&e.infoWindowDoms.contentDiv){return e.infoWindowDoms.contentDiv.childNodes[0]}return null};e6.addStationPoi=function(T,e,je){var i=new r(e,{icon:new iy(d6._stopUrl,new h8(11,11))});if(je){i.setTitle(je)}T.addOverlay(i);return i};e6.createTipLbl=function(i){var e=new a5(i,{offset:new h8(30,-10)});e.setStyle({border:"solid 1px gray",padding:"2px",whiteSpace:"nowrap",background:"#fff"});return e};e6.getDistanceByPixel=function(i,e){if(!i||!e){return}return Math.round(Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)))};e6.addSearchPoi_R=function(jk,ji,jl,e,i){var jn=a1(jk),e=e||{};e.type=e.type||"normal";if(!jn||typeof(ji)=="undefined"||ji<0||(ji>9&&e.type!=="child")||(ji>39&&e.type==="child")){return}var jm;var jj=w.staticHost+"/wolfman/static/common/images/";jj+="markers_new2x_2960fb4.png";var je=0;if(e.type=="RouteAddrMarker"){je=273}var T=new h8(18*ji,je);var jh=new iy(jj,new h8(18,27),{offset:new h8(9,27),imageOffset:T,infoWindowOffset:dA,imageSize:h1,});jm=ji+1;var jf=100;var jg=new r(jn,{icon:jh,zIndexFixed:true,baseZIndex:2500000-jf*ji});jg.customProperty={type:e.type};i.addOverlay(jg);jg._stCode=jm;if(jl){jg.setTitle(jl)}return jg};az.CBK_SEARCH_COMPLETE=1;az.CBK_MARKERS_SET=2;az.CBK_INFO_HTML_SET=3;az.CBK_POLYLINES_SET=4;az.CBK_RESULTS_HTML_SET=5;az.CBK_BUSLIST_COMPLETE=6;az.CBK_BUSLINE_COMPLETE=7;az.CBK_BUSLISTHTML_SET=8;az.CBK_BUSLINEHTML_SET=9;az._getPoiUrl=function(e,i){if(e){return w.mapHost+"?s="+encodeURIComponent("inf&uid="+e+"&c="+i)+"&i=0&sr=1"}return""};az._getLocType=function(e){if(!e){return fJ}if(typeof e=="string"){return id}if(e instanceof cf||e instanceof b9){return bo}if(e instanceof g0){return a2}if(typeof e=="number"){return dm}return fJ};ev.extend(az.prototype,{_getIdByLoc:function(jf,e){var i=az._getLocType(jf.src);if(i==fJ){return}var T=this;if(i==dm){e&&e(jf.src);return}if(i==id){if(jf.curLocType==i&&jf.curSrc==jf.src&&jf.curId){e&&e(jf.curId);return}jf.curLocType=i;jf.curSrc=jf.src;iZ.request(function(jh){if(jh&&jh.result&&jh.result["type"]==eU){T._loc.curId=jh.content["code"];e&&e(T._loc.curId)}},{qt:cT,wd:jf.src})}else{var je;var jg=18;if(i==a2){if(jf.src.isLoaded()){je=jf.src.getCenter();jg=jf.src.getZoom()}else{jf.src.addEventListener("load",function(){T._getIdByLoc(jf,e)})}}else{je=jf.src}if(i==jf.curLocType&&jf.curSrc.equals(je)&&jf.curId){e&&e(jf.curId);return}if(i==a2){je=ig.convertLL2MC(je)}if(i==bo){je=ig.convertLL2MC(je)}jf.curLocType=i;jf.curSrc=new cf(je.lng,je.lat);iZ.request(function(jh){if(jh&&jh.result&&jh.result["type"]==a6){T._loc.curId=jh.content?jh.content["uid"]:1;e&&e(T._loc.curId)}},{qt:U,b:je.lng+","+je.lat+";"+je.lng+","+je.lat,l:jg})}},_setStatus:function(e){if(typeof e=="number"){this._status=e}else{delete this._status}},_triggerCbk:function(i,e,je){var T;if(typeof e==="undefined"){T=4}else{if(e._plans&&e._plans.length){T=1}else{if(Object.prototype.toString.call(e._start)==="[object Object]"&&Object.prototype.toString.call(e._end)==="[object Object]"){T=3}else{T=2}}}var jf;switch(i){case az.CBK_SEARCH_COMPLETE:jf=this._opts.onSearchComplete;jf&&jf(e,T);break;case az.CBK_MARKERS_SET:jf=this._opts.onMarkersSet;jf&&jf(e,je);break;case az.CBK_POLYLINES_SET:jf=this._opts.onPolylinesSet;jf&&jf(e,je);break;case az.CBK_INFO_HTML_SET:jf=this._opts.onInfoHtmlSet;jf&&jf(e,je);break;case az.CBK_RESULTS_HTML_SET:jf=this._opts.onResultsHtmlSet;jf&&jf(e,je);break;case az.CBK_BUSLIST_COMPLETE:jf=this._opts.onGetBusListComplete;jf&&jf(e,je);break;case az.CBK_BUSLINE_COMPLETE:jf=this._opts.onGetBusLineComplete;jf&&jf(e,je);break;case az.CBK_BUSLISTHTML_SET:jf=this._opts.onBusListHtmlSet;jf&&jf(e,je);break;case az.CBK_BUSLINEHTML_SET:jf=this._opts.onBusLineHtmlSet;jf&&jf(e,je);break;default:break}}});var dg=0;var cS=1;var N=2;by.unique=function(T){var jg=false;var jf=[];var jh={};for(var je=0,e=T.length;je<e;je++){if(!jh[T[je]]){jh[T[je]]=true;jf.push(T[je])}}return jf};by.getBestLevel=function(T,i){if(i){var e=Math.min(i.width/1100,i.height/660);T=Math.round(T+(Math.log(e)/Math.log(2)))}if(T<1){T=1}if(T>21){T=21}return T};by.parseGeo=function(jh,jk){if(typeof jh!="string"||!jh){return}var jm=jh.split("|");var e;var jf;var T;if(jm.length==1){e=bO(jh)}else{e=bO(jm[2]);jf=bO(jm[0]);T=bO(jm[1]);if(!jk){return e}}var ji={type:e.geoType};if(jk){switch(ji.type){case N:var jj=new cf(e.geo[0][0],e.geo[0][1]);var jl=ig.convertMC2LL(jj);ji.point=jl;ji.points=[jl];break;case cS:ji.points=[];var jn=e.geo[0];for(var jg=0,je=jn.length-1;jg<je;jg+=2){var jo=new cf(jn[jg],jn[jg+1]);jo=ig.convertMC2LL(jo);ji.points.push(jo)}jf=new cf(jf.geo[0][0],jf.geo[0][1]);T=new cf(T.geo[0][0],T.geo[0][1]);jf=ig.convertMC2LL(jf);T=ig.convertMC2LL(T);ji.bounds=new hf(jf,T);break;default:break}}return ji};by.parseGeoExt=function(jx,jo){if(!jo){jo=0}else{if(jo<0.25){jo=0}else{if(jo>0.25&&jo<1){jo=1}else{if(jo>32){jo=32}}}}var jj=jx.split("|");if(jj.length==1){var je=bO(jj[0]);return{type:je.type,bound:"",points:je.geo.join(",")}}else{if(jj.length>1){var jp=jx.split(";.=");var jl=[];var jf=[];var jq=0;var ju=jp.length;for(var jr=0;jr<ju;jr++){var jw=jp[jr];if(ju>1){if(jr==0){jw=jw+";"}if(jr>0&&jr<ju-1){jw=".="+jw+";"}if(jr==ju-1){jw=".="+jw}}var jg=jw.split("|");var jt=bO(jg[0]);var js=bO(jg[1]);jl.push(jt.geo.join(","));jl.push(js.geo.join(","));var je=bO(jg[2]);jq=je.type;var jv=je.geo.join(",");jv=by.parseGeoExtReg1(jv);if(jo>0){jv=by.parseGeoExtReg2(jv,jo)}jf.push(jv)}if(ju<=1){jf=jf.join(";")}if(ju==2){var T=jf[0]+";"+jf[1];var jh=T.split(";");var e=[];for(var jr=0;jr<jh.length;jr++){var jk=jh[jr].split(",")[0];var ji=jh[jr].split(",")[1];var jm=new cf(jk,ji);var jn=ig.convertMC2LL(jm);e.push(jn)}jf=e}return{type:jq,bound:jl.join(";"),points:jf}}}};by.getPoiPoint=function(e){var T=[];var i=null;if(e.toString()=="Point"){i=e}else{if(typeof e=="string"){T=ev.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(ev.trim(T[0]));T[1]=parseFloat(ev.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new BMap.Point(T[0],T[1])}return i};by.parseGeoStr=function(T){var i=T.split(",");var e=new cf(i[0],i[1]);return ig.convertMC2LL(e)};by.level={country:4,province:11,city:12,area:13};var gv=["=",".","-","*"];var cN=1<<23;function bO(jk){var jj=hb(jk.charAt(0));var T=jk.substr(1);var jm=0;var e=T.length;var jn=[];var jh=[];var ji=[];while(jm<e){if(T.charAt(jm)==gv[0]){if((e-jm)<13){return 0}ji=dI(T.substr(jm,13),jn);if(ji<0){return 0}jm+=13}else{if(T.charAt(jm)==";"){jh.push(jn.slice(0));jn.length=0;++jm}else{if((e-jm)<8){return 0}ji=bZ(T.substr(jm,8),jn);if(ji<0){return 0}jm+=8}}}for(var jg=0,je=jh.length;jg<je;jg++){for(var jf=0,jl=jh[jg].length;jf<jl;jf++){jh[jg][jf]/=100}}return{geoType:jj,geo:jh}}function hb(i){var e=-1;if(i==gv[1]){e=N}else{if(i==gv[2]){e=cS}else{if(i==gv[3]){e=dg}}}return e}function dI(jf,T){var e=0;var jh=0;var jg=0;for(var je=0;je<6;je++){jg=c9(jf.substr(1+je,1));if(jg<0){return -1-je}e+=jg<<(6*je);jg=c9(jf.substr(7+je,1));if(jg<0){return -7-je}jh+=jg<<(6*je)}T.push(e);T.push(jh);return 0}function bZ(jg,je){var T=je.length;if(T<2){return -1}var e=0;var ji=0;var jh=0;for(var jf=0;jf<4;jf++){jh=c9(jg.substr(jf,1));if(jh<0){return -1-jf}e+=jh<<(6*jf);jh=c9(jg.substr(4+jf,1));if(jh<0){return -5-jf}ji+=jh<<(6*jf)}if(e>cN){e=cN-e}if(ji>cN){ji=cN-ji}je.push(je[T-2]+e);je.push(je[T-1]+ji);return 0}function c9(i){var e=i.charCodeAt(0);if(i>="A"&&i<="Z"){return e-"A".charCodeAt(0)}else{if(i>="a"&&i<="z"){return(26+e-"a".charCodeAt(0))}else{if(i>="0"&&i<="9"){return(52+e-"0".charCodeAt(0))}else{if(i=="+"){return 62}else{if(i=="/"){return 63}}}}}return -1}by.pathToPoints=function(jg){var je=[];if(typeof jg!=="string"){return je}else{var jf=jg.split(";");for(var T=0;T<jf.length;T++){var e=jf[T].split(",");je.push(new cf(e[0],e[1]))}}return je};');
