/**/ï»¿_jsload&&_jsload('oppcgl', 'function f8(){this._currentState="idle";this._currentTouchCount=0;this._firstPointerId=-1;this._secondPointerId=-1}f8.prototype.takeAction=function(e,i){if(this["_on"+e]){this["_on"+e](i)}return this.getState()};f8.prototype._onmousedown=function(e){if(this._currentTouchCount===0){this._firstPointerId=e}else{if(this._currentTouchCount===1){this._secondPointerId=e}}this._currentTouchCount++;if(this._currentState==="idle"){this._currentState="readyToDrag"}else{if(this._currentState==="dragging"||this._currentState==="readyToDrag"){this._currentState="readyToPinch"}else{if(this._currentState==="pinching"){this._currentState="freeze"}else{this._currentState="freeze"}}}};f8.prototype._onmousemove=function(){if(this._currentState==="readyToDrag"||this._currentState==="dragging"){this._currentState="dragging"}else{if(this._currentState==="readyToPinch"){this._currentState="pinching"}}};f8.prototype._onmouseup=function(e){if(this._currentState==="idle"){return}this._currentTouchCount--;if(this._currentState==="readyToDrag"||this._currentState==="dragging"){this._currentState="idle";this._firstPointerId=-1;this._secondPointerId=-1}else{if(this._currentState==="readyToPinch"||this._currentState==="pinching"){this._clearId(e);this._currentState="freeze"}else{if(this._currentState==="freeze"){if(this._currentTouchCount===0){this._currentState="idle";this._firstPointerId=-1;this._secondPointerId=-1;return}if(this._currentTouchCount===2){if(e!==this._firstPointerId&&e!==this._secondPointerId){this._currentState="pinching"}}if(e===this._firstPointerId||e===this._secondPointerId){this._clearId(e);this._currentState="freeze"}}}}};f8.prototype._ongesturestart=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="idle"||this._currentState==="readyToDrag"){this._currentState="readyToPinch"}};f8.prototype._ongesturechange=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="readyToPinch"){this._currentState="pinching"}};f8.prototype._ongestureend=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="readyToPinch"||this._currentState==="pinching"||this._currentState==="freeze"){this._currentState="idle"}};f8.prototype.getState=function(){return dL[this._currentState]||0};f8.prototype.reset=function(){this._currentState="idle";this._currentTouchCount=0;this._firstPointerId=-1;this._secondPointerId=-1};f8.prototype._clearId=function(e){if(e===this._firstPointerId){this._firstPointerId=-1}else{if(e===this._secondPointerId){this._secondPointerId=-1}}};f8.prototype.setState=function(e){this._currentState=e};bp.register(function(e){if(e._mouse){return}e._mouse=new fO(e);if(!e._mouse._drag){e._mouse=null}if(e._renderType==="webgl"){e.addEventListener("dblclick",function(i){if(!e.config.enableDblclickZoom){return}this.zoomIn(i.point)});e.addEventListener("rightdblclick",function(i){if(!e.config.enableDblclickZoom){return}this.zoomOut(i.point)});e.addEventListener("minuspress",function(i){this.zoomOut()});e.addEventListener("pluspress",function(i){this.zoomIn()})}});function ja(jg,jf){var T={};T.id=jg.pointerId||0;T.clientPos={x:jg.clientX||jg.pageX||0,y:jg.clientY||jg.pageY||0};var ji=0;var je=0;var i=jf.container;while(i&&i.parentNode){ji+=i.scrollLeft;je+=i.scrollTop;if(i.tagName!=="BODY"&&"absolute|fixed".indexOf(b1(i).position)>=0){i=i.offsetParent}else{i=i.parentNode}}T.clientPos.x=jg.clientX+ji;T.clientPos.y=jg.clientY+je;T.offsetPos={x:jg.layerX||jg.offsetX||0,y:jg.layerY||jg.offsetY||0};T.target=jg.target;T.button=jg.button||0;T.ctrlKey=jg.ctrlKey||false;T.metaKey=jg.metaKey||false;var jh=ac(T,jf);ev.extend(T,jh);T.offsetPosMap=new eO(jh.x,jh.y);T.timeStamp=jg.timeStamp;T.domEvent=jg;if(jg.type&&jg.type.indexOf("wheel")>-1){T.wheelDelta=jg.wheelDelta;T.detail=jg.detail;T.deltaX=jg.deltaX;T.deltaY=jg.deltaY;T.deltaMode=jg.deltaMode}T.offsetX=T.offsetPosMap.x;T.offsetY=T.offsetPosMap.y;T.layerX=jg.layerX;T.layerY=jg.layerY;return T}function ac(je,T){var jg=je.target;var jp=je.clientPos.x;var jo=je.clientPos.y;var jj=null;var ji=null;if(jg.nodeType!==1){jg=jg.parentNode}var jh=T.getContainer();var jf=jh;while(jf){jp-=jf.offsetLeft+jf.clientLeft||0;jo-=jf.offsetTop+jf.clientTop||0;if(jf.tagName==="BODY"){var jm=b1(jf);if("relative|absolute|fixed".indexOf(jm.position)>=0){jp-=(parseFloat(jm.left)||0)+parseFloat(jm.marginLeft);jo-=(parseFloat(jm.top)||0)+parseFloat(jm.marginTop)}jp+=jf.clientLeft||0;jo+=jf.clientTop||0;var jl=b1(jf.parentNode);if("absolute|fixed".indexOf(jm.position)>=0&&"relative|absolute|fixed".indexOf(jl.position)===-1){jf=null}else{jf=jf.parentNode}}else{if(jf.tagName==="HTML"){var jn=b1(jf);if("relative".indexOf(jn.position)>=0){jp-=(parseFloat(jn.left)||0);jo-=(parseFloat(jn.top)||0)}jf=jf.offsetParent}else{jf=jf.offsetParent}}}var i=T.getPanes();var e=null;while(jg&&jg!==jh){if(jg.hashCode){if(ev.instance(jg.hashCode) instanceof d9){jj=ev.instance(jg.hashCode)}if(ev.instance(jg.hashCode) instanceof dC||ev.instance(jg.hashCode) instanceof hi){ji=ev.instance(jg.hashCode)}}var jq=jg.parentNode;if(jq===i.floatPane||jq===i.markerMouseTarget||jq===i.floatShadow||jq===i.labelPane||jq===i.markerPane||jq===i.mapPane){e=jg}jg=jq}var jk=null;if(e&&!jj&&!ji){jk=e}return{x:jp,y:jo,overlay:jj,infoWindow:ji,customOverlayDom:jk,pixel:new eO(jp,jo),point:T.pixelToPointIn(new eO(jp,jo)),latlng:T.pixelToPoint(new eO(jp,jo))}}function gx(jf,je){var jg=jf.changedTouches[0];var i=jf.changedTouches.length;var T={target:jf.target,timeStamp:jf.timeStamp,ctrlKey:jf.ctrlKey||false,webkitForce:jf.webkitForce,metaKey:jf.metaKey||false,touchesCount:jf.touches.length,targetTouchesCount:jf.targetTouches.length};if(jf.changedTouches){T.changedTouchesCount=jf.changedTouches.length}else{T.changedTouchesCount=1}h5(jg,T,je);if(i>1){T.secondTouchInfo={};ev.extend(T.secondTouchInfo,T);h5(jf.changedTouches[1],T.secondTouchInfo,je)}return T}function h5(jg,jh,e){if(!jg){return}var jj=jg.clientX;var ji=jg.clientY;jh.id=jg.identifier||0;jh.clientPos={x:jj,y:ji};var je=0;var T=0;var i=e.container;while(i.offsetParent){je+=i.offsetLeft;T+=i.offsetTop;i=i.offsetParent}jh.offsetPos={x:jj-je,y:ji-T};jh.button=0;jh.offsetPosMap=new eO(jh.offsetPos.x,jh.offsetPos.y);var jf=ac(jh,e);ev.extend(jh,jf)}function bw(ji,jh){var i=ji.clientX;var jj=ji.clientY;if(typeof window.scrollY==="number"){jj+=window.scrollY}var jg={};jg.id=0;jg.clientPos={x:i,y:jj};jg.target=ji.target;var je=0;var T=0;var jf=jh.container;while(jf.offsetParent){je+=jf.offsetLeft;T+=jf.offsetTop;jf=jf.offsetParent}jg.offsetPos={x:i-je,y:jj-T};jg.timeStamp=ji.timeStamp;jg.offsetPosMap=new eO(jg.offsetPos.x,jg.offsetPos.y);jg.scale=ji.scale;jg.rotation=ji.rotation;return jg}function fO(e){this._map=e;if(e._renderType==="webgl"){this._drag=new gs(e)}else{if(typeof hX==="undefined"){return}this._drag=new hX(e)}this._earthDrag=null;this._earthWheel=null;this._dragStarted=false;this._touchStarted=false;this._waitForSecondTouch=false;this._firstTouchInfo={};this._secondTouchInfo={};this._currentTouchCount=0;this._prevGestureScale=1;this._useGesture=!!((bK()&&window.GestureEvent)||(!window.TouchEvent&&window.GestureEvent));this._opButton=-1;this._rotationFix=0;this._pinchRotationThreshold=20;this._pinchZoomThreshold=0.2;this._gestureStatus={zoom:false,rotate:false,tilt:false,dragZoom:false};this._diffX=0;this._diffY=0;this._enableRightDrag=true;if(typeof navigator.userAgent==="string"&&navigator.userAgent.indexOf("QQBrowser")>0){this._enableRightDrag=false}this._lastWheelTime=new Date();this._isModernBrowser=e.config.isModernBrowser;if(e.getRenderType()==="webgl"){e.deepZoom=new bP(e)}else{if(this._isModernBrowser){e.deepZoom=new ax(e)}}this._stateMachine=new f8();this._init();this._bind();if(this._useGesture){this._bindGesture()}this._bindRightButton();this._bindMouseWheel();this._operationVelocity=0;this._lastDiffDistance=0;this._zoomVelocity=0;this._lastDiffZoom=0;this._rotationVelocity=0;this._initRotation=0;this._trackVelocityTimer=null;this._trackTimeStamp=0;this._lastDragPoint={x:0,y:0};this._penultimateDragPoint={x:0,y:0};this._touchInMap=false}fO.prototype._init=function(){this._supportPointerEvent=(window.PointerEvent||window.MSPointerEvent)&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);var e={mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"};if(this._supportPointerEvent){if(window.PointerEvent){e.mousedown="pointerdown";e.mousemove="pointermove";e.mouseup="pointerup"}else{if(window.MSPointerEvent){e.mousedown="MSPointerDown";e.mousemove="MSPointerMove";e.mouseup="MSPointerUp"}}}this._eventMapping=e};fO.prototype._bind=function(){var jf=this._map;var T=jf.temp;var i=this._eventMapping;var je=this;var e=jf.platform;ev.on(e,i.mousedown,function(jh){if(bK()){return}je._mousedown=true;var jg=ja(jh,jf);je._mouseButton=jh.button;jf.dispatchEvent(ev.extend(new fa("onmousedown"),jg));je._processMouseDown(jg)});ev.on(e,"touchstart",function(jh){if(je._mousedown===true){return}je._touchStarted=true;var jg=gx(jh,jf);je._processMouseDown(jg);je._touchInMap=true;if(!jg.customOverlayDom){jh.preventDefault()}});ev.on(document,"keydown",function(jg){if(!je._touchStarted&&jf.currentOperation===dL.dragging){if(jg.metaKey||jg.ctrlKey||jg.altKey){je._mousedown=false;je._processMouseUp(ja(jg,jf))}}});ev.on(document,i.mousemove,function(jh){if(je._touchStarted){return}var jg=ja(jh,jf);jg.button=je._mouseButton;if(jf.currentOperation===dL.idle){jf.dispatchEvent(ev.extend(new fa("onmousemove"),jg))}je._processMouseMove(jg)});ev.on(document,"touchmove",function(jg){if(!je._touchInMap){return}je._processMouseMove(gx(jg,jf));jg.preventDefault});ev.on(document,i.mouseup,function(jg){if(je._touchStarted){return}je._mousedown=false;je._processMouseUp(ja(jg,jf))});ev.on(document,"touchend",function(jk){if(!je._touchInMap){return}if(!je._firstTouchInfo||!je._firstTouchInfo.offsetPos){je._processMouseUp(ja(jk,jf));return}if(jk.targetTouches.length===0){var ji=Math.abs(je._diffX)>5||Math.abs(je._diffY)>5;je._touchStarted=false;if(!je._twoFingerTouched&&!ji){var jg=new fa("onclick");ev.extend(jg,je._firstTouchInfo);jg.icon=jf.getIconByClickPosition(je._firstTouchInfo.offsetPos);jf.dispatchEvent(jg);if(je._waitForSecondTouch===false){je._waitForSecondTouch=true;je._firstTouchPos={x:je._firstTouchInfo.offsetPos.x,y:je._firstTouchInfo.offsetPos.y};je._doubleTouchTimer=setTimeout(function jh(){je._waitForSecondTouch=false;je._doubleTouchTimer=null},jf.config.clickInterval)}else{if(Math.abs(je._firstTouchInfo.offsetPos.x-je._firstTouchPos.x)<20&&Math.abs(je._firstTouchInfo.offsetPos.y-je._firstTouchPos.y)<20){var jj=new fa("ondblclick");ev.extend(jj,je._firstTouchInfo);jf.dispatchEvent(jj)}je._waitForSecondTouch=false;clearTimeout(je._doubleTouchTimer);je._doubleTouchTimer=null}}je._twoFingerTouched=false;je._touchInMap=false}je._processMouseUp(gx(jk,jf))});ev.on(e,"click",function(jj){if(window.TouchEvent&&bK()){return}if(jf.getLock()===true){return}if(jf.currentOperation===dL.idle){var ji=je._diffX===0&&je._diffY===0;var jh=ja(jj,jf);if(ji){var jg=new fa("onclick");ev.extend(jg,jh);jg.icon=jf.getIconByClickPosition(jg.offsetPosMap);jf.dispatchEvent(jg)}if(!T._clickTimer){T._clickTimer=setTimeout(function(){T._clickTimer=null;if(ji){var jk=new fa("onclickex");ev.extend(jk,jh);jf.dispatchEvent(jk)}},jf.config.clickInterval)}}je._diffX=0;je._diffY=0});jf.container.onselectstart=function(){return false};ev.on(jf.container,"contextmenu",function(jg){jg.cancelBubble=true;b(jg)});ev.on(e,"dblclick",function(jg){if(jf.getLock()===true){return}if(jf.currentOperation===dL.idle){if(ev.Browser.ie){jf.dispatchEvent(ev.extend(new fa("onclick"),ja(jg,jf)))}if(T._clickTimer){clearTimeout(T._clickTimer);T._clickTimer=null}jf.dispatchEvent(ev.extend(new fa("ondblclick"),ja(jg,jf)))}});ev.on(document,"mousedown",function(jh){jh=window.event||jh;var jg=jh.srcElement||jh.target;if(T.canKeyboard){T.canKeyboard=jf.container.contains(jg)}else{T.canKeyboard=e.contains(jg)}});ev.on(e,"webkitmouseforcedown",function(jg){jf.dispatchEvent(ev.extend(new fa("onforcedown"),ja(jg,jf)))});ev.on(e,"webkitmouseforceup",function(jg){jf.dispatchEvent(ev.extend(new fa("onforceup"),ja(jg,jf)))})};fO.prototype._bindGesture=function(){var e=this;var i=this._map;ev.on(i.platform,"gesturestart",function(je){i.currentOperation=e._stateMachine.takeAction("gesturestart");var T=bw(je,i);e._gestureStartTime=T.timeStamp;if(T.rotation<-160){e._rotationFix=180}else{if(T.rotation>160){e._rotationFix=-180}else{e._rotationFix=0}}e._pinchStartPosition=T.offsetPosMap;e._getCurrentDrag().onReadyToPinch(je,{initMiddlePoint:T.offsetPosMap,pinchStartPosition:e._pinchStartPosition,zoomRatio:1});je.preventDefault()});ev.on(document,"gesturechange",function(jg){if(i.currentOperation!==dL.readyToPinch&&i.currentOperation!==dL.pinching){return}i.currentOperation=e._stateMachine.takeAction("gesturechange");if(i.currentOperation!==dL.pinching){return}var jf=bw(jg,i);if(isNaN(jf.scale)){jf.scale=e._prevGestureScale}else{e._prevGestureScale=jf.scale}jf.rotation+=e._rotationFix;var T=jf.offsetPosMap;e._pinchingPosition=T;e._diffX=T.x-e._pinchStartPosition.x;e._diffY=T.y-e._pinchStartPosition.y;var je=e._getPinchParam(jf);if(!je){jg.preventDefault();return}e._getCurrentDrag().onPinching(jg,{pinchStartPosition:e._pinchStartPosition,pinchingPosition:T,pinchingDistance:je.pinchingDistance,zoomRatio:je.zoomRatio,angleDiff:je.rotation,gestureStatus:e._gestureStatus});jg.preventDefault()});ev.on(document,"gestureend",function(jf){if(i.currentOperation!==dL.readyToPinch&&i.currentOperation!==dL.pinching){return}var je=bw(jf,i);if(isNaN(je.scale)){je.scale=e._prevGestureScale}else{e._prevGestureScale=je.scale}var T=e._pinchParam||{};e._getCurrentDrag().onPinchEnd(jf,{pinchStartPosition:e._pinchStartPosition,pinchEndPosition:e._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:e._gestureStatus});e._resetGestureParam();i.currentOperation=e._stateMachine.takeAction("gestureend");jf.preventDefault()})};fO.prototype._getPinchParam=function(je){var jj=je.scale;var jl=je.rotation;var jf=je.offsetPosMap;var ji=jf.x-this._pinchStartPosition.x;var jg=jf.y-this._pinchStartPosition.y;var T={x:ji,y:jg};var jk=je.timeStamp-this._gestureStartTime;if(jk<100){return null}var i=this._gestureStatus;if(!this._gestureDetected){this._gestureDetected=true;if(Math.abs(ji)<10&&Math.abs(jg)>10&&Math.abs(jj-1)<0.1&&jl<10){i.tilt=true}}var jh=0;if(!i.tilt&&!i.rotate){if(Math.abs(jl)>this._pinchRotationThreshold){this._initRotation=jl;if(jl>0){jh=jl-this._pinchRotationThreshold}else{jh=jl+this._pinchRotationThreshold}i.rotate=true}else{jl=0}}if(i.rotate&&this._initRotation){jh+=jl-this._initRotation}var e=jj;if(i.tilt){e=1}this._pinchParam={zoomRatio:e,rotation:jh,pinchingDistance:T};return this._pinchParam};fO.prototype._resetGestureParam=function(){this._initRotation=0;this._gestureStatus.zoom=false;this._gestureStatus.rotate=false;this._gestureStatus.tilt=false;this._gestureStatus.dragZoom=false;this._gestureDetected=false;this._pinchParam=null;this._gestureStartTime=null};fO.prototype._bindRightButton=function(){var i=this._map;var e=this;ev.on(i.container,this._eventMapping.mouseup,function(T){if(i.mapType===BMAP_EARTH_MAP){return}if(i.getLock()===true){return}if(i.currentOperation!==dL.readyToDrag){if(i.currentOperation===dL.dragging&&e._diffX===0&&e._diffY===0){}else{return}}if(T.button===2){e._processRightClick(ja(T,i))}})};fO.prototype._processMouseDown=function(jj){var i=this._map;if(jj.overlay&&jj.overlay instanceof iU&&jj.overlay._config.enableDraggingMap===false&&!bK()){if(i.currentOperation===dL.idle){this._clearStatus();this._firstTouchInfo=jj;this._firstTouchInfo.initX=jj.offsetPosMap.x;this._firstTouchInfo.initY=jj.offsetPosMap.y;return}}if(i.currentOperation!==dL.idle&&jj.button!==this._opButton){return}if(jj.button===2&&this._currentTouchCount===1){return}if(i.getLock()){return}if(this._currentTouchCount===2){return}this._currentTouchCount++;if(this._currentTouchCount===2){this._twoFingerTouched=true}if(this._lastTouchstartTime&&bK()){var jf=jj.timeStamp-this._lastTouchstartTime;if(jf<200){this._gestureStatus.dragZoom=true}}this._lastTouchstartTime=jj.timeStamp;i.currentOperation=this._stateMachine.takeAction("mousedown",jj.id);if(jj.secondTouchInfo){this._currentTouchCount++;i.currentOperation=this._stateMachine.takeAction("mousedown",jj.secondTouchInfo.id)}if(i.currentOperation===dL.readyToDrag){if((ev.Browser.ie&&jj.target.setCapture)||(ev.Browser.firefox&&jj.target.setCapture)){jj.target.setCapture()}var jg=this._firstTouchInfo;ev.extend(jg,jj);jg.initX=jj.offsetPosMap.x;jg.initY=jj.offsetPosMap.y;this._opButton=jj.button;if(jj.button===2&&this._enableRightDrag===false){i.currentOperation=dL.idle;this._stateMachine.reset();return}this._getCurrentDrag().onReadyToDrag(jj)}else{if(i.currentOperation===dL.readyToPinch){if(jj.secondTouchInfo){ev.extend(this._firstTouchInfo,jj);this._firstTouchInfo.initX=jj.offsetPosMap.x;this._firstTouchInfo.initY=jj.offsetPosMap.y;ev.extend(this._secondTouchInfo,jj.secondTouchInfo);this._secondTouchInfo.initX=jj.secondTouchInfo.offsetPosMap.x;this._secondTouchInfo.initY=jj.secondTouchInfo.offsetPosMap.y;this._opButton=jj.button}else{ev.extend(this._secondTouchInfo,jj);this._secondTouchInfo.initX=jj.offsetPosMap.x;this._secondTouchInfo.initY=jj.offsetPosMap.y}if(this._useGesture){return}this._initTouchDistance=b2(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);this._initMiddlePoint=eH(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);var je=this._firstTouchInfo.initX-this._initMiddlePoint.x;var jl=this._initMiddlePoint.y-this._firstTouchInfo.initY;var T=this._secondTouchInfo.initX-this._initMiddlePoint.x;var jk=this._initMiddlePoint.y-this._secondTouchInfo.initY;var jh;if(je-T!==0){var ji=(jk-jl)/(T-je);jh=eG(Math.atan(ji))}else{jh=90}if(jh<0){jh=180+jh}this._initAngle=jh;this._preAngle=jh;this._pinchStartPosition=this._initMiddlePoint;this._getCurrentDrag().onReadyToPinch(jj,{initMiddlePoint:this._initMiddlePoint,pinchStartPosition:this._pinchStartPosition,zoomRatio:1})}}};fO.prototype._processMouseMove=function(jg){var i=this._map;if(i.currentOperation===dL.idle){return}if(jg.id===this._firstTouchInfo.id){ev.extend(this._firstTouchInfo,jg)}else{if(jg.id===this._secondTouchInfo.id){ev.extend(this._secondTouchInfo,jg)}}if(jg.secondTouchInfo){if(jg.secondTouchInfo.id===this._firstTouchInfo.id){ev.extend(this._firstTouchInfo,jg.secondTouchInfo)}else{if(jg.secondTouchInfo.id===this._secondTouchInfo.id){ev.extend(this._secondTouchInfo,jg.secondTouchInfo)}}}i.currentOperation=this._stateMachine.takeAction("mousemove",jg.id);if(i.currentOperation===dL.pinching){if(this._useGesture){return}if(!this._gestureStartTime){this._gestureStartTime=jg.timeStamp}var jk=b2(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);var jj=eH(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);this._pinchingPosition=jj;this._diffX=jj.x-this._initMiddlePoint.x;this._diffY=jj.y-this._initMiddlePoint.y;var jh={scale:Math.round(jk/this._initTouchDistance*100)/100,rotation:this._calcRotationDiff(jj),offsetPosMap:jj,timeStamp:jg.timeStamp};this._pinchingPosition=jj;var T=this._getPinchParam(jh);if(T){this._zoomRatio=T.zoomRatio;this._getCurrentDrag().onPinching(jg,{initMiddlePoint:this._initMiddlePoint,pinchStartPosition:this._pinchStartPosition,pinchingPosition:jj,pinchingDistance:T.pinchingDistance,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}}else{if(i.currentOperation===dL.dragging){var jf=this._getCurrentDrag();if(this._dragStarted===false){jf.onDragStart&&jf.onDragStart(jg);this._dragStarted=true}if(jg.id===this._firstTouchInfo.id){this._diffX=jg.offsetPosMap.x-this._firstTouchInfo.initX;this._diffY=jg.offsetPosMap.y-this._firstTouchInfo.initY}else{if(jg.secondTouchInfo&&jg.secondTouchInfo.id===this._firstTouchInfo.id){this._diffX=jg.secondTouchInfo.offsetPosMap.x-this._firstTouchInfo.initX;this._diffY=jg.secondTouchInfo.offsetPosMap.y-this._firstTouchInfo.initY}}this._lastDragPoint=jg.pixel;var je;if(this._lastDragPoint.x===this._penultimateDragPoint.x&&this._lastDragPoint.y===this._penultimateDragPoint.y){je={x:this._diffX,y:this._diffY}}else{je={x:this._lastDragPoint.x-this._penultimateDragPoint.x,y:this._lastDragPoint.y-this._penultimateDragPoint.y}}if(!i.config.enableDragging){return}jf.onDragging(jg,{diffX:this._diffX,diffY:this._diffY,velocity:this._operationVelocity,button:this._opButton,dragDistance:{x:this._diffX,y:this._diffY},gestureStatus:this._gestureStatus,dir:je});if(!this._trackVelocityTimer){var ji=this;this._trackTimeStamp=(new Date()).getTime();this._trackVelocityTimer=setInterval(function(){ji._trackVelocity();ji._penultimateDragPoint=ji._lastDragPoint},30)}}}};fO.prototype._calcRotationDiff=function(jj){var i=this._firstTouchInfo.offsetPosMap.x-jj.x;var ji=jj.y-this._firstTouchInfo.offsetPosMap.y;var e=this._secondTouchInfo.offsetPosMap.x-jj.x;var jh=jj.y-this._secondTouchInfo.offsetPosMap.y;var je;if(i-e!==0){var jf=(jh-ji)/(e-i);je=eG(Math.atan(jf))}else{je=90}if(je<0){je=180+je}var T=je;while(this._preAngle-je>100){je=je+180}while(this._preAngle-je<-100){je=je-180}var jg=this._initAngle-je;this._preAngle=je;return jg};fO.prototype._processMouseUp=function(jf){var je=this._map;if(je.currentOperation===dL.idle){return}if(jf.button!==this._opButton){return}this._currentTouchCount--;if(je.currentOperation===dL.readyToDrag||je.currentOperation===dL.dragging){if(this._trackVelocityTimer){clearInterval(this._trackVelocityTimer);this._trackVelocityTimer=null}this._dragStarted=false;var i;if(this._lastDragPoint.x===this._penultimateDragPoint.x&&this._lastDragPoint.y===this._penultimateDragPoint.y){i={x:this._diffX,y:this._diffY}}else{i={x:this._lastDragPoint.x-this._penultimateDragPoint.x,y:this._lastDragPoint.y-this._penultimateDragPoint.y}}this._getCurrentDrag().onDragEnd(jf,{velocity:this._operationVelocity,dragDistance:{x:this._diffX,y:this._diffY},gestureStatus:this._gestureStatus,dir:i});this._clearStatus(jf);this._resetGestureParam();if((ev.Browser.ie&&jf.target.releaseCapture)||(ev.Browser.firefox&&jf.target.releaseCapture)){jf.target.releaseCapture()}this._opButton=-1}else{if(je.currentOperation===dL.pinching){if(!this._useGesture){var T=this._pinchParam;if(T){this._getCurrentDrag().onPinchEnd(jf,{pinchStartPosition:this._pinchStartPosition,pinchEndPosition:this._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}this._resetGestureParam()}this._clearId(jf.id)}else{if(je.currentOperation===dL.freeze){if(this._currentTouchCount===0){this._clearStatus(jf)}else{if(jf.id===this._firstTouchInfo.id||jf.id===this._secondTouchInfo.id){if(!this._useGesture){var T=this._pinchParam;if(T){this._getCurrentDrag().onPinchEnd(jf,{pinchStartPosition:this._pinchStartPosition,pinchEndPosition:this._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}this._resetGestureParam()}this._clearId(jf.id)}}}}}je.currentOperation=this._stateMachine.takeAction("mouseup",jf.id);if(jf.changedTouchesCount===2||jf.targetTouchesCount===0){jf.changedTouchesCount=1;this._processMouseUp(jf)}if(this._currentTouchCount===0&&bK()){this._diffX=this._diffY=0}};fO.prototype._clearId=function(e){if(e===this._firstTouchInfo.id){this._firstTouchInfo={}}else{if(e===this._secondTouchInfo.id){this._secondTouchInfo={}}}};fO.prototype._clearStatus=function(){this._firstTouchInfo={};this._secondTouchInfo={}};fO.prototype._processRightClick=function(jf){var je=this._map;var T=je.temp;if(T.rightDblclickTimer){clearTimeout(T.rightDblclickTimer);T.rightDblclickTimer=null;je.dispatchEvent(ev.extend(new fa("onrightclick"),jf));je.dispatchEvent(ev.extend(new fa("onrightdblclick"),jf))}else{je.dispatchEvent(ev.extend(new fa("onrightclick"),jf));var i=ev.extend(new fa("onrightclickex"),jf);T.rightDblclickTimer=setTimeout(function(){T.rightDblclickTimer=null;je.dispatchEvent(i)},je.config.clickInterval)}};fO.prototype._bindMouseWheel=function(){var je=this._map;var T=this;if(!ev.Browser.firefox){ev.on(je.container,"mousewheel",function i(jf){if(je.getLock()===true){return}if(!je.config.enableWheelZoom){return}if(je.mapType!==BMAP_EARTH_MAP){if(T._isModernBrowser){T._deepZoomWheel(jf)}else{T._wheel(jf)}}else{if(T._earthWheel){T._earthWheel.onWheel(ja(jf,je))}}b(jf)})}else{ev.on(je.container,"wheel",function e(jf){if(je.getLock()===true){return}if(!je.config.enableWheelZoom){return}if(je.mapType!==BMAP_EARTH_MAP){if(T._isModernBrowser){T._deepZoomWheel(jf)}else{T._wheel(jf)}}else{if(T._earthWheel){T._earthWheel.onWheel(ja(jf,je))}}b(jf)})}};fO.prototype._getCurrentDrag=function(){var e=this._map;if(e.getMapType()!==BMAP_EARTH_MAP){return this._drag}return this._earthDrag};fO.prototype._wheel=function(jh){var jg=this._map;var je=this._map.temp;if(je.dragAni){je.dragAni.stop();je.dragAni=null;setTimeout(function(){jg.dispatchEvent(new fa("onmoveend"))},1)}if(je.touchZoomLabelCanvas){je.touchZoomLabelCanvas.style.display="none"}if(je.touchZoomDiv){je.touchZoomDiv.style.display="none"}jh=window.event||jh;jg.lastLevel=jg.zoomLevel;var T=new fa("onmousewheel");T.trend=jh.wheelDelta>=0;if(isNaN(jh.wheelDelta)){T.trend=jh.deltaY<=0}var i=new Date();if(T.trend===true&&jg.zoomLevel===jg.getMaxZoom()||T.trend===false&&jg.zoomLevel===jg.getMinZoom()||i-this._lastWheelTime<220){jg.currentOperation^=dL.mousewheel;if(T.trend===true&&jg.zoomLevel===jg.getMaxZoom()||T.trend===false&&jg.zoomLevel===jg.getMinZoom()){var jf=new fa("onzoomexceeded");if(jg.zoomLevel===jg.getMaxZoom()){jf.targetZoom=jg.zoomLevel+1}else{jf.targetZoom=jg.zoomLevel-1}jg.dispatchEvent(jf)}b(jh);return}this._astWheelTime=i;ev.extend(T,ja(jh,jg));jg.dispatchEvent(T)};fO.prototype._deepZoomWheel=function(je){var T=this._map;var i=new fa("ondeepzoommousewheel");ev.extend(i,ja(je,T));T.dispatchEvent(i)};fO.prototype.setEarthDrag=function(e){this._earthDrag=e};fO.prototype.setEarthWheel=function(e){this._earthWheel=e};fO.prototype._trackVelocity=function(){var T=(new Date()).getTime();var e=T-this._trackTimeStamp;if(e===0){return}this._trackTimeStamp=T;var je=Math.sqrt(Math.pow(this._diffX,2)+Math.pow(this._diffY,2));var jf=Math.abs(je-this._lastDiffDistance);this._lastDiffDistance=je;var i=500*jf/e;this._operationVelocity=(0.6*i+0.4*this._operationVelocity)};function bP(e){this._map=e;this.scrollCount=0;this.maxZoomWheelDir=1;this.minZoomWheelDir=-1;this.maxZoom=e.getMaxZoom();this.minZoom=e.getMinZoom();this.lastWheelTime=0;this._opMethod="";this.lastWheelDelta=0;this.lastDiff=0;this._mouseFixPoint=null;this.bindEvent()}var gg=bP.prototype;gg.bindEvent=function(){var e=this;var i=e._map;i.addEventListener("maptypechange",function(T){e.maxZoom=i.getMaxZoom();e.minZoom=i.getMinZoom()});i.addEventListener("deepzoommousewheel",function(T){e.wheel(T)})};gg.wheel=function(jg){var ji=this;var i=ji._map;var jp=i.temp;if(jp.dragAni){jp.dragAni.stop(false,{readyToMove:true});jp.dragAni=null}var je=Math.floor(jg.timeStamp);var T=je-this.lastWheelTime;var jf=this._trend=jg.deltaY<=0;if(isNaN(jg.deltaY)){jf=this._trend=jg.wheelDelta>=0}var jo=Math.abs(jg.deltaY);var jm=Math.abs(jg.wheelDelta);var jl=jo;if(jm===0&&jl===0){return}var jk=false;if(this._opMethod==="mouseWheel"&&typeof this._preTrend==="boolean"&&this._preTrend!==this._trend){jk=true}if(T>100||jk===true){this._opMethod=g4(jm,jl,jg.deltaMode);if(this._opMethod==="mouseWheel"){if(jp.wheelAni){jp.wheelAni.stop();jp.wheelAni=null}if(this._wheelMotionTimer){clearTimeout(this._wheelMotionTimer);this._wheelMotionTimer=null}}this._mouseFixPoint=jg.point.clone();this.scrollCount=0;this.startZoom=i.getZoom();i.fire(new fa("onmousewheelscroll"));if((this.startZoom===this.maxZoom&&jf===true)||(this.startZoom===this.minZoom&&jf===false)){var jn=new fa("onzoomexceeded");jn.targetZoom=this.startZoom;i.dispatchEvent(jn);return}}this.lastWheelTime=je;var jj=this._mouseFixPoint;if(this._opMethod==="mouseWheel"&&jl!==0){var jh=jm?(jm/3):jl;this._onWheelMouse(jh,jf,jj,jg.deltaMode);return}if(this._opMethod==="padScroll"){jo=jl/50}else{jo=jl/20}if(isNaN(jo)&&jg.detail){jo=Math.abs(jg.detail)}var ji=this;setTimeout(function(){var jq=i.getZoom();var e=jf===true?jq+0.2*jo:jq-0.2*jo;i.setZoomIn(e,{zoomCenter:jj,stopCurrentAnimation:true,noAnimation:true})},20)};gg._onWheelMouse=function(i,je,jg,T){var jh=this._map;this.scrollCount++;if(this.scrollCount>10){this.scrollCount=10}var jf=0;if(ev.Browser.firefox){if(T===1){i*=15}if(!ev.Platform.macintosh){jf=bt(i*0.005,2)*this.scrollCount}else{if(i%1!==0){i*=10}jf=bt(i*0.01,2)}}else{if(!ev.Platform.macintosh){jf=bt(i*0.005,2)*this.scrollCount}else{jf=bt(i*0.005,2)}}if(jf>2){jf=2}if(je===false){jf=-jf}var e=jh.getZoom()+jf;jh.setZoomIn(e,{zoomCenter:jg,fromMouseWheel:true});this._preTrend=this._trend};function gs(e){this._map=e;this._opButton=0;this._initTilt=0;this._initHeading=0;this._mapHeight=0;this._changeHeadingStartPos=null}ev.extend(gs.prototype,{onReadyToDrag:function(jf,i){var je=this._map;var T=je.temp;if(T.dragAni){T.dragAni.stop(false,{readyToMove:true});T.dragAni=null}if(je._ani){je._ani.stop();je._ani=null}if(je._infiniteAni){je._infiniteAni.stop();je._infiniteAni=null}if(T.tlPan){T.tlPan.stop();T.tlPan=null}if(!je.config.enableDragging){return}if(jf.button===0&&jf.ctrlKey===false&&jf.metaKey===false){this._opButton="left";T.pl=je.offsetX;T.pt=je.offsetY}else{this._opButton="right";this._initTilt=je.getTilt();this._initHeading=je.getHeading();this._mapHeight=je.getSize().height}if(T.curSpotsArray.length===0&&T.curAreaSpot===null){je.platform.style.cursor=je.config.draggingCursor}else{je.platform.style.cursor="pointer"}},onReadyToPinch:function(je,i){var T=this._map;if(T.config.fixCenterWhenPinch){this._fixPoint=T.getCenterIn().clone()}else{this._fixPoint=T.pixelToPointIn(i.pinchStartPosition)}this._fixPixel=T.pointToPixelIn(this._fixPoint);this._startZoom=T.getZoom();this._startHeading=T.getHeading();this._startTilt=T.getTilt()},onDragStart:function(){var e=this._map;if(!e.config.enableDragging){return}e.platform.style.cursor=e.config.draggingCursor;this._startZoom=e.getZoom()},onDragging:function(ji,i){var je=this._map;if(!je.config.enableDragging){return}var jn=je.temp;if(this._opButton==="right"&&je.getZoom()<je._enableTiltZoom){return}var jl=i.diffX;var jk=i.diffY;var jg=false;var jm=i.gestureStatus.dragZoom;if(Math.abs(jl)>1||Math.abs(jk)>1){jg=true;if(!jn._moved){if(!jm){je.dispatchEvent(ev.extend(new fa("ondragstart"),ji));je.dispatchEvent(new fa("onmovestart"))}jn._moved=true}}if(jg===false){return}je.dispatchEvent(ev.extend(new fa("ondragging"),ji));jn.lastDomMoveTime=ji.timeStamp;if(jm){je.setZoomIn(this._startZoom-jk/50,{noAnimation:true})}else{if(this._opButton==="left"){je._setPlatformPosition(jl,jk,{initMapOffsetX:jn.pl,initMapOffsetY:jn.pt})}else{var jj=20;var jh={noAnimation:true};if(Math.abs(jk)>jj){if(!this._rightDragInitY){this._rightDragInitY=ji.pixel.y}}if(this._rightDragInitY){if(!je.config.enableTilt){return}var T=ji.pixel.y-this._rightDragInitY;this._setTiltByMoveY(this._initTilt,T,jh)}if(Math.abs(jl)>jj){if(!this._rightDragInitX){this._rightDragInitX=ji.pixel.x}}if(this._rightDragInitX){if(!je.config.enableRotate){return}var jf=ji.pixel.x-this._rightDragInitX;if(this._changeHeadingStartPos===null){this._changeHeadingStartPos=ji.pixel}if(this._changeHeadingStartPos.y<this._mapHeight/2){je.setHeading(this._initHeading+jf*0.3,jh)}else{je.setHeading(this._initHeading-jf*0.3,jh)}}}}},_setTiltByMoveY:function(T,jg,e){var jf=this._map;var i=T+jg*0.4;var je=jf.getCurrentMaxTilt();i=dq(i,g0.MIN_TILT,je,0.4);jf.setTilt(i,e)},onPinching:function(jg,i){var jf=this._map;if(jf.config.enableTiltGestures&&i.gestureStatus.tilt){this._setTiltByMoveY(this._startTilt,i.pinchingDistance.y,{noAnimation:true});return}var je=Math.log(i.zoomRatio)/Math.log(2);var T=Math.max(Math.min(this._startZoom+je,jf.getMaxZoom()),jf.getMinZoom());if(jf.config.enableRotateGestures&&typeof i.angleDiff==="number"){jf.setHeading(this._startHeading+i.angleDiff,{noAnimation:true})}jf.setZoomIn(T,{zoomCenter:this._fixPoint,noAnimation:true,fixPixel:this._fixPixel})},onDragEnd:function(jf,i){var je=this._map;if(!je.config.enableDragging){return}var T=je.temp;if(T.curSpotsArray.length===0&&T.curAreaSpot===null){je.platform.style.cursor=je.config.defaultCursor}else{je.platform.style.cursor="pointer"}if(T._moved&&!i.gestureStatus.dragZoom){je.dispatchEvent(ev.extend(new fa("ondragend"),jf));if(!je.config.enableInertialDragging||jf.timeStamp-T.lastDomMoveTime>100){je.dispatchEvent(new fa("onmoveend"))}else{this._processMotion(i.velocity,i.dragDistance,i.dir)}T._moved=false}this._changeHeadingStartPos=null;this._rightDragInitX=this._rightDragInitY=null;if(this._opButton==="right"){this._tiltBounceBack()}},_tiltBounceBack:function(){var i=this._map;if(i.getZoom()<i._enableTiltZoom){return}var e=i.getCurrentMaxTilt();if(i.getTilt()>e){i.setTilt(e,{duration:200})}else{if(i.getTilt()<g0.MIN_TILT){i.setTilt(g0.MIN_TILT,{duration:200})}}},onPinchEnd:function(jf,i){var je=this._map;if(i.gestureStatus.tilt){this._tiltBounceBack()}if(je.config.enableRotateGestures&&i.gestureStatus.rotate){var T=Math.abs(je.getHeading());if(T%360<10){je.resetHeading()}}},_processMotion:function(jf,jr,jj){var jp=this._map;var ji=jp.temp;var T=(new Date()).getTime();var i=0.5*jf;if(this._opButton==="right"){i=0.15*jf}var jn=0;var jm=0;if(jj.y===0){jn=i}else{var je=Math.abs(jj.x/jj.y);jm=Math.round(Math.sqrt(i*i/(1+je*je)));jn=Math.round(je*jm)}var jl=hM(jp._heading);if(jj.x<0){jn=-jn}if(jj.y<0){jm=-jm}var jh=jr.x+jn;var jg=jr.y+jm;if(ji.dragAni){ji.dragAni.stop();ji.dragAni=null;jp.dispatchEvent(new fa("onmoveend"))}var js=0;var jq=0;if(this._opButton==="right"){if(!this._changeHeadingStartPos){return}var jk=this._mapHeight;var e=this._changeHeadingStartPos;var jo=this._initHeading;ji.dragAni=new e3({duration:10000,render:function(ju){var jt=(new Date()).getTime()-T;var jv=Math.exp(-jt/250);js=jh-jn*jv;if(Math.abs(jn*jv)<5&&Math.abs(jm*jv)<5){ji.dragAni.stop();return}if(e.y<jk/2){jp.setHeading(jo+js*0.3,{noAnimation:true})}else{jp.setHeading(jo-js*0.3,{noAnimation:true})}},finish:function(){ji.dragAni=null;if(e.y<jk/2){jp.setHeading(jo+js*0.3,{noAnimation:true})}else{jp.setHeading(jo-js*0.3,{noAnimation:true})}},onStop:function(){ji.dragAni=null;if(e.y<jk/2){jp.setHeading(jo+js*0.3,{noAnimation:true})}else{jp.setHeading(jo-js*0.3,{noAnimation:true})}}});return}ji.dragAni=new e3({duration:10000,render:function(jv,ju){var jt=(new Date()).getTime()-T;var jw=Math.exp(-jt/250);js=jh-jn*jw;jq=jg-jm*jw;if(Math.abs(jn*jw)<5&&Math.abs(jm*jw)<5){ji.dragAni.stop();return}jp._setPlatformPosition(js,jq,{initMapOffsetX:ji.pl,initMapOffsetY:ji.pt})},finish:function(){ji.dragAni=null;jp._setPlatformPosition(js,jq,{initMapOffsetX:ji.pl,initMapOffsetY:ji.pt});jp.dispatchEvent(new fa("onmoveend"))},onStop:function(jt){ji.dragAni=null;jp._setPlatformPosition(js,jq,{initMapOffsetX:ji.pl,initMapOffsetY:ji.pt});var ju=new fa("onmoveend");ju.userData=jt;jp.dispatchEvent(ju)}})}});bp.register(function(i){var e=i;if(i._keyboardInit===true){return}i._keyboardInit=true;ev.on(document,"keydown",function(T){if(e.temp.stopArrow===true){e.temp.stopArrow=false}if(e.config.enableKeyboard&&e.temp.canKeyboard){var T=window.event||T;var je=false;if(ev.Platform.macintosh){if(T.metaKey===true){je=true}}else{if(T.ctrlKey===true){je=true}}switch(T.keyCode||T.which){case 189:case 109:case 173:if(!je){e.temp.operating=true;e.dispatchEvent(new fa("onminuspress"))}break;case 61:case 187:case 107:if(!je){e.temp.operating=true;e.dispatchEvent(new fa("onpluspress"))}break;case 33:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 34:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 35:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 36:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 37:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=1;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 38:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=2;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 39:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=4;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 40:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=8;e._arrow();T.cancelBubble=true;T.returnValue=false;break}}});ev.on(document,"keyup",function(T){if(e.config.enableKeyboard){var T=window.event||T;switch(T.keyCode||T.which){case 37:e.temp.arrow=e.temp.arrow&~1;if(e.temp.arrow!==0){e._arrow()}break;case 38:e.temp.arrow=e.temp.arrow&~2;if(e.temp.arrow!==0){e._arrow()}break;case 39:e.temp.arrow=e.temp.arrow&~4;if(e.temp.arrow!==0){e._arrow()}break;case 40:e.temp.arrow=e.temp.arrow&~8;if(e.temp.arrow!==0){e._arrow()}break}}e.temp.operating=false});g0.prototype._arrow=function(){if(this.mapType===BMAP_EARTH_MAP){return}if(this._arrow.occurrent&&this._arrow._lastArrow===this.temp.arrow&&this.temp.stopArrow===true){return}var T=this;var jf=T.temp.arrow;T._arrow._lastArrow=jf;T._arrow.interval=30;T._arrow.duration=999;T._arrow.dx=T._arrow.dy=0;if(jf&1){T._arrow.dx=1}if(jf&2){T._arrow.dy=1}if(jf&4){T._arrow.dx=-1}if(jf&8){T._arrow.dy=-1}if(jf&1&&jf&4){T._arrow.dx=0}if(jf&2&&jf&8){T._arrow.dy=0}if(!T._arrow.occurrent){T._arrow.occurrent=true;T._arrow.time=new Date().getTime();T._arrow.beginTime=T._arrow.time;T.dispatchEvent(new fa("onmovestart"));var je=new e3({fps:T._arrow.interval,duration:T._arrow.duration,transition:fY.linear,render:function(jm){var jh=T._arrow;var jk=T.temp.arrow;if(T._arrow._lastArrow!==jk){T._arrow._lastArrow=jk;if(jk&1){jh.dx=1}if(jk&2){jh.dy=1}if(jk&4){jh.dx=-1}if(jk&8){jh.dy=-1}if(jk&1&&jk&4){jh.dx=0}if(jk&2&&jk&8){jh.dy=0}}if(T.temp.stopArrow===true){jh.dx=0;jh.dy=0}var jl=new Date().getTime();var jj=Math.pow((jl-jh.beginTime)/jh.duration,2);if(!T.temp.arrow){jh.occurrent=false;je.terminative=true;T._arrow.time=new Date().getTime();setTimeout(function(){T.dispatchEvent(new fa("onmoveend"))},40)}var jn=(jl-jh.time);var ji=jh.dx*jn*jj>=0?Math.ceil(jh.dx*jn*jj):Math.floor(jh.dx*jn*jj);var jg=jh.dy*jn*jj>=0?Math.ceil(jh.dy*jn*jj):Math.floor(jh.dy*jn*jj);if(ji!==0&&jg!==0){ji=Math.round(ji*0.7);jg=Math.round(jg*0.7)}jh.time=jl;T._setPlatformPosition(ji,jg)},finish:function(){T._arrow.time=new Date().getTime();setTimeout(function(){T._arrowPan()},T._arrow.interval)}})}};g0.prototype._arrowPan=function(){var jg=this;var je=jg._arrow;if(jg.temp.stopArrow){je.dx=0;je.dy=0}if(!jg.temp.arrow){je.occurrent=false;jg.dispatchEvent(new fa("onmoveend"));return}var jh=new Date().getTime();var ji=(jh-je.time);var jf=Math.ceil(je.dx*ji);var T=Math.ceil(je.dy*ji);je.time=jh;jg._setPlatformPosition(jf,T);setTimeout(function(){jg._arrowPan()},je.interval)}});');
